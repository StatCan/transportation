!function(a){var b={margin:{top:15,right:10,bottom:30,left:50},aspectRatio:16/9,x:{ticks:5,getDomain:function(a){return d3.extent(a,this.x.getValue.bind(this))},getRange:function(){return[0,this.innerWidth]}},y:{ticks:10,getDomain:function(a){var b=d3.min(a,this.y.getValue.bind(this));return[b>0?0:b,d3.max(a,this.y.getValue.bind(this))]}},width:600};this.lineChart=function(c,d,e){var f,g,h,i,j=a(!0,{},b,d),k=j.width,l=Math.ceil(k/j.aspectRatio),m=j.innerHeight=l-j.margin.top-j.margin.bottom,n=j.innerWidth=k-j.margin.left-j.margin.right,o=c.select("g.margin-offset"),p=o.select(".data"),q=d3.line().x(function(){return f(j.x.getValue.apply(j,arguments))}).y(function(){return g(j.y.getValue.apply(j,arguments))}),r=d3.transition().duration(1e3),s=function(){var a,b,c=this.settings,i=c.filterData&&"function"==typeof c.filterData?c.filterData.call(c,e):e,k=[].concat.apply([],i.map(function(a){return c.z.getDataPoints.call(c,a)})),l=void 0!==c.showLabels?c.showLabels:i.length>1,s=o.select(".x.axis"),t=o.select(".y.axis"),u=n,v=function(a){var b=j.z.getDataPoints(a);return g(j.y.getValue.call(c,b[b.length-1]))},w=function(a,b){var d="dline dline"+(b+1);return c.z&&c.z.getClass&&"function"==typeof c.z.getClass&&(d+=" "+c.z.getClass.apply(c,arguments)),d},x=function(){return q(c.z.getDataPoints.apply(c,arguments))};f=h.x=function(){switch(c.x.type){case"linear":return d3.scaleLinear();case"ordinal":return d3.scaleOrdinal();default:return d3.scaleTime()}}().range(c.x.getRange.call(c,k)),g=h.y=d3.scaleLinear().range([m,0]),f.domain(c.x.getDomain.call(c,k)),g.domain(c.y.getDomain.call(c,k)),p.empty()&&(p=o.append("g").attr("class","data")),a=p.selectAll(".dline").data(i,c.z.getId.bind(c)),a.enter().append("path").attr("class",w).attr("fill","none").attr("d",x),a.transition(r).attr("d",x),a.exit().remove(),b=p.selectAll(".line-label").data(function(){return"function"==typeof l?i.filter(l.bind(c)):!1===l?[]:i}(),c.z.getId.bind(c)),b.enter().append("text").text(c.z.getText.bind(c)).attr("aria-hidden","true").attr("class","line-label").attr("fill","#000").attr("x",u).attr("y",v).attr("text-anchor","end"),b.transition(r).attr("y",v),b.exit().remove(),s.empty()?(s=o.append("g").attr("class","x axis").attr("aria-hidden","true").attr("transform","translate(0,"+m+")"),s.append("text").attr("class","chart-label").attr("fill","#000").attr("x",n).attr("dy","-0.5em").attr("text-anchor","end").text(c.x.label)):s.select("text").text(d.x.label),s.call(d3.axisBottom(f).ticks(c.x.ticks).tickFormat(c.x.getTickText?c.x.getTickText.bind(c):null)),t.empty()?(t=o.append("g").attr("class","y axis").attr("aria-hidden","true"),t.append("text").attr("class","chart-label").attr("fill","#000").attr("y","0").attr("dy","-0.5em").attr("text-anchor","start").text(c.y.label)):t.select("text").text(d.y.label),t.call(d3.axisLeft(g).ticks(c.y.ticks).tickFormat(c.y.getTickText?c.y.getTickText.bind(c):null))},t=function(){var a,b,d,e,f,g=this.settings,h=g.filterData&&"function"==typeof g.filterData?g.filterData(g.data,"table"):g.data,i=c.select(c.classed("svg-shimmed")?function(){return this.parentNode.parentNode}:function(){return this.parentNode}),j=i.select("details"),k=g.z.getKeys.call(g,h),l=g.z.getDataPoints.call(g,h[k[0]]),m=(g.x.getText||g.x.getValue).bind(g),n=function(a){var b=d3.select(this),c=b.selectAll("*").data(a),d=function(a){return a};c.enter().append(function(a,b){return document.createElement(0===b?"th":"td")}).text(d),c.text(d),c.exit().remove()};j.empty()?(j=i.append("details").attr("class","chart-data-table"),j.append("summary").attr("id","chrt-dt-tbl"),a=j.append("table").attr("class","table").attr("aria-labelledby","chrt-dt-tbl"),b=a.append("thead").append("tr"),e=a.append("tbody"),b.append("td")):(b=j.select("thead tr"),e=j.select("tbody")),j.select("summary").text(g.datatable.title||"Data"),d=b.selectAll("th").data(l),d.enter().append("th").text(m),d.text(m),d.exit().remove(),f=e.selectAll("tr").data(h.map(function(){return[(g.z.getText||g.z.getValue).apply(g,arguments)].concat(g.z.getDataPoints.apply(g,arguments).map((g.y.getText?g.y.getText:g.y.getValue).bind(g)))})),f.enter().append("tr").each(n),f.each(n),f.exit().remove(),($||wb)&&$(".chart-data-table summary").trigger("wb-init.wb-details")},u=function(){p.remove()};return h={settings:j,clear:u,svg:c},c.attr("viewBox","0 0 "+k+" "+l).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",j.altText),o.empty()&&(o=c.append("g").attr("class","margin-offset").attr("transform","translate("+j.margin.left+","+j.margin.top+")")),i=function(){s.apply(h),d3.stcExt.addIEShim(c,l,k),!1!==j.datatable&&t.apply(h)},void 0===e?d3.json(j.url,function(a,b){e=b,i()}):i(),h}}(jQuery.extend,jQuery);
//# sourceMappingURL=line.min.js.map