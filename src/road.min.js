!function(){"use strict";var s=function(t){try{return!!t()}catch(t){return!0}},e=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),p=function(t){return"object"==typeof t?null!==t:"function"==typeof t},T=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var h=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),n=h.document,r=p(n)&&p(n.createElement),o=function(t){return r?n.createElement(t):{}},i=!e&&!s(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}),a=Object.defineProperty,l={f:e?Object.defineProperty:function(t,e,n){if(T(t),e=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),T(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},c=function(){var t=T(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};e&&"g"!=/./g.flags&&l.f(RegExp.prototype,"flags",{configurable:!0,get:c});var S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=e?function(t,e,n){return l.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},u={}.hasOwnProperty,f=function(t,e){return u.call(t,e)},d=0,g=Math.random(),v=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++d+g).toString(36))},y=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),w=(y.version,t(function(t){var i=v("src"),e="toString",n=Function[e],a=(""+n).split(e);y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(f(n,"name")||O(n,"name",e)),t[e]!==n&&(o&&(f(n,i)||O(n,i,t[e]?""+t[e]:a.join(String(e)))),t===h?t[e]=n:r?t[e]?t[e]=n:O(t,e,n):(delete t[e],O(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||n.call(this)})})),x="toString",m=/./[x],b=function(t){w(RegExp.prototype,x,t,!0)};s(function(){return"/a/b"!=m.call({source:"a",flags:"b"})})?b(function(){var t=T(this);return"/".concat(t.source,"/","flags"in t?t.flags:!e&&t instanceof RegExp?c.call(t):void 0)}):m.name!=x&&b(function(){return m.call(this)});var A=Date.prototype,E="Invalid Date",j="toString",L=A[j],F=A.getTime;new Date(NaN)+""!=E&&w(A,j,function(){var t=F.call(this);return t==t?L.call(this):E});var P=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},_=function(r,o,t){if(P(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},C="prototype",M=function(t,e,n){var r,o,i,a,l=t&M.F,c=t&M.G,u=t&M.S,s=t&M.P,f=t&M.B,d=c?h:u?h[e]||(h[e]={}):(h[e]||{})[C],p=c?y:y[e]||(y[e]={}),g=p[C]||(p[C]={});for(r in c&&(n=e),n)i=((o=!l&&d&&void 0!==d[r])?d:n)[r],a=f&&o?_(i,h):s&&"function"==typeof i?_(Function.call,i):i,d&&w(d,r,i,t&M.U),p[r]!=i&&O(p,r,a),s&&g[r]!=i&&(g[r]=i)};h.core=y,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var k=M,I={}.toString,R=function(t){return I.call(t).slice(8,-1)},D=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==R(t)?t.split(""):Object(t)},N=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},G=function(t){return Object(N(t))},H=Math.ceil,B=Math.floor,V=function(t){return isNaN(t=+t)?0:(0<t?B:H)(t)},z=Math.min,U=function(t){return 0<t?z(V(t),9007199254740991):0},Y=Array.isArray||function(t){return"Array"==R(t)},q=t(function(t){var e="__core-js_shared__",n=h[e]||(h[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),K=t(function(t){var e=q("wks"),n=h.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:v)("Symbol."+t))}).store=e}),W=K("species"),X=function(t,e){return Y(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Y(r.prototype)||(r=void 0),p(r)&&null===(r=r[W])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},Q=function(f,t){var d=1==f,p=2==f,g=3==f,h=4==f,v=6==f,y=5==f||v,x=t||X;return function(t,e,n){for(var r,o,i=G(t),a=D(i),l=_(e,n,3),c=U(a.length),u=0,s=d?x(t,c):p?x(t,0):void 0;u<c;u++)if((y||u in a)&&(o=l(r=a[u],u,i),f))if(d)s[u]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:s.push(r)}else if(h)return!1;return v?-1:g||h?h:s}},J=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})},Z=Q(2);k(k.P+k.F*!J([].filter,!0),"Array",{filter:function(t){return Z(this,t,arguments[1])}});var tt=Q(1);k(k.P+k.F*!J([].map,!0),"Array",{map:function(t){return tt(this,t,arguments[1])}});var et=function(t){return D(N(t))},nt=Math.max,rt=Math.min,ot=function(u){return function(t,e,n){var r,o,i,a=et(t),l=U(a.length),c=(o=l,(r=V(r=n))<0?nt(r+o,0):rt(r,o));if(u&&e!=e){for(;c<l;)if((i=a[c++])!=i)return!0}else for(;c<l;c++)if((u||c in a)&&a[c]===e)return u||c||0;return!u&&-1}},it=ot(!1),at=[].indexOf,lt=!!at&&1/[1].indexOf(1,-0)<0;k(k.P+k.F*(lt||!J(at)),"Array",{indexOf:function(t){return lt?at.apply(this,arguments)||0:it(this,t,arguments[1])}});var ct,ut,st,ft=K("match"),dt=K("species"),pt=(ct=!0,function(t,e){var n,r,o=String(N(t)),i=V(e),a=o.length;return i<0||a<=i?ct?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?ct?o.charAt(i):n:ct?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}),gt=K("toStringTag"),ht="Arguments"==R(function(){return arguments}()),vt=RegExp.prototype.exec,yt=function(t,e){var n,r,o,i,a=t.exec;if("function"==typeof a){var l=a.call(t,e);if("object"!=typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(o=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),gt))?o:ht?R(r):"Object"==(i=R(r))&&"function"==typeof r.callee?"Arguments":i))throw new TypeError("RegExp#exec called on incompatible receiver");return vt.call(t,e)},xt=RegExp.prototype.exec,mt=String.prototype.replace,bt=xt,At="lastIndex",St=(ut=/a/,st=/b*/g,xt.call(ut,"a"),xt.call(st,"a"),0!==ut[At]||0!==st[At]),Ot=void 0!==/()??/.exec("")[1];(St||Ot)&&(bt=function(t){var e,n,r,o,i=this;return Ot&&(n=new RegExp("^"+i.source+"$(?!\\s)",c.call(i))),St&&(e=i[At]),r=xt.call(i,t),St&&r&&(i[At]=i.global?r.index+r[0].length:e),Ot&&r&&1<r.length&&mt.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var Tt=bt;k({target:"RegExp",proto:!0,forced:Tt!==/./.exec},{exec:Tt});var wt=K("species"),Et=!s(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),jt=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Lt=Math.min,Ft=[].push,Pt="split",_t="length",Ct="lastIndex",Mt=4294967295,kt=!s(function(){});!function(n,t,e){var r=K(n),i=!s(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),o=i?!s(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[wt]=function(){return e}),e[r](""),!t}):void 0;if(!i||!o||"replace"===n&&!Et||"split"===n&&!jt){var a=/./[r],l=e(N,r,""[n],function(t,e,n,r,o){return e.exec===Tt?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),c=l[0],u=l[1];w(String.prototype,n,c),O(RegExp.prototype,r,2==t?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}}("split",2,function(o,i,A,S){var O;return O="c"=="abbc"[Pt](/(b)*/)[1]||4!="test"[Pt](/(?:)/,-1)[_t]||2!="ab"[Pt](/(?:ab)*/)[_t]||4!="."[Pt](/(.?)(.?)/)[_t]||1<"."[Pt](/()()/)[_t]||""[Pt](/.?/)[_t]?function(t,e){var n,r,o=String(this);if(void 0===t&&0===e)return[];if(!p(n=t)||(void 0!==(r=n[ft])?!r:"RegExp"!=R(n)))return A.call(o,t,e);for(var i,a,l,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=void 0===e?Mt:e>>>0,d=new RegExp(t.source,u+"g");(i=Tt.call(d,o))&&!(s<(a=d[Ct])&&(c.push(o.slice(s,i.index)),1<i[_t]&&i.index<o[_t]&&Ft.apply(c,i.slice(1)),l=i[0][_t],s=a,c[_t]>=f));)d[Ct]===i.index&&d[Ct]++;return s===o[_t]?!l&&d.test("")||c.push(""):c.push(o.slice(s)),c[_t]>f?c.slice(0,f):c}:"0"[Pt](void 0,0)[_t]?function(t,e){return void 0===t&&0===e?[]:A.call(this,t,e)}:A,[function(t,e){var n=o(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):O.call(String(n),t,e)},function(t,e){var n=S(O,t,this,e,O!==A);if(n.done)return n.value;var r,o,i,a=T(t),l=String(this),c=(r=RegExp,void 0===(i=T(a).constructor)||null==(o=T(i)[dt])?r:P(o)),u=a.unicode,s=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(kt?"y":"g"),f=new c(kt?a:"^(?:"+a.source+")",s),d=void 0===e?Mt:e>>>0;if(0===d)return[];if(0===l.length)return null===yt(f,l)?[l]:[];for(var p,g,h=0,v=0,y=[];v<l.length;){f.lastIndex=kt?v:0;var x,m=yt(f,kt?l:l.slice(v));if(null===m||(x=Lt(U(f.lastIndex+(kt?0:v)),l.length))===h)p=l,v=(g=v)+(u?pt(p,g).length:1);else{if(y.push(l.slice(h,v)),y.length===d)return y;for(var b=1;b<=m.length-1;b++)if(y.push(m[b]),y.length===d)return y;v=h=x}}return y.push(l.slice(h)),y}]});var It=K("unscopables"),Rt=Array.prototype;null==Rt[It]&&O(Rt,It,{});var Dt=function(t){Rt[It][t]=!0},Nt=function(t,e){return{value:e,done:!!t}},Gt={},Ht=q("keys"),Bt=function(t){return Ht[t]||(Ht[t]=v(t))},Vt=ot(!1),zt=Bt("IE_PROTO"),$t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ut=Object.keys||function(t){return function(t,e){var n,r=et(t),o=0,i=[];for(n in r)n!=zt&&f(r,n)&&i.push(n);for(;e.length>o;)f(r,n=e[o++])&&(~Vt(i,n)||i.push(n));return i}(t,$t)},Yt=e?Object.defineProperties:function(t,e){T(t);for(var n,r=Ut(e),o=r.length,i=0;i<o;)l.f(t,n=r[i++],e[n]);return t},qt=h.document,Kt=qt&&qt.documentElement,Wt=Bt("IE_PROTO"),Xt=function(){},Qt="prototype",Jt=function(){var t,e=o("iframe"),n=$t.length;for(e.style.display="none",Kt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Jt=t.F;n--;)delete Jt[Qt][$t[n]];return Jt()},Zt=Object.create||function(t,e){var n;return null!==t?(Xt[Qt]=T(t),n=new Xt,Xt[Qt]=null,n[Wt]=t):n=Jt(),void 0===e?n:Yt(n,e)},te=l.f,ee=K("toStringTag"),ne=function(t,e,n){t&&!f(t=n?t:t.prototype,ee)&&te(t,ee,{configurable:!0,value:e})},re={};O(re,K("iterator"),function(){return this});var oe=Bt("IE_PROTO"),ie=Object.prototype,ae=Object.getPrototypeOf||function(t){return t=G(t),f(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ie:null},le=K("iterator"),ce=!([].keys&&"next"in[].keys()),ue="values",se=function(){return this},fe=function(t,e,n,r,o,i,a){var l,c,u;c=e,u=r,(l=n).prototype=Zt(re,{next:S(1,u)}),ne(l,c+" Iterator");var s,f,d,p=function(t){if(!ce&&t in y)return y[t];switch(t){case"keys":case ue:return function(){return new n(this,t)}}return function(){return new n(this,t)}},g=e+" Iterator",h=o==ue,v=!1,y=t.prototype,x=y[le]||y["@@iterator"]||o&&y[o],m=x||p(o),b=o?h?p("entries"):m:void 0,A="Array"==e&&y.entries||x;if(A&&(d=ae(A.call(new t)))!==Object.prototype&&d.next&&(ne(d,g,!0),"function"!=typeof d[le]&&O(d,le,se)),h&&x&&x.name!==ue&&(v=!0,m=function(){return x.call(this)}),(ce||v||!y[le])&&O(y,le,m),Gt[e]=m,Gt[g]=se,o)if(s={values:h?m:p(ue),keys:i?m:p("keys"),entries:b},a)for(f in s)f in y||w(y,f,s[f]);else k(k.P+k.F*(ce||v),e,s);return s}(Array,"Array",function(t,e){this._t=et(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Nt(1)):Nt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Gt.Arguments=Gt.Array,Dt("keys"),Dt("values"),Dt("entries");for(var de=K("iterator"),pe=K("toStringTag"),ge=Gt.Array,he={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ve=Ut(he),ye=0;ye<ve.length;ye++){var xe,me=ve[ye],be=he[me],Ae=h[me],Se=Ae&&Ae.prototype;if(Se&&(Se[de]||O(Se,de,ge),Se[pe]||O(Se,pe,me),Gt[me]=ge,be))for(xe in fe)Se[xe]||w(Se,xe,fe[xe],!0)}var Oe,Te,we,Ee;Oe="keys",Te=function(){return function(t){return Ut(G(t))}},we=(y.Object||{})[Oe]||Object[Oe],(Ee={})[Oe]=Te(we),k(k.S+k.F*s(function(){we(1)}),"Object",Ee);var je={alt:i18next.t("alt",{ns:"roadArea"}),margin:{top:50,left:90,right:30,bottom:50},filterData:function(t){return t},x:{getValue:function(t,e){return 0===e?new Date(t.date+"-01"):new Date(t.date,0,1,0,0,0,1)},getText:function(t){return t.date},ticks:7},y:{label:i18next.t("y_label",{ns:"roadArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:1*t[e]/1e3},getTotal:function(t,e,n){var r,o,i=this;if(!t[i.y.totalProperty]){o=i.z.getKeys.call(i,n);for(var a=r=0;a<o.length;a++)r+=i.y.getValue.call(i,t,o[a],n);t[i.y.totalProperty]=r}return t[i.y.totalProperty]},getText:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?t[e]:1*t[e]/1e3},ticks:5},z:{label:i18next.t("z_label",{ns:"roadArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"roadArea"})}},datatable:!0,tableTitle:"",dataTableTotal:!0,transition:!1,width:1050};var Le=[].sort,Fe=[1,2,3];k(k.P+k.F*(s(function(){Fe.sort(void 0)})||!s(function(){Fe.sort(null)})||!J(Le)),"Array",{sort:function(t){return void 0===t?Le.call(G(this)):Le.call(G(this),P(t))}});var Pe,_e={f:{}.propertyIsEnumerable}.f,Ce=(Pe=!1,function(t){for(var e,n=et(t),r=Ut(n),o=r.length,i=0,a=[];i<o;)_e.call(n,e=r[i++])&&a.push(Pe?[e,n[e]]:n[e]);return a});k(k.S,"Object",{values:function(t){return Ce(t)}});var Me={},ke={},Ie="CANADA",Re="2017",De=d3.format(",d"),Ne=d3.select(".data").append("svg").attr("id","svgFuel"),Ge=d3.select(".dashboard .map").append("svg"),He=510-20-0,Be=150-20-10,Ve=d3.select("#mapColourScale").select("svg").attr("class","roadCB").attr("width",He).attr("height",Be).style("vertical-align","middle"),ze=d3.select("#areaLegend").select("svg").attr("class","roadAreaCB").attr("width",650).attr("height",Be).style("vertical-align","middle");d3.stcExt.addIEShim(Ge,387.1,457.5),d3.stcExt.addIEShim(Ve,Be,He),d3.stcExt.addIEShim(ze,Be,650);var $e=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),Ue=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);function Ye(){var t=[];t.push(ke[Re]);var e=["#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC"],n=function(t,e){var n,r=t[0],o=[];(o=Object.values(r)).sort(function(t,e){return t-e}),n=d3.extent(o);var i=d3.scaleQuantize().domain([n[0],n[1]]).range(e);for(var a in r)r.hasOwnProperty(a)&&d3.select(".dashboard .map").select("."+a).style("fill",i(r[a]));return n}(t,e),r=i18next.t("mapScaleLabel",{ns:"road"})+" ("+i18next.t("units",{ns:"road"})+")";!function(t,n,e){var r=d3.format(",d"),o=t.selectAll("rect").data(n).enter().append("g");o.append("rect").attr("width",35).attr("height",35).attr("y",5).attr("x",function(t,e){return 175+35*e}).attr("fill",function(t,e){return n[e]});var i=(e[1]-e[0])/n.length,a=[];a[0]=e[0];for(var l=1;l<n.length;l++)a.push(Math.round(l*i+e[0]));o.append("text"),d3.select("#mapColourScale").selectAll("text").text(function(t,e){var n=r(a[e]/1e3);return n+"+"}).attr("text-anchor","end").attr("transform",function(t,e){return"translate("+(180+35*e)+", 50) rotate(-45)"}).style("display",function(){return"inline"}),d3.select("#cbID").empty()&&t.append("g").append("text").attr("id","cbID").attr("y",28).attr("x",0)}(Ve,e,n),d3.select("#cbID").text(r)}function qe(){areaChart(Ne,je,Me[Ie]),d3.select("#svgFuel").select(".x.axis").select("text").attr("display","none"),d3.select(".dashboard .map").select("."+Ie).classed("roadMapHighlight",!0),Ke(),We()}function Ke(){var t=i18next.t(Ie,{ns:"roadGeography"});d3.select("#mapTitleRoad").text(i18next.t("mapTitle",{ns:"road"})+", "+t+", "+Re),d3.select("#areaTitleRoad").text(i18next.t("chartTitle",{ns:"road"})+", "+t),je.tableTitle=i18next.t("tableTitle",{ns:"roadArea",geo:t})}function We(){var n,t,r=["gas","diesel","lpg"];n=r,(t=ze.selectAll("rect").data(n).enter().append("g")).append("rect").attr("width",35).attr("height",35).attr("y",25).attr("x",function(t,e){return 55+35*e*4}).attr("class",function(t,e){return n[e]}),t.append("text"),d3.select("#areaLegend").selectAll("text").attr("y",48).attr("x",function(t,e){return[95,237,375][e]}).style("display",function(){return"inline"}),d3.select("#areaLegend").selectAll("text").text(function(t,e){return i18next.t(r[e],{ns:"roadArea"})})}Ge.on("mouseover",function(){if(d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if("svg-shimmed"!==t[0]){var e=d3.select(".dashboard .map").select("."+t[0]);e.classed("roadMapHighlight",!0),e.moveToFront();var n=i18next.t(t[0],{ns:"roadGeography"}),r=De(ke[Re][t[0]]/1e3);$e.transition().style("opacity",.9),$e.html("<b>"+n+" ("+i18next.t("units",{ns:"road"})+")</b><br><br><table><tr><td><b>$"+r+"</td></tr></table>")}else $e.transition().style("opacity",0)}}).on("mousemove",function(){$e.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}).on("mouseout",function(){$e.transition().style("opacity",0),Ie?d3.select(".map").selectAll("path:not(."+Ie+")").classed("roadMapHighlight",!1):d3.select(".map").selectAll("path").classed("roadMapHighlight",!1)}),Ge.on("click",function(){if(console.log("map click"),d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),d3.select(d3.event.target).attr("class")&&-1===d3.select(d3.event.target).attr("class").indexOf("svg-shimmed")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");Ie=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0),Me[Ie]?qe():d3.json("data/road/"+Ie+".json",function(t,e){Me[Ie]=e,qe()}),d3.select("#groups")._groups[0][0].value=Ie}else Ie="CANADA",qe(),d3.select("#groups")._groups[0][0].value=Ie;Ke()}),d3.select("#annualTimeseries").on("mousemove",function(){Me[Ie].map(function(t){return t.date});var t=d3.bisector(function(t){return t.date}).left,e=Me[Ie],n=Me[Ie].map(function(t){return parseInt(t.date)}),r=d3.extent(n);console.log("xDomain: ",r);var o=t(e,d3.scaleTime().range([0,593.4]).domain(r).invert(d3.mouse(this)[0]));console.log(o),console.log("YEAR ",n[o]);var i=De(Me[Ie].filter(function(t){return t.date===n[o].toString()})[0].gas/1e3),a=De(Me[Ie].filter(function(t){return t.date===n[o].toString()})[0].diesel/1e3),l=De(Me[Ie].filter(function(t){return t.date===n[o].toString()})[0].lpg/1e3);Ue.transition().style("opacity",.9),Ue.html("<b>Fuel sales ("+i18next.t("units",{ns:"road"})+") in "+n[o]+":</b><br><br><table><tr><td><b>"+i18next.t("gas",{ns:"roadArea"})+"</b>: $"+i+"</td></tr><tr><td><b>"+i18next.t("diesel",{ns:"roadArea"})+"</b>: $"+a+"</td></tr><tr><td><b>"+i18next.t("lpg",{ns:"roadArea"})+"</b>: $"+l+"</td></tr></table>").style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px").style("pointer-events","none")}).on("mouseout",function(t,e){Ue.transition().style("opacity",0)}),i18n.load(["src/i18n"],function(){je.x.label=i18next.t("x_label",{ns:"roadArea"}),je.y.label=i18next.t("y_label",{ns:"roadArea"}),je.tableTitle=i18next.t("tableTitle",{ns:"roadArea",geo:i18next.t(Ie,{ns:"roadGeography"})}),d3.queue().defer(d3.json,"data/road/Annual_Totals.json").defer(d3.json,"data/road/CANADA.json").await(function(t,e,n){ke=e,Me[Ie]=n,getCanadaMap(Ge).on("loaded",function(){Ye()}),areaChart(Ne,je,Me[Ie]),We(),d3.select("#svgFuel").select(".x.axis").select("text").attr("display","none"),Ke()})}),$(document).on("change",function(t){"groups"===t.target.id&&(Ie=document.getElementById("groups").value,d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),Ke(),Me[Ie]?qe():d3.json("data/road/"+Ie+".json",function(t,e){Me[Ie]=e,qe()})),"year"===t.target.id&&(Re=document.getElementById("year").value,Ke(),Ye())}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}}();