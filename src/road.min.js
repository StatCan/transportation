!function(){"use strict";var p=function(t){return"object"==typeof t?null!==t:"function"==typeof t},e={}.toString,h=function(t){return e.call(t).slice(8,-1)};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var c,n,r,g=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),v=(g.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=t(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),i=0,a=Math.random(),u=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+a).toString(36))},s=t(function(t){var e=o("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:u)("Symbol."+t))}).store=e}),y=s("match"),j=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},T=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},w=s("species"),l=Math.ceil,f=Math.floor,d=function(t){return isNaN(t=+t)?0:(0<t?f:l)(t)},x=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=(c=!0,function(t,e){var n,r,o=String(x(t)),i=d(e),a=o.length;return i<0||a<=i?c?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?c?o.charAt(i):n:c?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}),b=Math.min,_=function(t){return 0<t?b(d(t),9007199254740991):0},m=s("toStringTag"),S="Arguments"==h(function(){return arguments}()),O=RegExp.prototype.exec,M=function(t,e){var n,r,o,i,a=t.exec;if("function"==typeof a){var c=a.call(t,e);if("object"!=typeof c)throw new TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(o=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),m))?o:S?h(r):"Object"==(i=h(r))&&"function"==typeof r.callee?"Arguments":i))throw new TypeError("RegExp#exec called on incompatible receiver");return O.call(t,e)},A=RegExp.prototype.exec,P=String.prototype.replace,L=A,k="lastIndex",C=(n=/a/,r=/b*/g,A.call(n,"a"),A.call(r,"a"),0!==n[k]||0!==r[k]),I=void 0!==/()??/.exec("")[1];(C||I)&&(L=function(t){var e,n,r,o,i=this;return I&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var t=j(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i))),C&&(e=i[k]),r=A.call(i,t),C&&r&&(i[k]=i.global?r.index+r[0].length:e),I&&r&&1<r.length&&P.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var R=L,F=function(t){try{return!!t()}catch(t){return!0}},D=!F(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),H=v.document,N=p(H)&&p(H.createElement),V=function(t){return N?H.createElement(t):{}},G=!D&&!F(function(){return 7!=Object.defineProperty(V("div"),"a",{get:function(){return 7}}).a}),z=Object.defineProperty,B={f:D?Object.defineProperty:function(t,e,n){if(j(t),e=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),j(n),G)try{return z(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},U=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},q=D?function(t,e,n){return B.f(t,e,U(1,n))}:function(t,e,n){return t[e]=n,t},K={}.hasOwnProperty,W=function(t,e){return K.call(t,e)},Q=t(function(t){var i=u("src"),e="toString",n=Function[e],a=(""+n).split(e);g.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(W(n,"name")||q(n,"name",e)),t[e]!==n&&(o&&(W(n,i)||q(n,i,t[e]?""+t[e]:a.join(String(e)))),t===v?t[e]=n:r?t[e]?t[e]=n:q(t,e,n):(delete t[e],q(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||n.call(this)})}),J=function(r,o,t){if(T(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},X="prototype",Y=function(t,e,n){var r,o,i,a,c=t&Y.F,u=t&Y.G,l=t&Y.S,s=t&Y.P,f=t&Y.B,d=u?v:l?v[e]||(v[e]={}):(v[e]||{})[X],p=u?g:g[e]||(g[e]={}),h=p[X]||(p[X]={});for(r in u&&(n=e),n)i=((o=!c&&d&&void 0!==d[r])?d:n)[r],a=f&&o?J(i,v):s&&"function"==typeof i?J(Function.call,i):i,d&&Q(d,r,i,t&Y.U),p[r]!=i&&q(p,r,a),s&&h[r]!=i&&(h[r]=i)};v.core=g,Y.F=1,Y.G=2,Y.S=4,Y.P=8,Y.B=16,Y.W=32,Y.U=64,Y.R=128;var Z=Y;Z({target:"RegExp",proto:!0,forced:R!==/./.exec},{exec:R});var tt=s("species"),et=!F(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),nt=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),rt=Math.min,ot=[].push,it="split",at="length",ct="lastIndex",ut=4294967295,lt=!F(function(){});!function(n,t,e){var r=s(n),i=!F(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),o=i?!F(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[tt]=function(){return e}),e[r](""),!t}):void 0;if(!i||!o||"replace"===n&&!et||"split"===n&&!nt){var a=/./[r],c=e(x,r,""[n],function(t,e,n,r,o){return e.exec===R?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),u=c[0],l=c[1];Q(String.prototype,n,u),q(RegExp.prototype,r,2==t?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}}("split",2,function(o,i,S,O){var A;return A="c"=="abbc"[it](/(b)*/)[1]||4!="test"[it](/(?:)/,-1)[at]||2!="ab"[it](/(?:ab)*/)[at]||4!="."[it](/(.?)(.?)/)[at]||1<"."[it](/()()/)[at]||""[it](/.?/)[at]?function(t,e){var n,r,o=String(this);if(void 0===t&&0===e)return[];if(!p(n=t)||(void 0!==(r=n[y])?!r:"RegExp"!=h(n)))return S.call(o,t,e);for(var i,a,c,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=void 0===e?ut:e>>>0,d=new RegExp(t.source,l+"g");(i=R.call(d,o))&&!(s<(a=d[ct])&&(u.push(o.slice(s,i.index)),1<i[at]&&i.index<o[at]&&ot.apply(u,i.slice(1)),c=i[0][at],s=a,u[at]>=f));)d[ct]===i.index&&d[ct]++;return s===o[at]?!c&&d.test("")||u.push(""):u.push(o.slice(s)),u[at]>f?u.slice(0,f):u}:"0"[it](void 0,0)[at]?function(t,e){return void 0===t&&0===e?[]:S.call(this,t,e)}:S,[function(t,e){var n=o(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):A.call(String(n),t,e)},function(t,e){var n=O(A,t,this,e,A!==S);if(n.done)return n.value;var r,o,i,a=j(t),c=String(this),u=(r=RegExp,void 0===(i=j(a).constructor)||null==(o=j(i)[w])?r:T(o)),l=a.unicode,s=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(lt?"y":"g"),f=new u(lt?a:"^(?:"+a.source+")",s),d=void 0===e?ut:e>>>0;if(0===d)return[];if(0===c.length)return null===M(f,c)?[c]:[];for(var p,h,g=0,v=0,y=[];v<c.length;){f.lastIndex=lt?v:0;var x,b=M(f,lt?c:c.slice(v));if(null===b||(x=rt(_(f.lastIndex+(lt?0:v)),c.length))===g)p=c,v=(h=v)+(l?E(p,h).length:1);else{if(y.push(c.slice(g,v)),y.length===d)return y;for(var m=1;m<=b.length-1;m++)if(y.push(b[m]),y.length===d)return y;v=g=x}}return y.push(c.slice(g)),y}]});var st=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==h(t)?t.split(""):Object(t)},ft=function(t){return st(x(t))},dt=Math.max,pt=Math.min,ht=function(l){return function(t,e,n){var r,o,i,a=ft(t),c=_(a.length),u=(o=c,(r=d(r=n))<0?dt(r+o,0):pt(r,o));if(l&&e!=e){for(;u<c;)if((i=a[u++])!=i)return!0}else for(;u<c;u++)if((l||u in a)&&a[u]===e)return l||u||0;return!l&&-1}},gt=function(t,e){return!!t&&F(function(){e?t.call(null,function(){},1):t.call(null)})},vt=ht(!1),yt=[].indexOf,xt=!!yt&&1/[1].indexOf(1,-0)<0;Z(Z.P+Z.F*(xt||!gt(yt)),"Array",{indexOf:function(t){return xt?yt.apply(this,arguments)||0:vt(this,t,arguments[1])}});var bt=s("unscopables"),mt=Array.prototype;null==mt[bt]&&q(mt,bt,{});var St=function(t){mt[bt][t]=!0},Ot=function(t,e){return{value:e,done:!!t}},At={},jt=o("keys"),Tt=function(t){return jt[t]||(jt[t]=u(t))},wt=ht(!1),Et=Tt("IE_PROTO"),_t="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Mt=Object.keys||function(t){return function(t,e){var n,r=ft(t),o=0,i=[];for(n in r)n!=Et&&W(r,n)&&i.push(n);for(;e.length>o;)W(r,n=e[o++])&&(~wt(i,n)||i.push(n));return i}(t,_t)},Pt=D?Object.defineProperties:function(t,e){j(t);for(var n,r=Mt(e),o=r.length,i=0;i<o;)B.f(t,n=r[i++],e[n]);return t},Lt=v.document,kt=Lt&&Lt.documentElement,Ct=Tt("IE_PROTO"),It=function(){},Rt="prototype",Ft=function(){var t,e=V("iframe"),n=_t.length;for(e.style.display="none",kt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ft=t.F;n--;)delete Ft[Rt][_t[n]];return Ft()},Dt=Object.create||function(t,e){var n;return null!==t?(It[Rt]=j(t),n=new It,It[Rt]=null,n[Ct]=t):n=Ft(),void 0===e?n:Pt(n,e)},Ht=B.f,Nt=s("toStringTag"),Vt=function(t,e,n){t&&!W(t=n?t:t.prototype,Nt)&&Ht(t,Nt,{configurable:!0,value:e})},Gt={};q(Gt,s("iterator"),function(){return this});var zt=function(t){return Object(x(t))},Bt=Tt("IE_PROTO"),Ut=Object.prototype,$t=Object.getPrototypeOf||function(t){return t=zt(t),W(t,Bt)?t[Bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ut:null},qt=s("iterator"),Kt=!([].keys&&"next"in[].keys()),Wt="values",Qt=function(){return this},Jt=function(t,e,n,r,o,i,a){var c,u,l;u=e,l=r,(c=n).prototype=Dt(Gt,{next:U(1,l)}),Vt(c,u+" Iterator");var s,f,d,p=function(t){if(!Kt&&t in y)return y[t];switch(t){case"keys":case Wt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",g=o==Wt,v=!1,y=t.prototype,x=y[qt]||y["@@iterator"]||o&&y[o],b=x||p(o),m=o?g?p("entries"):b:void 0,S="Array"==e&&y.entries||x;if(S&&(d=$t(S.call(new t)))!==Object.prototype&&d.next&&(Vt(d,h,!0),"function"!=typeof d[qt]&&q(d,qt,Qt)),g&&x&&x.name!==Wt&&(v=!0,b=function(){return x.call(this)}),(Kt||v||!y[qt])&&q(y,qt,b),At[e]=b,At[h]=Qt,o)if(s={values:g?b:p(Wt),keys:i?b:p("keys"),entries:m},a)for(f in s)f in y||Q(y,f,s[f]);else Z(Z.P+Z.F*(Kt||v),e,s);return s}(Array,"Array",function(t,e){this._t=ft(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ot(1)):Ot(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");At.Arguments=At.Array,St("keys"),St("values"),St("entries");for(var Xt=s("iterator"),Yt=s("toStringTag"),Zt=At.Array,te={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ee=Mt(te),ne=0;ne<ee.length;ne++){var re,oe=ee[ne],ie=te[oe],ae=v[oe],ce=ae&&ae.prototype;if(ce&&(ce[Xt]||q(ce,Xt,Zt),ce[Yt]||q(ce,Yt,oe),At[oe]=Zt,ie))for(re in Jt)ce[re]||Q(ce,re,Jt[re],!0)}var ue,le,se,fe;ue="keys",le=function(){return function(t){return Mt(zt(t))}},se=(g.Object||{})[ue]||Object[ue],(fe={})[ue]=le(se),Z(Z.S+Z.F*F(function(){se(1)}),"Object",fe);var de={alt:i18next.t("alt",{ns:"roadArea"}),margin:{top:50,left:80,bottom:50},filterData:function(t){return t},x:{getValue:function(t){return new Date(t.date+"-01")},getText:function(t){return t.date},ticks:7},y:{label:i18next.t("y_label",{ns:"roadArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:1*t[e]/1e3},getTotal:function(t,e,n){var r,o,i=this;if(!t[i.y.totalProperty]){o=i.z.getKeys.call(i,n);for(var a=r=0;a<o.length;a++)r+=i.y.getValue.call(i,t,o[a],n);t[i.y.totalProperty]=r}return t[i.y.totalProperty]},getText:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?t[e]:1*t[e]/1e3},ticks:5},z:{label:i18next.t("z_label",{ns:"roadArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"roadArea"})}},datatable:!0,tableTitle:i18next.t("tableTitle",{ns:"roadArea"}),transition:!1,width:1050};var pe=[].sort,he=[1,2,3];Z(Z.P+Z.F*(F(function(){he.sort(void 0)})||!F(function(){he.sort(null)})||!gt(pe)),"Array",{sort:function(t){return void 0===t?pe.call(zt(this)):pe.call(zt(this),T(t))}});var ge,ve={f:{}.propertyIsEnumerable}.f,ye=(ge=!1,function(t){for(var e,n=ft(t),r=Mt(n),o=r.length,i=0,a=[];i<o;)ve.call(n,e=r[i++])&&a.push(ge?[e,n[e]]:n[e]);return a});Z(Z.S,"Object",{values:function(t){return ye(t)}});var xe={},be={},me="CANADA",Se="2017",Oe="2.5em",Ae="Total (millions of dollars)",je=d3.select(".data").append("svg").attr("id","svgFuel"),Te=d3.select(".dashboard .map").append("svg"),we=510-20-0,Ee=150-20-10,_e=d3.select("#mapColourScale").select("svg").attr("width",we).attr("height",Ee).style("vertical-align","middle");function Me(){var t=[];t.push(be[Se]);var e=["#bdd7e7","#6baed6","#3182bd","#08519c"],n=function(t,e){var n,r=t[0],o=[];(o=Object.values(r)).sort(function(t,e){return t-e}),n=d3.extent(o);var i=d3.scaleQuantize().domain([n[0],n[1]]).range(e);for(var a in r)r.hasOwnProperty(a)&&d3.select(".dashboard .map").select("."+a).style("fill",i(r[a]));return n}(t,e);!function(t,n,e){var o=d3.format(",d"),r=t.selectAll("rect").data(n).enter().append("g");r.append("rect").attr("width",20).attr("height",20).attr("y",5).attr("x",function(t,e){return 215+85*e}).attr("fill",function(t,e){return n[e]});var i=(e[1]-e[0])/n.length,a=[];a[0]=e[0];for(var c=1;c<n.length;c++)a.push(Math.round((c-1+.5)*i+e[0]));r.append("text"),d3.select("#mapColourScale").selectAll("text").text(function(t,e){var n=o(a[e]/1e3),r=a[e+1]?o(a[e+1]/1e3):n+"+";return a[e+1]?"< "+r:r}).attr("y",18).attr("x",function(t,e){return[167,253,331,419][e]}).style("display",function(){return"inline"}),d3.select("#cbID").empty()&&t.append("g").append("text").attr("id","cbID").attr("y",18).attr("x",0)}(_e,e,n),d3.select("#cbID").text(Ae)}function Pe(){areaChart(je,de,xe[me]),d3.select("#svgFuel").select(".x.axis").select("text").attr("dy",Oe).attr("display","none"),d3.select(".dashboard .map").select("."+me).classed("roadMapHighlight",!0)}function Le(){var t=i18next.t(me,{ns:"roadGeography"});d3.select("#mapTitleRoad").text("Total fuel sales, "+t+", "+Se),d3.select("#areaTitleRoad").text("Type of fuel sales, "+t)}Te.on("mouseover",function(){if(d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0)}}).on("mouseout",function(){me?d3.select(".map").selectAll("path:not(."+me+")").classed("roadMapHighlight",!1):d3.select(".map").selectAll("path").classed("roadMapHighlight",!1)}),Te.on("click",function(){if(d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");me=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0),xe[me]?Pe():d3.json("data/road/"+me+".json",function(t,e){xe[me]=e,Pe()}),d3.select("#groups")._groups[0][0].value=me}else me="CANADA",Pe(),d3.select("#groups")._groups[0][0].value=me;Le()}),i18n.load(["src/i18n"],function(){de.x.label=i18next.t("x_label",{ns:"roadArea"}),de.y.label=i18next.t("y_label",{ns:"roadArea"}),de.tableTitle=i18next.t("tableTitle",{ns:"roadArea"}),d3.queue().defer(d3.json,"data/road/Annual_Totals.json").defer(d3.json,"data/road/CANADA.json").await(function(t,e,n){be=e,xe[me]=n,getCanadaMap(Te).on("loaded",function(){d3.stcExt.addIEShim(Te,377,457),Me()}),areaChart(je,de,xe[me]),d3.select("#svgFuel").select(".x.axis").select("text").attr("dy",Oe).attr("display","none"),Le()})}),$(document).on("change",function(t){"groups"===t.target.id&&(me=document.getElementById("groups").value,d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),Le(),xe[me]?Pe():d3.json("data/road/"+me+".json",function(t,e){xe[me]=e,Pe()})),"year"===t.target.id&&(Se=document.getElementById("year").value,Le(),Me())})}();