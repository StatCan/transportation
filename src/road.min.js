!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var y=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),f=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),T=function(t){if(!f(t))throw TypeError(t+" is not an object!");return t},u=function(t){try{return!!t()}catch(t){return!0}},e=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),n=y.document,r=f(n)&&f(n.createElement),i=function(t){return r?n.createElement(t):{}},o=!e&&!u(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}),a=Object.defineProperty,s={f:e?Object.defineProperty:function(t,e,n){if(T(t),e=function(t,e){if(!f(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!f(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),T(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=e?function(t,e,n){return s.f(t,e,A(1,n))}:function(t,e,n){return t[e]=n,t},l={}.hasOwnProperty,c=function(t,e){return l.call(t,e)},d=0,p=Math.random(),h=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++d+p).toString(36))},O=t(function(t){var o=h("src"),e="toString",n=Function[e],a=(""+n).split(e);v.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(c(n,"name")||S(n,"name",e)),t[e]!==n&&(i&&(c(n,o)||S(n,o,t[e]?""+t[e]:a.join(String(e)))),t===y?t[e]=n:r?t[e]?t[e]=n:S(t,e,n):(delete t[e],S(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),w=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},g=function(r,i,t){if(w(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},m="prototype",b=function(t,e,n){var r,i,o,a,s=t&b.F,l=t&b.G,c=t&b.S,u=t&b.P,d=t&b.B,p=l?y:c?y[e]||(y[e]={}):(y[e]||{})[m],f=l?v:v[e]||(v[e]={}),h=f[m]||(f[m]={});for(r in l&&(n=e),n)o=((i=!s&&p&&void 0!==p[r])?p:n)[r],a=d&&i?g(o,y):u&&"function"==typeof o?g(Function.call,o):o,p&&O(p,r,o,t&b.U),f[r]!=o&&S(f,r,a),u&&h[r]!=o&&(h[r]=o)};y.core=v,b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128;var E=b,x=Date.prototype.getTime,C=Date.prototype.toISOString,j=function(t){return 9<t?t:"0"+t},F=u(function(){return"0385-07-25T07:06:39.999Z"!=C.call(new Date(-5e13-1))})||!u(function(){C.call(new Date(NaN))})?function(){if(!isFinite(x.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+j(t.getUTCMonth()+1)+"-"+j(t.getUTCDate())+"T"+j(t.getUTCHours())+":"+j(t.getUTCMinutes())+":"+j(t.getUTCSeconds())+"."+(99<n?n:"0"+j(n))+"Z"}:C;E(E.P+E.F*(Date.prototype.toISOString!==F),"Date",{toISOString:F});var k={}.toString,M=function(t){return k.call(t).slice(8,-1)},L=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==M(t)?t.split(""):Object(t)},P=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},I=function(t){return L(P(t))},_=Math.ceil,N=Math.floor,B=function(t){return isNaN(t=+t)?0:(0<t?N:_)(t)},D=Math.min,R=function(t){return 0<t?D(B(t),9007199254740991):0},H=Math.max,G=Math.min,V=function(c){return function(t,e,n){var r,i,o,a=I(t),s=R(a.length),l=(i=s,(r=B(r=n))<0?H(r+i,0):G(r,i));if(c&&e!=e){for(;l<s;)if((o=a[l++])!=o)return!0}else for(;l<s;l++)if((c||l in a)&&a[l]===e)return c||l||0;return!c&&-1}},U=function(t,e){return!!t&&u(function(){e?t.call(null,function(){},1):t.call(null)})},z=V(!1),W=[].indexOf,Y=!!W&&1/[1].indexOf(1,-0)<0;E(E.P+E.F*(Y||!U(W)),"Array",{indexOf:function(t){return Y?W.apply(this,arguments)||0:z(this,t,arguments[1])}});var q,K,X,Z=t(function(t){var e="__core-js_shared__",n=y[e]||(y[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),Q=t(function(t){var e=Z("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:h)("Symbol."+t))}).store=e}),J=Q("match"),tt=Q("species"),et=(q=!0,function(t,e){var n,r,i=String(P(t)),o=B(e),a=i.length;return o<0||a<=o?q?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?q?i.charAt(o):n:q?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}),nt=Q("toStringTag"),rt="Arguments"==M(function(){return arguments}()),it=RegExp.prototype.exec,ot=function(t,e){var n,r,i,o,a=t.exec;if("function"==typeof a){var s=a.call(t,e);if("object"!=typeof s)throw new TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),nt))?i:rt?M(r):"Object"==(o=M(r))&&"function"==typeof r.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return it.call(t,e)},at=RegExp.prototype.exec,st=String.prototype.replace,lt=at,ct="lastIndex",ut=(K=/a/,X=/b*/g,at.call(K,"a"),at.call(X,"a"),0!==K[ct]||0!==X[ct]),dt=void 0!==/()??/.exec("")[1];(ut||dt)&&(lt=function(t){var e,n,r,i,o=this;return dt&&(n=new RegExp("^"+o.source+"$(?!\\s)",function(){var t=T(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(o))),ut&&(e=o[ct]),r=at.call(o,t),ut&&r&&(o[ct]=o.global?r.index+r[0].length:e),dt&&r&&1<r.length&&st.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var pt=lt;E({target:"RegExp",proto:!0,forced:pt!==/./.exec},{exec:pt});var ft=Q("species"),ht=!u(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),yt=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),vt=Math.min,gt=[].push,mt="split",bt="length",xt="lastIndex",Ct=4294967295,At=!u(function(){});!function(n,t,e){var r=Q(n),o=!u(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),i=o?!u(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[ft]=function(){return e}),e[r](""),!t}):void 0;if(!o||!i||"replace"===n&&!ht||"split"===n&&!yt){var a=/./[r],s=e(P,r,""[n],function(t,e,n,r,i){return e.exec===pt?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),l=s[0],c=s[1];O(String.prototype,n,l),S(RegExp.prototype,r,2==t?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}}("split",2,function(i,o,C,A){var S;return S="c"=="abbc"[mt](/(b)*/)[1]||4!="test"[mt](/(?:)/,-1)[bt]||2!="ab"[mt](/(?:ab)*/)[bt]||4!="."[mt](/(.?)(.?)/)[bt]||1<"."[mt](/()()/)[bt]||""[mt](/.?/)[bt]?function(t,e){var n,r,i=String(this);if(void 0===t&&0===e)return[];if(!f(n=t)||(void 0!==(r=n[J])?!r:"RegExp"!=M(n)))return C.call(i,t,e);for(var o,a,s,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,d=void 0===e?Ct:e>>>0,p=new RegExp(t.source,c+"g");(o=pt.call(p,i))&&!(u<(a=p[xt])&&(l.push(i.slice(u,o.index)),1<o[bt]&&o.index<i[bt]&&gt.apply(l,o.slice(1)),s=o[0][bt],u=a,l[bt]>=d));)p[xt]===o.index&&p[xt]++;return u===i[bt]?!s&&p.test("")||l.push(""):l.push(i.slice(u)),l[bt]>d?l.slice(0,d):l}:"0"[mt](void 0,0)[bt]?function(t,e){return void 0===t&&0===e?[]:C.call(this,t,e)}:C,[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):S.call(String(n),t,e)},function(t,e){var n=A(S,t,this,e,S!==C);if(n.done)return n.value;var r,i,o,a=T(t),s=String(this),l=(r=RegExp,void 0===(o=T(a).constructor)||null==(i=T(o)[tt])?r:w(i)),c=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(At?"y":"g"),d=new l(At?a:"^(?:"+a.source+")",u),p=void 0===e?Ct:e>>>0;if(0===p)return[];if(0===s.length)return null===ot(d,s)?[s]:[];for(var f,h,y=0,v=0,g=[];v<s.length;){d.lastIndex=At?v:0;var m,b=ot(d,At?s:s.slice(v));if(null===b||(m=vt(R(d.lastIndex+(At?0:v)),s.length))===y)f=s,v=(h=v)+(c?et(f,h).length:1);else{if(g.push(s.slice(y,v)),g.length===p)return g;for(var x=1;x<=b.length-1;x++)if(g.push(b[x]),g.length===p)return g;v=y=m}}return g.push(s.slice(y)),g}]});var St=Q("unscopables"),Tt=Array.prototype;null==Tt[St]&&S(Tt,St,{});var Ot=function(t){Tt[St][t]=!0},wt=function(t,e){return{value:e,done:!!t}},Et={},jt=Z("keys"),Ft=function(t){return jt[t]||(jt[t]=h(t))},kt=V(!1),Mt=Ft("IE_PROTO"),Lt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Pt=Object.keys||function(t){return function(t,e){var n,r=I(t),i=0,o=[];for(n in r)n!=Mt&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~kt(o,n)||o.push(n));return o}(t,Lt)},It=e?Object.defineProperties:function(t,e){T(t);for(var n,r=Pt(e),i=r.length,o=0;o<i;)s.f(t,n=r[o++],e[n]);return t},_t=y.document,Nt=_t&&_t.documentElement,Bt=Ft("IE_PROTO"),Dt=function(){},Rt="prototype",Ht=function(){var t,e=i("iframe"),n=Lt.length;for(e.style.display="none",Nt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ht=t.F;n--;)delete Ht[Rt][Lt[n]];return Ht()},Gt=Object.create||function(t,e){var n;return null!==t?(Dt[Rt]=T(t),n=new Dt,Dt[Rt]=null,n[Bt]=t):n=Ht(),void 0===e?n:It(n,e)},Vt=s.f,Ut=Q("toStringTag"),zt=function(t,e,n){t&&!c(t=n?t:t.prototype,Ut)&&Vt(t,Ut,{configurable:!0,value:e})},$t={};S($t,Q("iterator"),function(){return this});var Wt=function(t){return Object(P(t))},Yt=Ft("IE_PROTO"),qt=Object.prototype,Kt=Object.getPrototypeOf||function(t){return t=Wt(t),c(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qt:null},Xt=Q("iterator"),Zt=!([].keys&&"next"in[].keys()),Qt="values",Jt=function(){return this},te=function(t,e,n,r,i,o,a){var s,l,c;l=e,c=r,(s=n).prototype=Gt($t,{next:A(1,c)}),zt(s,l+" Iterator");var u,d,p,f=function(t){if(!Zt&&t in g)return g[t];switch(t){case"keys":case Qt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",y=i==Qt,v=!1,g=t.prototype,m=g[Xt]||g["@@iterator"]||i&&g[i],b=m||f(i),x=i?y?f("entries"):b:void 0,C="Array"==e&&g.entries||m;if(C&&(p=Kt(C.call(new t)))!==Object.prototype&&p.next&&(zt(p,h,!0),"function"!=typeof p[Xt]&&S(p,Xt,Jt)),y&&m&&m.name!==Qt&&(v=!0,b=function(){return m.call(this)}),(Zt||v||!g[Xt])&&S(g,Xt,b),Et[e]=b,Et[h]=Jt,i)if(u={values:y?b:f(Qt),keys:o?b:f("keys"),entries:x},a)for(d in u)d in g||O(g,d,u[d]);else E(E.P+E.F*(Zt||v),e,u);return u}(Array,"Array",function(t,e){this._t=I(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,wt(1)):wt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Et.Arguments=Et.Array,Ot("keys"),Ot("values"),Ot("entries");for(var ee=Q("iterator"),ne=Q("toStringTag"),re=Et.Array,ie={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},oe=Pt(ie),ae=0;ae<oe.length;ae++){var se,le=oe[ae],ce=ie[le],ue=y[le],de=ue&&ue.prototype;if(de&&(de[ee]||S(de,ee,re),de[ne]||S(de,ne,le),Et[le]=re,ce))for(se in te)de[se]||O(de,se,te[se],!0)}var pe,fe,he,ye;pe="keys",fe=function(){return function(t){return Pt(Wt(t))}},he=(v.Object||{})[pe]||Object[pe],(ye={})[pe]=fe(he),E(E.S+E.F*u(function(){he(1)}),"Object",ye);var ve={alt:i18next.t("alt",{ns:"roadArea"}),margin:{top:50,left:90,right:30,bottom:50},filterData:function(t){return t},x:{getValue:function(t,e){return 0===e?new Date(t.date+"-01"):new Date(t.date,0,1,0,0,0,1)},getText:function(t){return t.date},ticks:7},y:{label:i18next.t("y_label",{ns:"roadArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:1*t[e]/1e3},getTotal:function(t,e,n){var r,i,o=this;if(!t[o.y.totalProperty]){i=o.z.getKeys.call(o,n);for(var a=r=0;a<i.length;a++)r+=o.y.getValue.call(o,t,i[a],n);t[o.y.totalProperty]=r}return t[o.y.totalProperty]},getText:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?t[e]:1*t[e]/1e3},ticks:5},z:{label:i18next.t("z_label",{ns:"roadArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"roadArea"})}},datatable:!0,tableTitle:"",dataTableTotal:!0,transition:!1,width:1050};var ge=[].sort,me=[1,2,3];E(E.P+E.F*(u(function(){me.sort(void 0)})||!u(function(){me.sort(null)})||!U(ge)),"Array",{sort:function(t){return void 0===t?ge.call(Wt(this)):ge.call(Wt(this),w(t))}});var be,xe={f:{}.propertyIsEnumerable}.f,Ce=(be=!1,function(t){for(var e,n=I(t),r=Pt(n),i=r.length,o=0,a=[];o<i;)xe.call(n,e=r[o++])&&a.push(be?[e,n[e]]:n[e]);return a});E(E.S,"Object",{values:function(t){return Ce(t)}});var Ae,Se,Te,Oe,we,Ee,je,Fe,ke,Me=Array.isArray||function(t){return"Array"==M(t)},Le=Q("species"),Pe=(Te=(Ae=1)==Ae,Oe=2==Ae,we=3==Ae,Ee=4==Ae,je=6==Ae,Fe=5==Ae||je,ke=Se||function(t,e){return Me(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Me(r.prototype)||(r=void 0),f(r)&&null===(r=r[Le])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},function(t,e,n){for(var r,i,o=Wt(t),a=L(o),s=g(e,n,3),l=R(a.length),c=0,u=Te?ke(t,l):Oe?ke(t,0):void 0;c<l;c++)if((Fe||c in a)&&(i=s(r=a[c],c,o),Ae))if(Te)u[c]=i;else if(i)switch(Ae){case 3:return!0;case 5:return r;case 6:return c;case 2:u.push(r)}else if(Ee)return!1;return je?-1:we||Ee?Ee:u});E(E.P+E.F*!U([].map,!0),"Array",{map:function(t){return Pe(this,t,arguments[1])}});var Ie=[].slice,_e={},Ne=Function.bind||function(e){var n=w(this),r=Ie.call(arguments,1),i=function(){var t=r.concat(Ie.call(arguments));return this instanceof i?function(t,e,n){if(!(e in _e)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";_e[e]=Function("F,a","return new F("+r.join(",")+")")}return _e[e](t,n)}(n,t.length,t):function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}(n,t,e)};return f(n.prototype)&&(i.prototype=n.prototype),i};function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}E(E.P,"Function",{bind:Ne});var De=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}var t,e,r;return t=n,(e=[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}])&&Be(t.prototype,e),r&&Be(t,r),n}();De.n=0;var Re,He={},Ge={},Ve="CANADA",Ue="2017",ze=d3.format(",d"),$e=1e3,We=new De,Ye=d3.select(".data").append("svg").attr("id","svgFuel"),qe=d3.select(".dashboard .map").append("svg"),Ke=510-20-0,Xe=150-20-10,Ze=d3.select("#mapColourScale").select("svg").attr("class","mapCB").attr("width",Ke).attr("height",Xe).style("vertical-align","middle"),Qe=d3.select("#areaLegend").select("svg").attr("class","roadAreaCB").attr("width",650).attr("height",Xe).style("vertical-align","middle");d3.stcExt.addIEShim(qe,387.1,457.5),d3.stcExt.addIEShim(Ze,Xe,Ke),d3.stcExt.addIEShim(Qe,Xe,650);var Je=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),tn=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),en=Ye.append("line").attr("class","hoverLine").style("display","none");function nn(){d3.select("#svgFuel .data").on("mousemove",function(){var t=function(t){var e,n=d3.bisector(function(t){return t.date}).left,r=Re.x.invert(t),i=He[Ve],o=n(i,r.toISOString().substring(0,4)),a=i[o-1],s=i[o];e=a&&s?r-a.date>s.date-r?s:a:a||s;return e}(d3.mouse(this)[0]),e=ze(t.gas/$e),n=ze(t.diesel/$e),r=ze(t.lpg/$e);tn.transition().style("opacity",.9),tn.html("<b>Fuel sales ("+i18next.t("units",{ns:"road"})+") in "+t.date+":</b><br><br><table><tr><td><b>"+i18next.t("gas",{ns:"roadArea"})+"</b>: $"+e+"</td></tr><tr><td><b>"+i18next.t("diesel",{ns:"roadArea"})+"</b>: $"+n+"</td></tr><tr><td><b>"+i18next.t("lpg",{ns:"roadArea"})+"</b>: $"+r+"</td></tr></table>").style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px").style("pointer-events","none")}).on("mouseout",function(t,e){tn.transition().style("opacity",0)})}function rn(){var t=[];t.push(Ge[Ue]);var e=["#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC"],n=function(t,e){var n,r=t[0],i=[];(i=Object.values(r)).sort(function(t,e){return t-e}),n=d3.extent(i);var o=d3.scaleQuantize().domain([n[0],n[1]]).range(e);for(var a in r)r.hasOwnProperty(a)&&d3.select(".dashboard .map").select("."+a).style("fill",o(r[a]));return n}(t,e),r=i18next.t("mapScaleLabel",{ns:"road"})+" ("+i18next.t("units",{ns:"road"})+")";!function(t,n,e){var r=d3.format(",d"),i=t.attr("class","mapCB").selectAll("rect").data(n).enter().append("g");i.append("rect").attr("width",35).attr("height",35).attr("y",5).attr("x",function(t,e){return 175+35*e}).attr("fill",function(t,e){return n[e]});var o=(e[1]-e[0])/n.length,a=[];a[0]=e[0];for(var s=1;s<n.length;s++)a.push(Math.round(s*o+e[0]));i.append("text"),d3.select("#mapColourScale .mapCB").selectAll("text").text(function(t,e){var n=r(a[e]/1e3);return n+"+"}).attr("text-anchor","end").attr("transform",function(t,e){return"translate("+(180+35*e)+", 50) rotate(-45)"}).style("display",function(){return"inline"})}(Ze,e,n);var i=d3.select("#mapColourScale").append("div").attr("class","roadmapCBlabel");""===d3.select(".roadmapCBlabel").text()&&i.append("text").text(r)}function on(){var n,r,t;Re=areaChart(Ye,ve,He[Ve]),d3.select("#svgFuel").select(".x.axis").select("text").attr("display","none"),nn(),d3.select("#svgFuel .data").append("rect").style("fill","none").style("pointer-events","all").attr("class","overlay").on("mouseout",function(){en.style("display","none")}).on("mousemove",function(){en.style("display","inline"),en.style("transform","translate("+d3.mouse(this)[0]+"px)"),en.moveToFront()}).attr("width",Re.settings.innerWidth).attr("height",Re.settings.innerHeight),en.attr("x1",Re.settings.margin.left).attr("x2",Re.settings.margin.left).attr("y1",Re.settings.margin.top).attr("y2",Re.settings.innerHeight+Re.settings.margin.top),r=n=["gas","diesel","lpg"],(t=Qe.selectAll("rect").data(r).enter().append("g")).append("rect").attr("width",35).attr("height",35).attr("y",25).attr("x",function(t,e){return 55+35*e*4}).attr("class",function(t,e){return r[e]}),t.append("text"),d3.select("#areaLegend").selectAll("text").attr("y",48).attr("x",function(t,e){return[95,237,375][e]}).style("display",function(){return"inline"}),d3.select("#areaLegend").selectAll("text").text(function(t,e){return i18next.t(n[e],{ns:"roadArea"})}),d3.select(".dashboard .map").select("."+Ve).classed("roadMapHighlight",!0),We.appendTo(document.getElementById("copy-button-container")),function(t){var e=[],n=i18next.t(Ve,{ns:"roadGeography"}),r=["Sales of fuel in ".concat(n," used for road motor vehicles, annual (millions of dollars)")],i=[""];for(var o in t[0])"date"!=o&&i.push(i18next.t(o,{ns:"roadArea"}));for(var a in e.push(r,[],i),t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=[];for(var l in t[a])if(Object.prototype.hasOwnProperty.call(t[a],l)){var c=t[a][l];"date"==l||"total"==l||isNaN(c)||(c/=1e3),s.push(c)}e.push(s)}We.data=e}(He[Ve])}function an(){var t=i18next.t(Ve,{ns:"roadGeography"});d3.select("#mapTitleRoad").text(i18next.t("mapTitle",{ns:"road"})+", "+t+", "+Ue),d3.select("#areaTitleRoad").text(i18next.t("chartTitle",{ns:"road"})+", "+t),ve.tableTitle=i18next.t("tableTitle",{ns:"roadArea",geo:t})}qe.on("mousemove",function(){if(d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if("svg-shimmed"!==t[0]){var e=d3.select(".dashboard .map").select("."+t[0]);e.classed("roadMapHighlight",!0),e.moveToFront();var n=i18next.t(t[0],{ns:"roadGeography"}),r=ze(Ge[Ue][t[0]]/$e);Je.style("opacity",.9),Je.html("<b>"+n+" ("+i18next.t("units",{ns:"road"})+")</b><br><br><table><tr><td><b>$"+r+"</td></tr></table>"),Je.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}else Je.style("opacity",0)}}),qe.on("mouseout",function(){Je.transition().style("opacity",0),Ve?d3.select(".map").selectAll("path:not(."+Ve+")").classed("roadMapHighlight",!1):d3.select(".map").selectAll("path").classed("roadMapHighlight",!1)}),qe.on("click",function(){if(d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),d3.select(d3.event.target).attr("class")&&-1===d3.select(d3.event.target).attr("class").indexOf("svg-shimmed")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");Ve=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0),an(),sn(Ve,function(){on()}),d3.select("#groups")._groups[0][0].value=Ve}else Ve="CANADA",an(),on(),d3.select("#groups")._groups[0][0].value=Ve});var sn=function(n,r){He[n]?r():d3.json("data/road/"+n+".json",function(t,e){He[n]=e,r()})};i18n.load(["src/i18n"],function(){ve.x.label=i18next.t("x_label",{ns:"roadArea"}),ve.y.label=i18next.t("y_label",{ns:"roadArea"}),ve.tableTitle=i18next.t("tableTitle",{ns:"roadArea",geo:i18next.t(Ve,{ns:"roadGeography"})}),d3.queue().defer(d3.json,"data/road/Annual_Totals.json").defer(d3.json,"data/road/CANADA.json").await(function(t,e,n){Ge=e,He[Ve]=n,getCanadaMap(qe).on("loaded",function(){rn()});var r={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};We.build(r),on(),an()})}),$(document).on("change",function(t){"groups"===t.target.id&&(Ve=document.getElementById("groups").value,d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),an(),sn(Ve,function(){on()})),"year"===t.target.id&&(Ue=document.getElementById("year").value,rn())}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}}();