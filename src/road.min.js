!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var h=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),o=(g.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),i=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},n=function(t){try{return!!t()}catch(t){return!0}},e=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=h.document,a=o(r)&&o(r.createElement),u=function(t){return a?r.createElement(t):{}},l=!e&&!n(function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a}),c=Object.defineProperty,s={f:e?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!o(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),i(n),l)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},O=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},j=e?function(t,e,n){return s.f(t,e,O(1,n))}:function(t,e,n){return t[e]=n,t},f={}.hasOwnProperty,d=function(t,e){return f.call(t,e)},p=0,y=Math.random(),v=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++p+y).toString(36))},A=t(function(t){var a=v("src"),e="toString",n=Function[e],i=(""+n).split(e);g.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(d(n,"name")||j(n,"name",e)),t[e]!==n&&(o&&(d(n,a)||j(n,a,t[e]?""+t[e]:i.join(String(e)))),t===h?t[e]=n:r?t[e]?t[e]=n:j(t,e,n):(delete t[e],j(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[a]||n.call(this)})}),b=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},m=function(r,o,t){if(b(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},x="prototype",S=function(t,e,n){var r,o,a,i,u=t&S.F,l=t&S.G,c=t&S.S,s=t&S.P,f=t&S.B,d=l?h:c?h[e]||(h[e]={}):(h[e]||{})[x],p=l?g:g[e]||(g[e]={}),y=p[x]||(p[x]={});for(r in l&&(n=e),n)a=((o=!u&&d&&void 0!==d[r])?d:n)[r],i=f&&o?m(a,h):s&&"function"==typeof a?m(Function.call,a):a,d&&A(d,r,a,t&S.U),p[r]!=a&&j(p,r,i),s&&y[r]!=a&&(y[r]=a)};h.core=g,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var w=S,_=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},P=function(t){return Object(_(t))},T=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})},L=[].sort,M=[1,2,3];w(w.P+w.F*(n(function(){M.sort(void 0)})||!n(function(){M.sort(null)})||!T(L)),"Array",{sort:function(t){return void 0===t?L.call(P(this)):L.call(P(this),b(t))}});var k=t(function(t){var e="__core-js_shared__",n=h[e]||(h[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),C=t(function(t){var e=k("wks"),n=h.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:v)("Symbol."+t))}).store=e}),E=C("unscopables"),F=Array.prototype;null==F[E]&&j(F,E,{});var I=function(t){F[E][t]=!0},D=function(t,e){return{value:e,done:!!t}},V={},z={}.toString,H=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==(e=t,z.call(e).slice(8,-1))?t.split(""):Object(t);var e},G=function(t){return H(_(t))},N=Math.ceil,R=Math.floor,B=function(t){return isNaN(t=+t)?0:(0<t?R:N)(t)},K=Math.min,q=Math.max,U=Math.min,W=function(s){return function(t,e,n){var r,o,a,i,u=G(t),l=0<(r=u.length)?K(B(r),9007199254740991):0,c=(a=l,(o=B(o=n))<0?q(o+a,0):U(o,a));if(s&&e!=e){for(;c<l;)if((i=u[c++])!=i)return!0}else for(;c<l;c++)if((s||c in u)&&u[c]===e)return s||c||0;return!s&&-1}},J=k("keys"),Q=function(t){return J[t]||(J[t]=v(t))},X=W(!1),Y=Q("IE_PROTO"),Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return function(t,e){var n,r=G(t),o=0,a=[];for(n in r)n!=Y&&d(r,n)&&a.push(n);for(;e.length>o;)d(r,n=e[o++])&&(~X(a,n)||a.push(n));return a}(t,Z)},et=e?Object.defineProperties:function(t,e){i(t);for(var n,r=tt(e),o=r.length,a=0;a<o;)s.f(t,n=r[a++],e[n]);return t},nt=h.document,rt=nt&&nt.documentElement,ot=Q("IE_PROTO"),at=function(){},it="prototype",ut=function(){var t,e=u("iframe"),n=Z.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ut=t.F;n--;)delete ut[it][Z[n]];return ut()},lt=Object.create||function(t,e){var n;return null!==t?(at[it]=i(t),n=new at,at[it]=null,n[ot]=t):n=ut(),void 0===e?n:et(n,e)},ct=s.f,st=C("toStringTag"),ft=function(t,e,n){t&&!d(t=n?t:t.prototype,st)&&ct(t,st,{configurable:!0,value:e})},dt={};j(dt,C("iterator"),function(){return this});var pt=Q("IE_PROTO"),yt=Object.prototype,ht=Object.getPrototypeOf||function(t){return t=P(t),d(t,pt)?t[pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yt:null},gt=C("iterator"),vt=!([].keys&&"next"in[].keys()),bt="values",mt=function(){return this},xt=function(t,e,n,r,o,a,i){var u,l,c;l=e,c=r,(u=n).prototype=lt(dt,{next:O(1,c)}),ft(u,l+" Iterator");var s,f,d,p=function(t){if(!vt&&t in v)return v[t];switch(t){case"keys":case bt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},y=e+" Iterator",h=o==bt,g=!1,v=t.prototype,b=v[gt]||v["@@iterator"]||o&&v[o],m=b||p(o),x=o?h?p("entries"):m:void 0,S="Array"==e&&v.entries||b;if(S&&(d=ht(S.call(new t)))!==Object.prototype&&d.next&&(ft(d,y,!0),"function"!=typeof d[gt]&&j(d,gt,mt)),h&&b&&b.name!==bt&&(g=!0,m=function(){return b.call(this)}),(vt||g||!v[gt])&&j(v,gt,m),V[e]=m,V[y]=mt,o)if(s={values:h?m:p(bt),keys:a?m:p("keys"),entries:x},i)for(f in s)f in v||A(v,f,s[f]);else w(w.P+w.F*(vt||g),e,s);return s}(Array,"Array",function(t,e){this._t=G(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,D(1)):D(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");V.Arguments=V.Array,I("keys"),I("values"),I("entries");for(var St=C("iterator"),Ot=C("toStringTag"),jt=V.Array,At={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wt=tt(At),_t=0;_t<wt.length;_t++){var Pt,Tt=wt[_t],Lt=At[Tt],Mt=h[Tt],kt=Mt&&Mt.prototype;if(kt&&(kt[St]||j(kt,St,jt),kt[Ot]||j(kt,Ot,Tt),V[Tt]=jt,Lt))for(Pt in xt)kt[Pt]||A(kt,Pt,xt[Pt],!0)}var Ct,Et={f:{}.propertyIsEnumerable}.f,Ft=(Ct=!1,function(t){for(var e,n=G(t),r=tt(n),o=r.length,a=0,i=[];a<o;)Et.call(n,e=r[a++])&&i.push(Ct?[e,n[e]]:n[e]);return i});w(w.S,"Object",{values:function(t){return Ft(t)}});var It=W(!1),Dt=[].indexOf,Vt=!!Dt&&1/[1].indexOf(1,-0)<0;w(w.P+w.F*(Vt||!T(Dt)),"Array",{indexOf:function(t){return Vt?Dt.apply(this,arguments)||0:It(this,t,arguments[1])}});var zt,Ht,Gt,Nt;zt="keys",Ht=function(){return function(t){return tt(P(t))}},Gt=(g.Object||{})[zt]||Object[zt],(Nt={})[zt]=Ht(Gt),w(w.S+w.F*n(function(){Gt(1)}),"Object",Nt);var Rt={alt:i18next.t("alt",{ns:"roadArea"}),margin:{top:50,left:80,bottom:50},filterData:function(t){return t},x:{getValue:function(t){return new Date(t.date+"-01")},getText:function(t){return t.date},ticks:7},y:{label:i18next.t("y_label",{ns:"roadArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:1*t[e]/1e4},getTotal:function(t,e,n){var r,o,a=this;if(!t[a.y.totalProperty]){o=a.z.getKeys.call(a,n);for(var i=r=0;i<o.length;i++)r+=a.y.getValue.call(a,t,o[i],n);t[a.y.totalProperty]=r}return t[a.y.totalProperty]},getText:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?t[e]:1*t[e]/1e4},ticks:5},z:{label:i18next.t("z_label",{ns:"roadArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"roadArea"})}},datatable:!0,transition:!1,width:850},Bt={alt:i18next.t("alt",{ns:"roadArea"}),margin:{top:50,left:80,bottom:50},filterData:function(t){return t},x:{getValue:function(t){return new Date(t.date+"-01")},getText:function(t){return t.date}},y:{label:i18next.t("y_label",{ns:"roadArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:1*t[e]/1e4},getTotal:function(t,e,n){var r,o,a=this;if(!t[a.y.totalProperty]){o=a.z.getKeys.call(a,n);for(var i=r=0;i<o.length;i++)r+=a.y.getValue.call(a,t,o[i],n);t[a.y.totalProperty]=r}return t[a.y.totalProperty]},getText:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?t[e]:1*t[e]/1e4}},z:{label:i18next.t("z_label",{ns:"roadArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"roadArea"})}},datatable:!0,width:200};var Kt={},qt={},Ut="CANADA",Wt="2017",$t="2.5em",Jt="Total Sales ($)",Qt=d3.select(".data").append("svg").attr("id","svgFuel"),Xt=d3.select(".dashboard .map").append("svg"),Yt=600-20-0,Zt=150-20-10,te=d3.select("#mapColourScale").select("svg").attr("width",Yt).attr("height",Zt).style("vertical-align","middle");function ee(t){console.log("data in showChloropleth: ",t);var e=t[0];console.log("thisData in showChloropleth: ",e);var n,r=[],o=["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"];(r=Object.values(e)).sort(function(t,e){return t-e}),n=d3.extent(r);var a=d3.scaleLinear().domain([n[0],n[1]]).range(o);for(var i in e)e.hasOwnProperty(i)&&d3.select(".dashboard .map").select("."+i).style("fill",a(e[i]));!function(t,n,e,r){var o=d3.format(","),a=t.selectAll("rect").data(n).enter().append("g");a.append("rect").attr("width",20).attr("height",20).attr("y",5).attr("x",function(t,e){return 160+90*e}).attr("fill",function(t,e){return n[e]});for(var i=(e[1]-e[0])/n.length,u=[],l=0;l<n.length;l++)i=1e3*Math.round(i/1e3),u.push(1e3*Math.round((e[0]+l*i)/1e3));a.append("text"),d3.select("#mapColourScale").selectAll("text").text(function(t,e){var n=u[1],r=u[e];return 0===e?"< "+o(n/1e3):"> "+o(r/1e3)}).attr("y",18).attr("x",function(t,e){return[112,202,293,375,466][e]}).style("display",function(){return"inline"}),t.append("g").append("text").attr("y",18).attr("x",0).text(r)}(te,o,n,Jt),drawMapTable(Xt,Bt,t)}function ne(){areaChart(Qt,Rt,Kt[Ut]),d3.select("#svgFuel").select(".x.axis").select("text").attr("dy",$t)}getCanadaMap(Xt).on("loaded",function(){d3.select(".dashboard .map").selectAll("path").style("stroke","black"),qt[Wt]?ee(qt[Wt]):d3.json("data/road/canada_fuelSales_allyears.json",function(t,e){var n=[];n.push(e[Wt]),qt[Wt]=n,ee(qt[Wt])})}),Xt.on("mouseover",function(){var t=d3.event.target.classList;d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0)}).on("mouseout",function(){Ut?d3.select(".map").selectAll("path:not(."+Ut+")").classed("roadMapHighlight",!1):d3.select(".map").selectAll("path").classed("roadMapHighlight",!1)}),Xt.on("click",function(){d3.select(".map").selectAll("path").classed("roadMapHighlight",!1);var t=d3.event.target.classList;Ut=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("roadMapHighlight",!0),Kt[Ut]?ne():d3.json("data/road/"+Ut+".json",function(t,e){Kt[Ut]=e,ne()}),d3.select("#groups")._groups[0][0].value=Ut}),i18n.load(["src/i18n"],function(){Rt.x.label=i18next.t("x_label",{ns:"roadArea"}),Rt.y.label=i18next.t("y_label",{ns:"roadArea"}),d3.queue().defer(d3.json,"data/road/CANADA.json").await(function(t,e){areaChart(Qt,Rt,e),d3.select("#svgFuel").select(".x.axis").select("text").attr("dy",$t)})}),$(document).on("change",function(t){"groups"===t.target.id&&(Ut=document.getElementById("groups").value,d3.select(".map").selectAll("path").classed("roadMapHighlight",!1),Kt[Ut]?ne():d3.json("data/road/"+Ut+".json",function(t,e){Kt[Ut]=e,ne()})),"year"===t.target.id&&(Wt=document.getElementById("year").value,qt[Wt]?ee(qt[Wt]):d3.json("data/road/canada_fuelSales_"+Wt+".json",function(t,e){qt[Wt]=e,ee(qt[Wt])}))})}();