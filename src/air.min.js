!function(){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},e=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=a[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var y=e(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),g=(y.version,e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),a=e(function(t){var e="__core-js_shared__",n=g[e]||(g[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),n=0,r=Math.random(),s=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))},u=e(function(t){var e=a("wks"),n=g.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:s)("Symbol."+t))}).store=e}),d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},_=function(t){if(!d(t))throw TypeError(t+" is not an object!");return t},p=function(t){try{return!!t()}catch(t){return!0}},i=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),l=g.document,f=d(l)&&d(l.createElement),h=function(t){return f?l.createElement(t):{}},v=!i&&!p(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),m=function(t,e){if(!d(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!d(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,x={f:i?Object.defineProperty:function(t,e,n){if(_(t),e=m(e,!0),_(n),v)try{return b(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},A=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},N=i?function(t,e,n){return x.f(t,e,A(1,n))}:function(t,e,n){return t[e]=n,t},O=u("unscopables"),w=Array.prototype;null==w[O]&&N(w,O,{});var C=function(t){w[O][t]=!0},T=function(t,e){return{value:e,done:!!t}},j={},S={}.toString,E=function(t){return S.call(t).slice(8,-1)},P=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},F=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},k=function(t){return P(F(t))},I={}.hasOwnProperty,L=function(t,e){return I.call(t,e)},M=e(function(t){var a=s("src"),e="toString",n=Function[e],i=(""+n).split(e);y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(L(n,"name")||N(n,"name",e)),t[e]!==n&&(o&&(L(n,a)||N(n,a,t[e]?""+t[e]:i.join(String(e)))),t===g?t[e]=n:r?t[e]?t[e]=n:N(t,e,n):(delete t[e],N(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[a]||n.call(this)})}),D=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},Y=function(r,o,t){if(D(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},B="prototype",R=function(t,e,n){var r,o,a,i,s=t&R.F,c=t&R.G,l=t&R.S,u=t&R.P,p=t&R.B,f=c?g:l?g[e]||(g[e]={}):(g[e]||{})[B],d=c?y:y[e]||(y[e]={}),h=d[B]||(d[B]={});for(r in c&&(n=e),n)a=((o=!s&&f&&void 0!==f[r])?f:n)[r],i=p&&o?Y(a,g):u&&"function"==typeof a?Y(Function.call,a):a,f&&M(f,r,a,t&R.U),d[r]!=a&&N(d,r,i),u&&h[r]!=a&&(h[r]=a)};g.core=y,R.F=1,R.G=2,R.S=4,R.P=8,R.B=16,R.W=32,R.U=64,R.R=128;var V=R,z=Math.ceil,H=Math.floor,G=function(t){return isNaN(t=+t)?0:(0<t?H:z)(t)},U=Math.min,W=function(t){return 0<t?U(G(t),9007199254740991):0},X=Math.max,J=Math.min,Q=function(l){return function(t,e,n){var r,o,a,i=k(t),s=W(i.length),c=(o=s,(r=G(r=n))<0?X(r+o,0):J(r,o));if(l&&e!=e){for(;c<s;)if((a=i[c++])!=a)return!0}else for(;c<s;c++)if((l||c in i)&&i[c]===e)return l||c||0;return!l&&-1}},K=a("keys"),Z=function(t){return K[t]||(K[t]=s(t))},q=Q(!1),tt=Z("IE_PROTO"),et=function(t,e){var n,r=k(t),o=0,a=[];for(n in r)n!=tt&&L(r,n)&&a.push(n);for(;e.length>o;)L(r,n=e[o++])&&(~q(a,n)||a.push(n));return a},nt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),rt=Object.keys||function(t){return et(t,nt)},ot=i?Object.defineProperties:function(t,e){_(t);for(var n,r=rt(e),o=r.length,a=0;a<o;)x.f(t,n=r[a++],e[n]);return t},at=g.document,it=at&&at.documentElement,st=Z("IE_PROTO"),ct=function(){},lt="prototype",ut=function(){var t,e=h("iframe"),n=nt.length;for(e.style.display="none",it.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ut=t.F;n--;)delete ut[lt][nt[n]];return ut()},pt=Object.create||function(t,e){var n;return null!==t?(ct[lt]=_(t),n=new ct,ct[lt]=null,n[st]=t):n=ut(),void 0===e?n:ot(n,e)},ft=x.f,dt=u("toStringTag"),ht=function(t,e,n){t&&!L(t=n?t:t.prototype,dt)&&ft(t,dt,{configurable:!0,value:e})},yt={};N(yt,u("iterator"),function(){return this});var gt=function(t){return Object(F(t))},vt=Z("IE_PROTO"),mt=Object.prototype,bt=Object.getPrototypeOf||function(t){return t=gt(t),L(t,vt)?t[vt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?mt:null},xt=u("iterator"),_t=!([].keys&&"next"in[].keys()),At="values",Nt=function(){return this},Ot=function(t,e,n,r,o,a,i){var s,c,l;c=e,l=r,(s=n).prototype=pt(yt,{next:A(1,l)}),ht(s,c+" Iterator");var u,p,f,d=function(t){if(!_t&&t in v)return v[t];switch(t){case"keys":case At:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",y=o==At,g=!1,v=t.prototype,m=v[xt]||v["@@iterator"]||o&&v[o],b=m||d(o),x=o?y?d("entries"):b:void 0,_="Array"==e&&v.entries||m;if(_&&(f=bt(_.call(new t)))!==Object.prototype&&f.next&&(ht(f,h,!0),"function"!=typeof f[xt]&&N(f,xt,Nt)),y&&m&&m.name!==At&&(g=!0,b=function(){return m.call(this)}),(_t||g||!v[xt])&&N(v,xt,b),j[e]=b,j[h]=Nt,o)if(u={values:y?b:d(At),keys:a?b:d("keys"),entries:x},i)for(p in u)p in v||M(v,p,u[p]);else V(V.P+V.F*(_t||g),e,u);return u},wt=Ot(Array,"Array",function(t,e){this._t=k(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,T(1)):T(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");j.Arguments=j.Array,C("keys"),C("values"),C("entries");for(var Ct=u("iterator"),Tt=u("toStringTag"),jt=j.Array,St={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Et=rt(St),Pt=0;Pt<Et.length;Pt++){var Ft,kt=Et[Pt],It=St[kt],Lt=g[kt],Mt=Lt&&Lt.prototype;if(Mt&&(Mt[Ct]||N(Mt,Ct,jt),Mt[Tt]||N(Mt,Tt,kt),j[kt]=jt,It))for(Ft in wt)Mt[Ft]||M(Mt,Ft,wt[Ft],!0)}var Dt={f:{}.propertyIsEnumerable},Yt=Dt.f,Bt=function(s){return function(t){for(var e,n=k(t),r=rt(n),o=r.length,a=0,i=[];a<o;)Yt.call(n,e=r[a++])&&i.push(s?[e,n[e]]:n[e]);return i}},Rt=Bt(!0);V(V.S,"Object",{entries:function(t){return Rt(t)}});var Vt,zt,Ht,Gt=u("toStringTag"),Ut="Arguments"==E(function(){return arguments}()),$t=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Gt))?n:Ut?E(e):"Object"==(r=E(e))&&"function"==typeof e.callee?"Arguments":r},Wt=function(e,t,n,r){try{return r?t(_(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&_(o.call(e)),t}},Xt=u("iterator"),Jt=Array.prototype,Qt=function(t){return void 0!==t&&(j.Array===t||Jt[Xt]===t)},Kt=u("iterator"),Zt=y.getIteratorMethod=function(t){if(null!=t)return t[Kt]||t["@@iterator"]||j[$t(t)]},qt=e(function(t){var f={},d={},e=t.exports=function(t,e,n,r,o){var a,i,s,c,l=o?function(){return t}:Zt(t),u=Y(n,r,e?2:1),p=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(Qt(l)){for(a=W(t.length);p<a;p++)if((c=e?u(_(i=t[p])[0],i[1]):u(t[p]))===f||c===d)return c}else for(s=l.call(t);!(i=s.next()).done;)if((c=Wt(s,u,i.value,e))===f||c===d)return c};e.BREAK=f,e.RETURN=d}),te=u("species"),ee=function(t,e){var n,r=_(t).constructor;return void 0===r||null==(n=_(r)[te])?e:D(n)},ne=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},re=g.process,oe=g.setImmediate,ae=g.clearImmediate,ie=g.MessageChannel,se=g.Dispatch,ce=0,le={},ue="onreadystatechange",pe=function(){var t=+this;if(le.hasOwnProperty(t)){var e=le[t];delete le[t],e()}},fe=function(t){pe.call(t.data)};oe&&ae||(oe=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return le[++ce]=function(){ne("function"==typeof t?t:Function(t),e)},Vt(ce),ce},ae=function(t){delete le[t]},"process"==E(re)?Vt=function(t){re.nextTick(Y(pe,t,1))}:se&&se.now?Vt=function(t){se.now(Y(pe,t,1))}:ie?(Ht=(zt=new ie).port2,zt.port1.onmessage=fe,Vt=Y(Ht.postMessage,Ht,1)):g.addEventListener&&"function"==typeof postMessage&&!g.importScripts?(Vt=function(t){g.postMessage(t+"","*")},g.addEventListener("message",fe,!1)):Vt=ue in h("script")?function(t){it.appendChild(h("script"))[ue]=function(){it.removeChild(this),pe.call(t)}}:function(t){setTimeout(Y(pe,t,1),0)});var de={set:oe,clear:ae},he=de.set,ye=g.MutationObserver||g.WebKitMutationObserver,ge=g.process,ve=g.Promise,me="process"==E(ge);function be(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=D(n),this.reject=D(r)}var xe={f:function(t){return new be(t)}},_e=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Ae=g.navigator,Ne=Ae&&Ae.userAgent||"",Oe=u("species"),we=u("iterator"),Ce=!1;try{[7][we]().return=function(){Ce=!0}}catch(t){}var Te,je,Se,Ee,Pe,Fe=function(t,e){if(!e&&!Ce)return!1;var n=!1;try{var r=[7],o=r[we]();o.next=function(){return{done:n=!0}},r[we]=function(){return o},t(r)}catch(t){}return n},ke=de.set,Ie=function(){var n,r,o,t=function(){var t,e;for(me&&(t=ge.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?o():r=void 0,t}}r=void 0,t&&t.enter()};if(me)o=function(){ge.nextTick(t)};else if(!ye||g.navigator&&g.navigator.standalone)if(ve&&ve.resolve){var e=ve.resolve(void 0);o=function(){e.then(t)}}else o=function(){he.call(g,t)};else{var a=!0,i=document.createTextNode("");new ye(t).observe(i,{characterData:!0}),o=function(){i.data=a=!a}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,o()),r=e}}(),Le="Promise",Me=g.TypeError,De=g.process,Ye=De&&De.versions,Be=Ye&&Ye.v8||"",Re=g[Le],Ve="process"==$t(De),ze=function(){},He=je=xe.f,Ge=!!function(){try{var t=Re.resolve(1),e=(t.constructor={})[u("species")]=function(t){t(ze,ze)};return(Ve||"function"==typeof PromiseRejectionEvent)&&t.then(ze)instanceof e&&0!==Be.indexOf("6.6")&&-1===Ne.indexOf("Chrome/66")}catch(t){}}(),Ue=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},$e=function(u,n){if(!u._n){u._n=!0;var r=u._c;Ie(function(){for(var c=u._v,l=1==u._s,t=0,e=function(t){var e,n,r,o=l?t.ok:t.fail,a=t.resolve,i=t.reject,s=t.domain;try{o?(l||(2==u._h&&Je(u),u._h=1),!0===o?e=c:(s&&s.enter(),e=o(c),s&&(s.exit(),r=!0)),e===t.promise?i(Me("Promise-chain cycle")):(n=Ue(e))?n.call(e,a,i):a(e)):i(c)}catch(t){s&&!r&&s.exit(),i(t)}};r.length>t;)e(r[t++]);u._c=[],u._n=!1,n&&!u._h&&We(u)})}},We=function(a){ke.call(g,function(){var t,e,n,r=a._v,o=Xe(a);if(o&&(t=_e(function(){Ve?De.emit("unhandledRejection",r,a):(e=g.onunhandledrejection)?e({promise:a,reason:r}):(n=g.console)&&n.error&&n.error("Unhandled promise rejection",r)}),a._h=Ve||Xe(a)?2:1),a._a=void 0,o&&t.e)throw t.v})},Xe=function(t){return 1!==t._h&&0===(t._a||t._c).length},Je=function(e){ke.call(g,function(){var t;Ve?De.emit("rejectionHandled",e):(t=g.onrejectionhandled)&&t({promise:e,reason:e._v})})},Qe=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),$e(e,!0))},Ke=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Me("Promise can't be resolved itself");(n=Ue(t))?Ie(function(){var e={_w:r,_d:!1};try{n.call(t,Y(Ke,e,1),Y(Qe,e,1))}catch(t){Qe.call(e,t)}}):(r._v=t,r._s=1,$e(r,!1))}catch(t){Qe.call({_w:r,_d:!1},t)}}};Ge||(Re=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,Re,Le,"_h"),D(t),Te.call(this);try{t(Y(Ke,this,1),Y(Qe,this,1))}catch(t){Qe.call(this,t)}},(Te=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)M(t,r,e[r],n);return t}(Re.prototype,{then:function(t,e){var n=He(ee(this,Re));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ve?De.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&$e(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Se=function(){var t=new Te;this.promise=t,this.resolve=Y(Ke,t,1),this.reject=Y(Qe,t,1)},xe.f=He=function(t){return t===Re||t===Ee?new Se(t):je(t)}),V(V.G+V.W+V.F*!Ge,{Promise:Re}),ht(Re,Le),Pe=g[Le],i&&Pe&&!Pe[Oe]&&x.f(Pe,Oe,{configurable:!0,get:function(){return this}}),Ee=y[Le],V(V.S+V.F*!Ge,Le,{reject:function(t){var e=He(this);return(0,e.reject)(t),e.promise}}),V(V.S+V.F*!Ge,Le,{resolve:function(t){return function(t,e){if(_(t),d(e)&&e.constructor===t)return e;var n=xe.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),V(V.S+V.F*!(Ge&&Fe(function(t){Re.all(t).catch(ze)})),Le,{all:function(t){var i=this,e=He(i),s=e.resolve,c=e.reject,n=_e(function(){var r=[],o=0,a=1;qt(t,!1,function(t){var e=o++,n=!1;r.push(void 0),a++,i.resolve(t).then(function(t){n||(n=!0,r[e]=t,--a||s(r))},c)}),--a||s(r)});return n.e&&c(n.v),e.promise},race:function(t){var e=this,n=He(e),r=n.reject,o=_e(function(){qt(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}});var Ze=Array.isArray||function(t){return"Array"==E(t)},qe=u("species"),tn=function(t,e){return Ze(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Ze(r.prototype)||(r=void 0),d(r)&&null===(r=r[qe])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},en=function(p,t){var f=1==p,d=2==p,h=3==p,y=4==p,g=6==p,v=5==p||g,m=t||tn;return function(t,e,n){for(var r,o,a=gt(t),i=P(a),s=Y(e,n,3),c=W(i.length),l=0,u=f?m(t,c):d?m(t,0):void 0;l<c;l++)if((v||l in i)&&(o=s(r=i[l],l,a),p))if(f)u[l]=o;else if(o)switch(p){case 3:return!0;case 5:return r;case 6:return l;case 2:u.push(r)}else if(y)return!1;return g?-1:h||y?y:u}},nn=function(t,e){return!!t&&p(function(){e?t.call(null,function(){},1):t.call(null)})},rn=en(1);V(V.P+V.F*!nn([].map,!0),"Array",{map:function(t){return rn(this,t,arguments[1])}});var on=Q(!1),an=[].indexOf,sn=!!an&&1/[1].indexOf(1,-0)<0;V(V.P+V.F*(sn||!nn(an)),"Array",{indexOf:function(t){return sn?an.apply(this,arguments)||0:on(this,t,arguments[1])}});var cn=Object.getOwnPropertyDescriptor,ln={f:i?cn:function(t,e){if(t=k(t),e=m(e,!0),v)try{return cn(t,e)}catch(t){}if(L(t,e))return A(!Dt.f.call(t,e),t[e])}},un=function(t,e){if(_(t),!d(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},pn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=Y(Function.call,ln.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return un(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:un}.set,fn=nt.concat("length","prototype"),dn={f:Object.getOwnPropertyNames||function(t){return et(t,fn)}},hn="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",yn="["+hn+"]",gn=RegExp("^"+yn+yn+"*"),vn=RegExp(yn+yn+"*$"),mn=function(t,e,n){var r={},o=p(function(){return!!hn[t]()||"​"!="​"[t]()}),a=r[t]=o?e(bn):hn[t];n&&(r[n]=a),V(V.P+V.F*o,"String",r)},bn=mn.trim=function(t,e){return t=String(F(t)),1&e&&(t=t.replace(gn,"")),2&e&&(t=t.replace(vn,"")),t},xn=mn,_n=dn.f,An=ln.f,Nn=x.f,On=xn.trim,wn="Number",Cn=g[wn],Tn=Cn,jn=Cn.prototype,Sn=E(pt(jn))==wn,En="trim"in String.prototype,Pn=function(t){var e=m(t,!1);if("string"==typeof e&&2<e.length){var n,r,o,a=(e=En?e.trim():On(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var i,s=e.slice(2),c=0,l=s.length;c<l;c++)if((i=s.charCodeAt(c))<48||o<i)return NaN;return parseInt(s,r)}}return+e};if(!Cn(" 0o1")||!Cn("0b1")||Cn("+0x1")){Cn=function(t){var e,n,r,o,a=arguments.length<1?0:t,i=this;return i instanceof Cn&&(Sn?p(function(){jn.valueOf.call(i)}):E(i)!=wn)?(e=new Tn(Pn(a)),n=Cn,(o=i.constructor)!==n&&"function"==typeof o&&(r=o.prototype)!==n.prototype&&d(r)&&pn&&pn(e,r),e):Pn(a)};for(var Fn,kn=i?_n(Tn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),In=0;kn.length>In;In++)L(Tn,Fn=kn[In])&&!L(Cn,Fn)&&Nn(Cn,Fn,An(Tn,Fn));(Cn.prototype=jn).constructor=Cn,M(g,wn,Cn)}var Ln,Mn,Dn=u("match"),Yn=function(s){return function(t,e){var n,r,o=String(F(t)),a=G(e),i=o.length;return a<0||i<=a?s?"":void 0:(n=o.charCodeAt(a))<55296||56319<n||a+1===i||(r=o.charCodeAt(a+1))<56320||57343<r?s?o.charAt(a):n:s?o.slice(a,a+2):r-56320+(n-55296<<10)+65536}},Bn=Yn(!0),Rn=RegExp.prototype.exec,Vn=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==$t(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Rn.call(t,e)},zn=RegExp.prototype.exec,Hn=String.prototype.replace,Gn=zn,Un="lastIndex",$n=(Ln=/a/,Mn=/b*/g,zn.call(Ln,"a"),zn.call(Mn,"a"),0!==Ln[Un]||0!==Mn[Un]),Wn=void 0!==/()??/.exec("")[1];($n||Wn)&&(Gn=function(t){var e,n,r,o,a=this;return Wn&&(n=new RegExp("^"+a.source+"$(?!\\s)",function(){var t=_(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(a))),$n&&(e=a[Un]),r=zn.call(a,t),$n&&r&&(a[Un]=a.global?r.index+r[0].length:e),Wn&&r&&1<r.length&&Hn.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var Xn=Gn;V({target:"RegExp",proto:!0,forced:Xn!==/./.exec},{exec:Xn});var Jn=u("species"),Qn=!p(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Kn=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Zn=Math.min,qn=[].push,tr="split",er="length",nr="lastIndex",rr=4294967295,or=!p(function(){});!function(n,t,e){var r=u(n),a=!p(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),o=a?!p(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[Jn]=function(){return e}),e[r](""),!t}):void 0;if(!a||!o||"replace"===n&&!Qn||"split"===n&&!Kn){var i=/./[r],s=e(F,r,""[n],function(t,e,n,r,o){return e.exec===Xn?a&&!o?{done:!0,value:i.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),c=s[0],l=s[1];M(String.prototype,n,c),N(RegExp.prototype,r,2==t?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}}("split",2,function(o,a,m,b){var x;return x="c"=="abbc"[tr](/(b)*/)[1]||4!="test"[tr](/(?:)/,-1)[er]||2!="ab"[tr](/(?:ab)*/)[er]||4!="."[tr](/(.?)(.?)/)[er]||1<"."[tr](/()()/)[er]||""[tr](/.?/)[er]?function(t,e){var n,r,o=String(this);if(void 0===t&&0===e)return[];if(!d(n=t)||(void 0!==(r=n[Dn])?!r:"RegExp"!=E(n)))return m.call(o,t,e);for(var a,i,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=void 0===e?rr:e>>>0,f=new RegExp(t.source,l+"g");(a=Xn.call(f,o))&&!(u<(i=f[nr])&&(c.push(o.slice(u,a.index)),1<a[er]&&a.index<o[er]&&qn.apply(c,a.slice(1)),s=a[0][er],u=i,c[er]>=p));)f[nr]===a.index&&f[nr]++;return u===o[er]?!s&&f.test("")||c.push(""):c.push(o.slice(u)),c[er]>p?c.slice(0,p):c}:"0"[tr](void 0,0)[er]?function(t,e){return void 0===t&&0===e?[]:m.call(this,t,e)}:m,[function(t,e){var n=o(this),r=null==t?void 0:t[a];return void 0!==r?r.call(t,n,e):x.call(String(n),t,e)},function(t,e){var n=b(x,t,this,e,x!==m);if(n.done)return n.value;var r=_(t),o=String(this),a=ee(r,RegExp),i=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(or?"y":"g"),c=new a(or?r:"^(?:"+r.source+")",s),l=void 0===e?rr:e>>>0;if(0===l)return[];if(0===o.length)return null===Vn(c,o)?[o]:[];for(var u,p,f=0,d=0,h=[];d<o.length;){c.lastIndex=or?d:0;var y,g=Vn(c,or?o:o.slice(d));if(null===g||(y=Zn(W(c.lastIndex+(or?0:d)),o.length))===f)u=o,d=(p=d)+(i?Bn(u,p).length:1);else{if(h.push(o.slice(f,d)),h.length===l)return h;for(var v=1;v<=g.length-1;v++)if(h.push(g[v]),h.length===l)return h;d=f=y}}return h.push(o.slice(f)),h}]});var ar,ir,sr,cr;ar="keys",ir=function(){return function(t){return rt(gt(t))}},sr=(y.Object||{})[ar]||Object[ar],(cr={})[ar]=ir(sr),V(V.S+V.F*p(function(){sr(1)}),"Object",cr);var lr=[].sort,ur=[1,2,3];V(V.P+V.F*(p(function(){ur.sort(void 0)})||!p(function(){ur.sort(null)})||!nn(lr)),"Array",{sort:function(t){return void 0===t?lr.call(gt(this)):lr.call(gt(this),D(t))}});var pr=en(2);V(V.P+V.F*!nn([].filter,!0),"Array",{filter:function(t){return pr(this,t,arguments[1])}});var fr={alt:i18next.t("alt",{ns:"airPassengers"}),ns:"airPassengers",margin:{top:50,left:130,right:30,bottom:50},aspectRatio:16/11,filterData:function(t){var u=JSON.parse(JSON.stringify(t)),p=u.length;u.push({date:new Date(u[u.length-1].date,0,10,0,0,0,0),domestic:u[u.length-1].domestic,international:u[u.length-1].international,transborder:u[u.length-1].transborder,total:u[u.length-1].total}),u.filter(function(t){parseFloat(t.domestic)&&parseFloat(t.transborder)&&parseFloat(t.international)?t.flag=0:parseFloat(t.domestic)||parseFloat(t.transborder)||parseFloat(t.international)?t.flag=1:parseFloat(t.domestic)||parseFloat(t.transborder)||parseFloat(t.international)||(t.flag=-999)});var f=0;return u.filter(function(t){if(t.isCopy=null,1===t.flag||-999===t.flag){var e=0<=f-1?f-1:0;if(1===t.flag&&0===u[e].flag){if(Number(u[e].total)!==Number(u[e].domestic)+Number(u[e].transborder)+Number(u[e].international)){var n=new Date(u[e].date,11,31,0,0,0,0);u.push({date:n,domestic:u[e].domestic,international:u[e].international,transborder:u[e].transborder,total:u[e].total,flag:u[e].flag,isCopy:!0})}}else if(1===t.flag||1===u[e].flag){var r,o,a=parseFloat(t.domestic)+parseFloat(u[e].domestic),i=parseFloat(t.transborder)+parseFloat(u[e].transborder),s=parseFloat(t.internationa)+parseFloat(u[e].international);if(!a&&!i&&!s){o=(r=p<=f?0:11,31);var c=new Date(u[e].date,r,o,0,0,0,0);u.push({date:c,domestic:u[e].domestic,international:u[e].international,transborder:u[e].transborder,total:u[e].total,flag:u[e].flag,isCopy:!0})}}else if(-999===t.flag&&-999!==u[e].flag){var l=new Date(u[e].date,11,31,0,0,0,0);u.push({date:l,domestic:u[e].domestic,international:u[e].international,transborder:u[e].transborder,total:u[e].total,flag:u[e].flag,isCopy:!0})}}f++}),u.sort(function(t,e){return new Date(t.date)-new Date(e.date)}),dr(u)},x:{getLabel:function(){return i18next.t("x_label",{ns:"airPassengers"})},getValue:function(t,e){return new Date(t.date)},getText:function(t){return t.date},ticks:7,tickSizeOuter:0},y:{label:i18next.t("y_label",{ns:"airPassengers"}),getLabel:function(){return i18next.t("y_label",{ns:"airPassengers"})},getValue:function(t,e){return"x"===t[e]||".."===t[e]?void 0:1*Number(t[e])/1},getTotal:function(t,e,n){var r,o,a=this;if(!t[a.y.totalProperty]){o=a.z.getKeys.call(a,n);for(var i=r=0;i<o.length;i++)r+=a.y.getValue.call(a,t,o[i],n);t[a.y.totalProperty]=r}return isNaN(Number(t[a.y.totalProperty]))?0:1*Number(t[a.y.totalProperty])/1},getText:function(t,e){return isNaN(Number(t[e]))?t[e]:this.formatNum(Number(t[e]))},getTickText:function(t){return this.formatNum(t)},ticks:5,tickSizeOuter:0},z:{label:i18next.t("z_label",{ns:"airPassengers"}),getId:function(t){if("flag"!==t.key&&"isCopy"!==t.key)return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf("flag")&&e.splice(e.indexOf("flag"),1),-1!==e.indexOf("isCopy")&&e.splice(e.indexOf("isCopy"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},origData:function(t){return dr(t)},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"airPassengers"})}},datatable:!0,dataTableTotal:!0,areaTableID:"areaTable",transition:!0,width:1050},dr=function(t){for(var e=new Date("2010"),n=[],r=0;r<t.length;r++){e<=new Date(t[r].date)&&n.push(t[r])}return n},hr={ns:"airMajorAirports",margin:{top:50,left:90,right:30,bottom:50},aspectRatio:16/11,filterData:function(e){var n=0;return e.filter(function(t){t.isLast=n===e.length-1,n++}),yr(e)},x:{getLabel:function(){return i18next.t("x_label",{ns:"airMajorAirports"})},getValue:function(t,e){if(t.isLast){var n=new Date(t.date);return n.setDate(n.getDate()+31)}return new Date(t.date+"-01")},getText:function(t){return t.date},ticks:42,tickSizeOuter:0},y:{label:i18next.t("y_label",{ns:"airMajorAirports"}),getLabel:function(){return i18next.t("y_label",{ns:"airMajorAirports"})},getValue:function(t,e){return"x"===t[e]||".."===t[e]?0:Number(t[e])},getTotal:function(t,e,n){var r,o,a=this;if(!t[a.y.totalProperty]){o=a.z.getKeys.call(a,n);for(var i=r=0;i<o.length;i++)r+=a.y.getValue.call(a,t,o[i],n);t[a.y.totalProperty]=r}return t[a.y.totalProperty]},getText:function(t,e){return isNaN(Number(t[e]))?t[e]:this.formatNum(Number(t[e]))},getTickText:function(t){return this.formatNum(t)},ticks:5,tickSizeOuter:0},z:{getId:function(t){if("isLast"!==t.key)return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),-1!==e.indexOf("isLast")&&e.splice(e.indexOf("isLast"),1),e},origData:function(t){var e=JSON.parse(JSON.stringify(t));return e.filter(function(t){t.date="".concat(i18next.t(t.date.substring(5,7),{ns:"months"})," ").concat(t.date.substring(0,4))}),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"airMajorAirports"})}},datatable:!0,dataTableTotal:!0,areaTableID:"areaTable",transition:!0,width:1050},yr=function(t){for(var e=new Date("2010"),n=[],r=0;r<t.length;r++){e<=new Date(t[r].date)&&n.push(t[r])}return n},gr=Yn(!0);Ot(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=gr(e,n),this._i+=t.length,{value:t,done:!1})});var vr=function(t,e,n){e in t?x.f(t,e,A(0,n)):t[e]=n};V(V.S+V.F*!Fe(function(t){}),"Array",{from:function(t){var e,n,r,o,a=gt(t),i="function"==typeof this?this:Array,s=arguments.length,c=1<s?arguments[1]:void 0,l=void 0!==c,u=0,p=Zt(a);if(l&&(c=Y(c,2<s?arguments[2]:void 0,2)),null==p||i==Array&&Qt(p))for(n=new i(e=W(a.length));u<e;u++)vr(n,u,l?c(a[u],u):a[u]);else for(o=p.call(a),n=new i;!(r=o.next()).done;u++)vr(n,u,l?Wt(o,c,[r.value,u],!0):r.value);return n.length=u,n}});var mr=Bt(!1);function br(t,e,n,r,o){var a=$(t);a.empty();for(var i=Number(n.min.substring(0,4));i<=Number(n.max.substring(0,4));i++)a.append($("<option></option>").attr("value",i).html(i));if(d3.select(t)._groups[0][0].value=r,o){var s=Number(n.max.substring(5,7)),c=Number(n.max.substring(0,4));if(Number(r)===c)$("".concat(e," > option")).each(function(){Number(this.value)>s&&(this.disabled=!0)});else{d3.selectAll("".concat(e," > option")).property("disabled",!1);var l=Number(d3.select(e)._groups[0][0].value);s<l&&$("".concat(t," > option")).each(function(){Number(this.value)===c&&(this.disabled=!0)})}}}V(V.S,"Object",{values:function(t){return mr(t)}});var xr=[].slice,_r={},Ar=Function.bind||function(e){var n=D(this),r=xr.call(arguments,1),o=function(){var t=r.concat(xr.call(arguments));return this instanceof o?function(t,e,n){if(!(e in _r)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";_r[e]=Function("F,a","return new F("+r.join(",")+")")}return _r[e](t,n)}(n,t.length,t):ne(n,t,e)};return d(n.prototype)&&(o.prototype=n.prototype),o};V(V.P,"Function",{bind:Ar});var Nr=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}var t,e,r;return t=n,(e=[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}])&&o(t.prototype,e),r&&o(t,r),n}();Nr.n=0;var Or,wr,Cr,Tr,jr,Sr,Er,Pr,Fr,kr,Ir=new Nr,Lr=1.5,Mr={_selfFormatter:i18n.getNumberFormatter(0),formatNum:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._selfFormatter.format(e)}},Dr=t({},fr,Mr),Yr=t({},hr,Mr),Br={passengers:{},major_airports:{}},Rr=[{code:"CANADA",type:"geo"},{code:"NL",type:"geo"},{code:"YYT",type:"airport"},{code:"PE",type:"geo"},{code:"NS",data:"no",type:"geo"},{code:"YHZ",type:"airport"},{code:"NB",data:"no",type:"geo"},{code:"YQM",type:"airport"},{code:"QC",type:"geo"},{code:"YUL",type:"airport"},{code:"YQB",type:"airport"},{code:"ON",type:"geo"},{code:"YOW",type:"airport"},{code:"YYZ",type:"airport"},{code:"MB",type:"geo"},{code:"YWG",type:"airport"},{code:"SK",type:"geo"},{code:"AB",type:"geo"},{code:"YYC",type:"airport"},{code:"YEG",type:"airport"},{code:"BC",type:"geo"},{code:"YVR",type:"airport"},{code:"YYJ",type:"airport"},{code:"YT",data:"no",type:"geo"},{code:"NT",type:"geo"},{code:"NU",type:"geo"}],Vr=[{code:"CANADA",type:"geo"},{code:"NL",type:"geo"},{code:"YYT",type:"airport"},{code:"PE",type:"geo"},{code:"YYG",type:"airport"},{code:"NS",type:"geo"},{code:"YHZ",type:"airport"},{code:"NB",type:"geo"},{code:"YQM",type:"airport"},{code:"YFC",type:"airport"},{code:"YSJ",type:"airport"},{code:"QC",type:"geo"},{code:"YUL",type:"airport"},{code:"YQB",type:"airport"},{code:"YMX",type:"airport"},{code:"ON",type:"geo"},{code:"YOW",type:"airport"},{code:"YYZ",type:"airport"},{code:"YQT",type:"airport"},{code:"YXU",type:"airport"},{code:"MB",type:"geo"},{code:"YWG",type:"airport"},{code:"SK",type:"geo"},{code:"YQR",type:"airport"},{code:"YXE",type:"airport"},{code:"AB",type:"geo"},{code:"YYC",type:"airport"},{code:"YEG",type:"airport"},{code:"BC",type:"geo"},{code:"YVR",type:"airport"},{code:"YYJ",type:"airport"},{code:"YLW",type:"airport"},{code:"YXS",type:"airport"},{code:"YT",type:"geo"},{code:"YXY",type:"airport"},{code:"NT",type:"geo"},{code:"YZF",type:"airport"},{code:"NU",type:"geo"},{code:"YFB",type:"airport"}],zr=Rr,Hr={},Gr={},Ur={},$r={},Wr=Ur,Xr="passengers",Jr="2017",Qr="01",Kr=Jr,Zr="CANADA",qr=Dr,to={},eo=d3.select(".dashboard .map").append("svg"),no=d3.select("#major"),ro=d3.select("#movements"),oo=d3.select("#months"),ao=570-20-0,io=150-0-10,so=d3.select("#mapColourScale").select("svg").attr("class","airCB").attr("width",ao).attr("height",io).style("vertical-align","middle"),co=d3.select(".data").append("svg").attr("id","svg_areaChartAir"),lo=d3.select("#areaLegend").select("svg").attr("class","airAreaCB").attr("width",650).attr("height",io).style("vertical-align","middle");d3.stcExt.addIEShim(eo,387.1,457.5),d3.stcExt.addIEShim(so,io,ao),d3.stcExt.addIEShim(lo,io,650);var uo,po,fo=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),ho=d3.select("body").append("div").attr("class","tooltip").style("pointer-events","none").style("opacity",0);$(".data_set_selector").on("click",function(t){d3.select(".map").selectAll("path").classed("airMapHighlight",!1),Jr="2017",Zr="CANADA",d3.select("#groups")._groups[0][0].value=Zr,d3.select("#yearSelector")._groups[0][0].value=Jr,"major"===t.target.id&&(no.attr("class","btn btn-primary major data_set_selector").attr("aria-pressed",!0),ro.attr("class","btn btn-default movements data_set_selector").attr("aria-pressed",!1),oo.style("visibility","visible"),Xr="major_airports",zr=Vr,qr=Yr,Kr=(to=Hr).max,Qr=Kr.substring(5,7),Jr=Kr.substring(0,4),d3.select("#yearSelector")._groups[0][0].value=Jr,d3.select("#monthSelector")._groups[0][0].value=Qr,Er=Sr,Wr=$r,_o(),Or=Cr,Oo(),go(),bo(),mo(),vo()),"movements"===t.target.id&&(no.attr("class","btn btn-default major data_set_selector").attr("aria-pressed",!1),ro.attr("class","btn btn-primary movements data_set_selector").attr("aria-pressed",!0),oo.style("visibility","hidden"),Xr="passengers",zr=Rr,qr=Dr,Kr=(to=Gr).max,d3.select("#yearSelector")._groups[0][0].value=Jr,Er=jr,Wr=Ur,_o(),Or=wr,Oo(),go(),bo(),mo(),vo())}),eo.on("mousemove",function(){if(d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if("svg-shimmed"!==t[0]){var e,n,r=i18next.t(t[0],{ns:"geography"});if("airport"!==r)d3.select(".dashboard .map").select("."+t[0]).classed("airMapHighlight",!0).moveToFront(),n=Number(Or[Kr][t[0]])?(e=qr.formatNum(Or[Kr][t[0]]),"passengers"===Xr?"".concat(e," ").concat(i18next.t("units",{ns:"airPassengers"})):"".concat(e," ").concat(i18next.t("units",{ns:"airMajorAirports"}))):(e=Or[Kr][t[0]],"".concat(e)),fo.style("opacity",.9),fo.html("<b> ".concat(r," </b> <br><br>\n              <table>\n                <tr>\n                  <td><b> ").concat(n," </td>\n                </tr>\n              </table>")).style("pointer-events","none"),fo.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}}}),eo.on("mouseout",function(){fo.style("opacity",0),Zr?d3.select(".map").selectAll("path:not(."+Zr+")").classed("airMapHighlight",!1):d3.select(".map").selectAll("path").classed("airMapHighlight",!1)}),eo.on("click",function(){if(d3.select(d3.event.target).attr("class")&&"svg-shimmed"!==d3.select(d3.event.target).attr("class")){if(d3.select(d3.event.target).attr("class")&&-1===d3.select(d3.event.target).attr("class").indexOf("classNaN")&&(d3.select(".map").selectAll("path").classed("airMapHighlight",!1),d3.select(d3.event.target).attr("class")&&-1===d3.select(d3.event.target).attr("class").indexOf("svg-shimmed"))){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if("airport"!==t[0]){if(Zr=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("airMapHighlight",!0).moveToFront(),bo(),d3.select("#groups")._groups[0][0].value=Zr,"airport"!==t[0]){if("zoomed"===t[1]||0===t.length)return kr.pointRadius(function(t,e){return 1.3}),Tr.zoom();kr.pointRadius(function(t,e){return.9}),Tr.zoom(t[0])}Oo()}}}else yo()});var yo=function(){Zr="CANADA",bo(),d3.select("#groups")._groups[0][0].value=Zr,Oo(),go()},go=function(){if(d3.select(".map").selectAll("path").classed("airMapHighlight",!1),kr.pointRadius(function(t,e){return 1.3}),d3.select("."+Zr+".zoomed"))return Tr.zoom()},vo=function(){d3.selectAll(".airport").remove(),kr=d3.geoPath().projection(Tr.settings.projection).pointRadius(1.3),uo.selectAll("path").data(po.features).enter().append("path").attr("d",kr).attr("id",function(t,e){return"airport"+t.properties.id}).attr("class",function(t,e){return Er[Kr][t.properties.id]?"airport ".concat(Xr," ").concat(Er[Kr][t.properties.id]):"airport ".concat(Xr," dontShow")}).on("mouseover",function(t){Pr=t.properties.id,Ao()}),d3.selectAll(".noData").moveToBack(),d3.selectAll(".noData").moveToBack()};function mo(){var t=[];"passengers"===Xr?t.push("#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC","#F9F9F9","#565656"):t.push("#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC");var e=[];e.push(Or[Kr]);var n=function(t,e,n){var r,o=e.slice(-1)[0],a=t[0],i=[];(i=Object.values(a)).sort(function(t,e){return t-e}),r=d3.extent(i);var s=d3.scaleQuantize().domain([r[0],r[1]]).range(e.slice(0,n)),c=function(t){a.hasOwnProperty(t)&&d3.select(".dashboard .map").select("."+t).style("fill",function(){return Number(a[t])?s(a[t]):o}).classed("classNaN",function(){if(!Number(a[t]))return!0})};for(var l in a)c(l);return r}(e,t,5);!function(t,n,e,r,o){var a=(e[1]-e[0])/r,i=[];i[0]=e[0];for(var s=1;s<r;s++)i.push(Math.round(s*a+e[0]));var c=function(t,e){return n[e]},l=function(t,e){return t<r?o.formatNum(i[e])+"+":t===r+1?"x":void 0},u=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);t.append("g").attr("class","colourbarTitle").attr("id","cbTitle").append("text").attr("transform",function(t,e){return"translate(225, 15)"}).style("display",function(){return"inline"});var p=t.attr("class","mapCB").selectAll(".legend").data(Array.from(Array(n.length).keys())),f=p.enter().append("g").attr("class","legend").attr("id",function(t,e){return"cb".concat(e)});f.append("rect").attr("width",35).attr("height",35).attr("y",20).attr("x",function(t,e){return 135+35*e}).attr("fill",c).attr("class",function(t,e){if(e===r+1)return"classNaN"}),f.selectAll(".legend rect").on("mouseover",function(t,e){if("classNaN"===d3.select(this).attr("class")){var n=i18next.t("NaNhover1",{ns:"airUI"}),r=i18next.t("NaNhover2",{ns:"airUI",escapeInterpolation:!1});u.style("opacity",.9).html("<br>"+n+"<br>"+r+"<br><br>").style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}}).on("mouseout",function(){u.style("opacity",0)}),f.append("text").text(l).attr("text-anchor","end").attr("transform",function(t,e){return e<r?"translate(".concat(140+35*e,", ").concat(65,") rotate(-45)"):e===r+1?"translate(".concat(156+35*e,", ").concat(72,") "):void 0}).style("display",function(){return"inline"}),p.select("rect").attr("fill",c),p.select("text").text(l),p.exit().remove()}(so,t,n,5,qr),uo=eo.append("g")}function bo(){Oo();var e=function(){(function(e,t,c,n){e.svg.datum(e),e.data=t;var r,l,u=d3.bisector(function(t){return e.settings.x.getValue(t)}).left,o=e.svg.select(".data .overlay");l=o.empty()?(r=(o=e.svg.select(".data").append("g").attr("class","overlay")).append("rect").style("fill","none").style("pointer-events","all").attr("class","overlay"),o.append("line").attr("class","hoverLine").style("display","inline").style("visibility","hidden")):(r=o.select("rect"),o.select("line")),r.attr("width",e.settings.innerWidth).attr("height",e.settings.innerHeight).on("mousemove",function(t){var e,n=d3.select(this.ownerSVGElement).datum(),r=d3.mouse(this)[0],o=n.x.invert(r),a=u(n.data,o),i=n.data[a-1],s=n.data[a];e=i&&s?o-n.settings.x.getValue(i)>n.settings.x.getValue(s)-o?s:i:i||s,n.data.filter(function(t){t.isLast&&(e=s)}),l.attr("x1",n.x(n.settings.x.getValue(e))),l.attr("x2",n.x(n.settings.x.getValue(e))),l.style("visibility","visible"),c&&"function"==typeof c&&c(e)}).on("mouseout",function(){l.style("visibility","hidden"),n&&"function"==typeof n&&n()}),l.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",e.settings.innerHeight)})(Fr=areaChart(co,qr,Br[Xr][Zr]),Br[Xr][Zr],function(t){var i,e,s,n,r,o,c;i=Fr.settings,e=ho,n=(s=t).date.substring(5,7)?i18next.t(s.date.substring(5,7),{ns:"months"}):null,r=s.date.substring(0,4),o=n?"".concat(i18next.t("hoverTitle",{ns:i.ns}),", ").concat(n," ").concat(r,": "):"".concat(i18next.t("hoverTitle",{ns:i.ns}),", ").concat(s.date,": "),(c=Object.keys(s)).splice(c.indexOf("date"),1),-1!==c.indexOf("total")&&c.splice(c.indexOf("total"),1),-1!==c.indexOf("isLast")&&c.splice(c.indexOf("isLast"),1),e.html(function(t){for(var e=[],n=0;n<c.length;n++){var r=c[n];e.push(i.y.getText.call(i,s,r))}for(var o="<b>".concat(t,"</b><br><br><table>"),a=0;a<c.length;a++)o=o.concat("<tr><td><b>".concat(i18next.t(c[a],{ns:i.ns}),"</b>: ").concat(e[a],"</td></tr>"));return o=o.concat("</table>")}(o)).style("opacity",.9).style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px").style("pointer-events","none")},function(){ho.style("opacity",0)}),d3.selectAll(".flag").style("opacity",0),d3.select("#svg_areaChartAir").select(".x.axis").selectAll(".tick text").attr("dy","".concat(Lr,"em")),"major_airports"===Xr?d3.select("#svg_areaChartAir .x.axis").selectAll("g.tick").each(function(t,e){0!==t.getMonth()?d3.select(this).attr("class","tick notJan"):d3.select(this).attr("class","tick Jan")}):d3.select("#svg_areaChartAir .x.axis").selectAll("g.tick").attr("class","tick"),d3.select(".dashboard .map").select("."+Zr).classed("airMapHighlight",!0).moveToFront(),Ir.pNode&&Ir.appendTo(document.getElementById("copy-button-container")),function(t){var e=[],n=i18next.t(Zr,{ns:"geography"}),r=[i18next.t("tableTitle",{ns:"airMajorAirports",geo:n})],o=[""];for(var a in t[0])"date"!=a&&"isLast"!==a&&o.push(i18next.t(a,{ns:"airPassengers"}));for(var i in e.push(r,[],o),t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=[];for(var c in t[i])if("isLast"!==c&&Object.prototype.hasOwnProperty.call(t[i],c)){var l=t[i][c];s.push(l)}e.push(s)}Ir.data=e}(Br[Xr][Zr]),wo()};Br[Xr][Zr]?e():xo(Zr).then(function(t){Br[Xr][Zr]=t.map(function(t){var e={};return e.date=t.date,e.domestic=t.domestic,e.transborder=t.transborder,e.international=t.international,e.total=t.total,e}),e()}).catch(function(t){console.log("File does not exist",t)})}function xo(t){return new Promise(function(n,r){d3.json("data/air/".concat(Xr,"/").concat(t,".json"),function(t,e){t?r(t):n(e)})})}function _o(){var t=$("#groups");t.empty();var e="#".concat("yearSelector"),n="#".concat("monthSelector");br(e,n,to,Jr,"major_airports"===Xr);for(var r,o=0;o<zr.length;o++){var a=zr[o];r="airport"===a.type?"&numsp;&numsp;&numsp;":"",a.data&&"no"===a.data?t.append($("<option disabled></option>").attr("value",a.code).html(r+i18next.t(a.code,{ns:"geography"}))):t.append($("<option></option>").attr("value",a.code).html(r+i18next.t(a.code,{ns:"geography"})))}}var Ao=function(){Wr[Pr]?No():xo(Pr).then(function(t){Wr[Pr]=t,No()})};function No(){var t=function(t){for(var e in t)if(t[e].date===Kr)return t[e]}(Wr[Pr]);if(fo.style("opacity",.9),"passengers"===Xr){var e=Number(t.enplaned)?qr.formatNum(t.enplaned):t.enplaned,n=Number(t.deplaned)?qr.formatNum(t.deplaned):t.deplaned,r=Number(t.enplaned)?i18next.t("units",{ns:"airPassengers"}):"";fo.html("<b> ".concat(i18next.t(Pr,{ns:"geography"}),", ").concat(t.date,":</b> <br><br>\n          <table>\n            <tr>\n              <td><b> ").concat(i18next.t("enplaned",{ns:"airPassengers"}),": </b> ").concat(e," ").concat(r," </td>\n            </tr>\n              <td><b> ").concat(i18next.t("deplaned",{ns:"airPassengers"}),": </b> ").concat(n," ").concat(r," </td>\n            </tr>\n         </table>")).style("pointer-events","none")}else{var o=qr.formatNum(t.domestic),a=qr.formatNum(t.transborder),i=qr.formatNum(t.international),s="".concat(i18next.t(t.date.substring(5,7),{ns:"months"})," ").concat(t.date.substring(0,4));fo.html("<b> ".concat(i18next.t(Pr,{ns:"geography"}),", ").concat(s,":</b> <br><br>\n          <table>\n            <tr>\n              <td><b> ").concat(i18next.t("domestic",{ns:"airPassengers"})," </b>: ").concat(o," </td>\n            </tr>\n            <tr>\n              <td><b> ").concat(i18next.t("transborder",{ns:"airPassengers"})," </b>: ").concat(a," </td>\n            </tr>\n          <tr>\n            <td><b> ").concat(i18next.t("international",{ns:"airPassengers"})," </b>: ").concat(i," </td>\n          </tr>\n        </table>")).style("pointer-events","none")}d3.select("#svg_aptChart").select(".areaChartTitle").text(i18next.t(Pr,{ns:"geography"}))}function Oo(){var t=i18next.t(Zr,{ns:"geography"}),e="passengers"===Xr?"".concat(i18next.t("mapTitle",{ns:"airPassengers"}),", ").concat(Kr):"".concat(i18next.t("mapTitle",{ns:"airMajorAirports"}),", ").concat(i18next.t(Qr,{ns:"months"})," ").concat(Jr),n="passengers"===Xr?"".concat(i18next.t("chartTitle",{ns:"airPassengers"}),", ").concat(t):"".concat(i18next.t("chartTitle",{ns:"airMajorAirports"}),", ").concat(t),r="passengers"===Xr?"".concat(i18next.t("tableTitle",{ns:"airPassengers"}),", ").concat(t):"".concat(i18next.t("tableTitle",{ns:"airMajorAirports"}),", ").concat(t);d3.select("#mapTitleAir").text(e),d3.select("#areaTitleAir").text(n),qr.tableTitle=r}function wo(){var n,t,r=["domestic","transborder","international"];n=r,(t=lo.selectAll("rect").data(n).enter().append("g")).append("rect").attr("width",15).attr("height",15).attr("y",25).attr("x",function(t,e){return 50+15*e*9.5}).attr("class",function(t,e){return n[e]}),t.append("text"),d3.select("#areaLegend").selectAll("text").attr("y",38).attr("x",function(t,e){return 50+15*e*9.5+20}).style("display",function(){return"inline"}),d3.select("#areaLegend").selectAll("text").text(function(t,e){return i18next.t(r[e],{ns:"airPassengers"})})}i18n.load(["src/i18n"],function(){Dr.x.label=i18next.t("x_label",{ns:"airPassengers"}),Dr.y.label=i18next.t("y_label",{ns:"airPassengers"}),Yr.x.label=i18next.t("x_label",{ns:"airMajorAirports"}),Yr.y.label=i18next.t("y_label",{ns:"airMajorAirports"}),d3.queue().defer(d3.json,"data/air/passengers/Annual_Totals.json").defer(d3.json,"data/air/passengers/metaData.json").defer(d3.json,"data/air/major_airports/Annual_Totals.json").defer(d3.json,"data/air/major_airports/metaData.json").defer(d3.json,"geojson/vennAirport_with_dataFlag.geojson").defer(d3.json,"data/air/passengers/".concat(Zr,".json")).await(function(t,e,n,r,o,a,i){if(t)throw t;wr=Or=e,Cr=r,Sr=o,Er=jr=n,Br[Xr][Zr]=i,function(){for(var t=Object.entries(Cr),e=0;e<t.length;e++){var n=c(t[e],1)[0];(!Hr.min||new Date(n)<new Date(Hr.min))&&(Hr.min=n),(!Hr.max||new Date(n)>new Date(Hr.max))&&(Hr.max=n)}for(var r=Object.entries(wr),o=0;o<r.length;o++)n=c(r[o],1)[0],(!Gr.min||new Date(n)<new Date(Gr.min))&&(Gr.min=n),(!Gr.max||new Date(n)>new Date(Gr.max))&&(Gr.max=n)}(),Kr=(to=Gr).max.substring(0,4),Qr=to.max.substring(5,7),_o(),Tr=getCanadaMap(eo).on("loaded",function(){po=a,mo(),uo.selectAll("path").on("mouseover",function(t){Pr=t.properties.id,"noYears"!==t.properties.hasPlanedData&&Ao()}),eo.style("visibility","visible"),d3.select(".canada-map"),vo()});var s={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};Ir.build(s),d3.select("#symbolLink").html("<a href=".concat(i18next.t("linkURL",{ns:"symbolLink"})," target='_blank'>").concat(i18next.t("linkText",{ns:"symbolLink"}),"</a>")),bo(),wo(),Oo(),function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}()&&function(){var t=document.getElementById("chrt-dt-tbl");function e(t){t.preventDefault(),t.stopPropagation();var e=document.getElementsByClassName("chart-data-table")[0];e.hasAttribute("open")?e.removeAttribute("open"):e.setAttribute("open","open")}t.addEventListener("keydown",function(t){13!=t.which&&32!=t.which||e(t)}),t.addEventListener("click",function(t){e(t)})}()})}),$(document).on("change",function(t){"groups"===t.target.id&&(Zr=document.getElementById("groups").value,d3.select("#airport".concat(Zr))._groups[0][0]?go():(d3.select(".map").selectAll("path").classed("airMapHighlight",!1),"CANADA"===Zr?go():Tr.zoom(Zr)),bo()),"yearSelector"===t.target.id&&(Jr=document.getElementById("yearSelector").value,"major_airports"===Xr?(Kr=Jr+"-"+Qr,br("#".concat("yearSelector"),"#".concat("monthSelector"),to,Jr,!0)):Kr=Jr,mo(),vo(),Oo());"monthSelector"===t.target.id&&(Qr=document.getElementById("monthSelector").value,Kr=Jr+"-"+Qr,mo(),vo(),Oo())}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}}();