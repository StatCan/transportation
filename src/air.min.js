!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var v=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),y=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),i=(y.version,t(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),e=0,n=Math.random(),c=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))},u=t(function(t){var e=i("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:c)("Symbol."+t))}).store=e}),r={f:u},d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t){if(!d(t))throw TypeError(t+" is not an object!");return t},f=function(t){try{return!!t()}catch(t){return!0}},a=!f(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),o=v.document,s=d(o)&&d(o.createElement),l=function(t){return s?o.createElement(t):{}},p=!a&&!f(function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}),h=function(t,e){if(!d(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!d(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!d(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,m={f:a?Object.defineProperty:function(t,e,n){if(w(t),e=h(e,!0),w(n),p)try{return g(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},b=m.f,x=function(t){var e=y.Symbol||(y.Symbol=v.Symbol||{});"_"==t.charAt(0)||t in e||b(e,t,{value:r.f(t)})};x("asyncIterator");var _={}.hasOwnProperty,C=function(t,e){return _.call(t,e)},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},O=a?function(t,e,n){return m.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},E=t(function(t){var a=c("src"),e="toString",n=Function[e],o=(""+n).split(e);y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(C(n,"name")||O(n,"name",e)),t[e]!==n&&(i&&(C(n,a)||O(n,a,t[e]?""+t[e]:o.join(String(e)))),t===v?t[e]=n:r?t[e]?t[e]=n:O(t,e,n):(delete t[e],O(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[a]||n.call(this)})}),T=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=function(r,i,t){if(T(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},I="prototype",N=function(t,e,n){var r,i,a,o,s=t&N.F,c=t&N.G,l=t&N.S,u=t&N.P,f=t&N.B,p=c?v:l?v[e]||(v[e]={}):(v[e]||{})[I],d=c?y:y[e]||(y[e]={}),h=d[I]||(d[I]={});for(r in c&&(n=e),n)a=((i=!s&&p&&void 0!==p[r])?p:n)[r],o=f&&i?P(a,v):u&&"function"==typeof a?P(Function.call,a):a,p&&E(p,r,a,t&N.U),d[r]!=a&&O(d,r,o),u&&h[r]!=a&&(h[r]=a)};v.core=y,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var A=N,j=t(function(t){var n=c("meta"),e=m.f,r=0,i=Object.isExtensible||function(){return!0},a=!f(function(){return i(Object.preventExtensions({}))}),o=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},s=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!d(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!C(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].i},getWeak:function(t,e){if(!C(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].w},onFreeze:function(t){return a&&s.NEED&&i(t)&&!C(t,n)&&o(t),t}}}),k=(j.KEY,j.NEED,j.fastKey,j.getWeak,j.onFreeze,m.f),M=u("toStringTag"),L=function(t,e,n){t&&!C(t=n?t:t.prototype,M)&&k(t,M,{configurable:!0,value:e})},Y={}.toString,F=function(t){return Y.call(t).slice(8,-1)},B=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},D=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},R=function(t){return B(D(t))},V=Math.ceil,G=Math.floor,U=function(t){return isNaN(t=+t)?0:(0<t?G:V)(t)},H=Math.min,z=function(t){return 0<t?H(U(t),9007199254740991):0},J=Math.max,K=Math.min,Q=function(l){return function(t,e,n){var r,i,a,o=R(t),s=z(o.length),c=(i=s,(r=U(r=n))<0?J(r+i,0):K(r,i));if(l&&e!=e){for(;c<s;)if((a=o[c++])!=a)return!0}else for(;c<s;c++)if((l||c in o)&&o[c]===e)return l||c||0;return!l&&-1}},W=i("keys"),X=function(t){return W[t]||(W[t]=c(t))},Z=Q(!1),q=X("IE_PROTO"),tt=function(t,e){var n,r=R(t),i=0,a=[];for(n in r)n!=q&&C(r,n)&&a.push(n);for(;e.length>i;)C(r,n=e[i++])&&(~Z(a,n)||a.push(n));return a},et="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),nt=Object.keys||function(t){return tt(t,et)},rt={f:Object.getOwnPropertySymbols},it={f:{}.propertyIsEnumerable},at=Array.isArray||function(t){return"Array"==F(t)},ot=a?Object.defineProperties:function(t,e){w(t);for(var n,r=nt(e),i=r.length,a=0;a<i;)m.f(t,n=r[a++],e[n]);return t},st=v.document,ct=st&&st.documentElement,lt=X("IE_PROTO"),ut=function(){},ft="prototype",pt=function(){var t,e=l("iframe"),n=et.length;for(e.style.display="none",ct.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;n--;)delete pt[ft][et[n]];return pt()},dt=Object.create||function(t,e){var n;return null!==t?(ut[ft]=w(t),n=new ut,ut[ft]=null,n[lt]=t):n=pt(),void 0===e?n:ot(n,e)},ht=et.concat("length","prototype"),vt={f:Object.getOwnPropertyNames||function(t){return tt(t,ht)}},yt=vt.f,gt={}.toString,mt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],bt={f:function(t){return mt&&"[object Window]"==gt.call(t)?function(t){try{return yt(t)}catch(t){return mt.slice()}}(t):yt(R(t))}},xt=Object.getOwnPropertyDescriptor,wt={f:a?xt:function(t,e){if(t=R(t),e=h(e,!0),p)try{return xt(t,e)}catch(t){}if(C(t,e))return S(!it.f.call(t,e),t[e])}},_t=j.KEY,Ct=wt.f,St=m.f,Ot=bt.f,Et=v.Symbol,Tt=v.JSON,Pt=Tt&&Tt.stringify,It="prototype",Nt=u("_hidden"),At=u("toPrimitive"),jt={}.propertyIsEnumerable,kt=i("symbol-registry"),Mt=i("symbols"),Lt=i("op-symbols"),Yt=Object[It],Ft="function"==typeof Et,Bt=v.QObject,Dt=!Bt||!Bt[It]||!Bt[It].findChild,Rt=a&&f(function(){return 7!=dt(St({},"a",{get:function(){return St(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ct(Yt,e);r&&delete Yt[e],St(t,e,n),r&&t!==Yt&&St(Yt,e,r)}:St,Vt=function(t){var e=Mt[t]=dt(Et[It]);return e._k=t,e},Gt=Ft&&"symbol"==typeof Et.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Et},Ut=function(t,e,n){return t===Yt&&Ut(Lt,e,n),w(t),e=h(e,!0),w(n),C(Mt,e)?(n.enumerable?(C(t,Nt)&&t[Nt][e]&&(t[Nt][e]=!1),n=dt(n,{enumerable:S(0,!1)})):(C(t,Nt)||St(t,Nt,S(1,{})),t[Nt][e]=!0),Rt(t,e,n)):St(t,e,n)},Ht=function(t,e){w(t);for(var n,r=function(t){var e=nt(t),n=rt.f;if(n)for(var r,i=n(t),a=it.f,o=0;i.length>o;)a.call(t,r=i[o++])&&e.push(r);return e}(e=R(e)),i=0,a=r.length;i<a;)Ut(t,n=r[i++],e[n]);return t},zt=function(t){var e=jt.call(this,t=h(t,!0));return!(this===Yt&&C(Mt,t)&&!C(Lt,t))&&(!(e||!C(this,t)||!C(Mt,t)||C(this,Nt)&&this[Nt][t])||e)},Jt=function(t,e){if(t=R(t),e=h(e,!0),t!==Yt||!C(Mt,e)||C(Lt,e)){var n=Ct(t,e);return!n||!C(Mt,e)||C(t,Nt)&&t[Nt][e]||(n.enumerable=!0),n}},Kt=function(t){for(var e,n=Ot(R(t)),r=[],i=0;n.length>i;)C(Mt,e=n[i++])||e==Nt||e==_t||r.push(e);return r},Qt=function(t){for(var e,n=t===Yt,r=Ot(n?Lt:R(t)),i=[],a=0;r.length>a;)!C(Mt,e=r[a++])||n&&!C(Yt,e)||i.push(Mt[e]);return i};Ft||(E((Et=function(){if(this instanceof Et)throw TypeError("Symbol is not a constructor!");var e=c(0<arguments.length?arguments[0]:void 0),n=function(t){this===Yt&&n.call(Lt,t),C(this,Nt)&&C(this[Nt],e)&&(this[Nt][e]=!1),Rt(this,e,S(1,t))};return a&&Dt&&Rt(Yt,e,{configurable:!0,set:n}),Vt(e)})[It],"toString",function(){return this._k}),wt.f=Jt,m.f=Ut,vt.f=bt.f=Kt,it.f=zt,rt.f=Qt,a&&E(Yt,"propertyIsEnumerable",zt,!0),r.f=function(t){return Vt(u(t))}),A(A.G+A.W+A.F*!Ft,{Symbol:Et});for(var Wt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Xt=0;Wt.length>Xt;)u(Wt[Xt++]);for(var $t=nt(u.store),Zt=0;$t.length>Zt;)x($t[Zt++]);A(A.S+A.F*!Ft,"Symbol",{for:function(t){return C(kt,t+="")?kt[t]:kt[t]=Et(t)},keyFor:function(t){if(!Gt(t))throw TypeError(t+" is not a symbol!");for(var e in kt)if(kt[e]===t)return e},useSetter:function(){Dt=!0},useSimple:function(){Dt=!1}}),A(A.S+A.F*!Ft,"Object",{create:function(t,e){return void 0===e?dt(t):Ht(dt(t),e)},defineProperty:Ut,defineProperties:Ht,getOwnPropertyDescriptor:Jt,getOwnPropertyNames:Kt,getOwnPropertySymbols:Qt}),Tt&&A(A.S+A.F*(!Ft||f(function(){var t=Et();return"[null]"!=Pt([t])||"{}"!=Pt({a:t})||"{}"!=Pt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(d(e)||void 0!==t)&&!Gt(t))return at(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Gt(e))return e}),r[1]=e,Pt.apply(Tt,r)}}),Et[It][At]||O(Et[It],At,Et[It].valueOf),L(Et,"Symbol"),L(Math,"Math",!0),L(v.JSON,"JSON",!0);var qt,te,ee,ne=u("toStringTag"),re="Arguments"==F(function(){return arguments}()),ie=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ne))?n:re?F(e):"Object"==(r=F(e))&&"function"==typeof e.callee?"Arguments":r},ae=function(e,t,n,r){try{return r?t(w(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&w(i.call(e)),t}},oe={},se=u("iterator"),ce=Array.prototype,le=u("iterator"),ue=y.getIteratorMethod=function(t){if(null!=t)return t[le]||t["@@iterator"]||oe[ie(t)]},fe=t(function(t){var d={},h={},e=t.exports=function(t,e,n,r,i){var a,o,s,c,l,u=i?function(){return t}:ue(t),f=P(n,r,e?2:1),p=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(void 0===(l=u)||oe.Array!==l&&ce[se]!==l){for(s=u.call(t);!(o=s.next()).done;)if((c=ae(s,f,o.value,e))===d||c===h)return c}else for(a=z(t.length);p<a;p++)if((c=e?f(w(o=t[p])[0],o[1]):f(t[p]))===d||c===h)return c};e.BREAK=d,e.RETURN=h}),pe=u("species"),de=function(t,e){var n,r=w(t).constructor;return void 0===r||null==(n=w(r)[pe])?e:T(n)},he=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},ve=v.process,ye=v.setImmediate,ge=v.clearImmediate,me=v.MessageChannel,be=v.Dispatch,xe=0,we={},_e="onreadystatechange",Ce=function(){var t=+this;if(we.hasOwnProperty(t)){var e=we[t];delete we[t],e()}},Se=function(t){Ce.call(t.data)};ye&&ge||(ye=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return we[++xe]=function(){he("function"==typeof t?t:Function(t),e)},qt(xe),xe},ge=function(t){delete we[t]},"process"==F(ve)?qt=function(t){ve.nextTick(P(Ce,t,1))}:be&&be.now?qt=function(t){be.now(P(Ce,t,1))}:me?(ee=(te=new me).port2,te.port1.onmessage=Se,qt=P(ee.postMessage,ee,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts?(qt=function(t){v.postMessage(t+"","*")},v.addEventListener("message",Se,!1)):qt=_e in l("script")?function(t){ct.appendChild(l("script"))[_e]=function(){ct.removeChild(this),Ce.call(t)}}:function(t){setTimeout(P(Ce,t,1),0)});var Oe={set:ye,clear:ge},Ee=Oe.set,Te=v.MutationObserver||v.WebKitMutationObserver,Pe=v.process,Ie=v.Promise,Ne="process"==F(Pe);function Ae(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=T(n),this.reject=T(r)}var je={f:function(t){return new Ae(t)}},ke=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Me=v.navigator,Le=Me&&Me.userAgent||"",Ye=u("species"),Fe=u("iterator"),Be=!1;try{[7][Fe]().return=function(){Be=!0}}catch(t){}var De,Re,Ve,Ge,Ue,He=Oe.set,ze=function(){var n,r,i,t=function(){var t,e;for(Ne&&(t=Pe.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(Ne)i=function(){Pe.nextTick(t)};else if(!Te||v.navigator&&v.navigator.standalone)if(Ie&&Ie.resolve){var e=Ie.resolve(void 0);i=function(){e.then(t)}}else i=function(){Ee.call(v,t)};else{var a=!0,o=document.createTextNode("");new Te(t).observe(o,{characterData:!0}),i=function(){o.data=a=!a}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}(),Je="Promise",Ke=v.TypeError,Qe=v.process,We=Qe&&Qe.versions,Xe=We&&We.v8||"",$e=v[Je],Ze="process"==ie(Qe),qe=function(){},tn=Re=je.f,en=!!function(){try{var t=$e.resolve(1),e=(t.constructor={})[u("species")]=function(t){t(qe,qe)};return(Ze||"function"==typeof PromiseRejectionEvent)&&t.then(qe)instanceof e&&0!==Xe.indexOf("6.6")&&-1===Le.indexOf("Chrome/66")}catch(t){}}(),nn=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},rn=function(u,n){if(!u._n){u._n=!0;var r=u._c;ze(function(){for(var c=u._v,l=1==u._s,t=0,e=function(t){var e,n,r,i=l?t.ok:t.fail,a=t.resolve,o=t.reject,s=t.domain;try{i?(l||(2==u._h&&sn(u),u._h=1),!0===i?e=c:(s&&s.enter(),e=i(c),s&&(s.exit(),r=!0)),e===t.promise?o(Ke("Promise-chain cycle")):(n=nn(e))?n.call(e,a,o):a(e)):o(c)}catch(t){s&&!r&&s.exit(),o(t)}};r.length>t;)e(r[t++]);u._c=[],u._n=!1,n&&!u._h&&an(u)})}},an=function(a){He.call(v,function(){var t,e,n,r=a._v,i=on(a);if(i&&(t=ke(function(){Ze?Qe.emit("unhandledRejection",r,a):(e=v.onunhandledrejection)?e({promise:a,reason:r}):(n=v.console)&&n.error&&n.error("Unhandled promise rejection",r)}),a._h=Ze||on(a)?2:1),a._a=void 0,i&&t.e)throw t.v})},on=function(t){return 1!==t._h&&0===(t._a||t._c).length},sn=function(e){He.call(v,function(){var t;Ze?Qe.emit("rejectionHandled",e):(t=v.onrejectionhandled)&&t({promise:e,reason:e._v})})},cn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),rn(e,!0))},ln=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Ke("Promise can't be resolved itself");(n=nn(t))?ze(function(){var e={_w:r,_d:!1};try{n.call(t,P(ln,e,1),P(cn,e,1))}catch(t){cn.call(e,t)}}):(r._v=t,r._s=1,rn(r,!1))}catch(t){cn.call({_w:r,_d:!1},t)}}};en||($e=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,$e,Je,"_h"),T(t),De.call(this);try{t(P(ln,this,1),P(cn,this,1))}catch(t){cn.call(this,t)}},(De=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)E(t,r,e[r],n);return t}($e.prototype,{then:function(t,e){var n=tn(de(this,$e));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ze?Qe.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&rn(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ve=function(){var t=new De;this.promise=t,this.resolve=P(ln,t,1),this.reject=P(cn,t,1)},je.f=tn=function(t){return t===$e||t===Ge?new Ve(t):Re(t)}),A(A.G+A.W+A.F*!en,{Promise:$e}),L($e,Je),Ue=v[Je],a&&Ue&&!Ue[Ye]&&m.f(Ue,Ye,{configurable:!0,get:function(){return this}}),Ge=y[Je],A(A.S+A.F*!en,Je,{reject:function(t){var e=tn(this);return(0,e.reject)(t),e.promise}}),A(A.S+A.F*!en,Je,{resolve:function(t){return function(t,e){if(w(t),d(e)&&e.constructor===t)return e;var n=je.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),A(A.S+A.F*!(en&&function(t,e){if(!e&&!Be)return!1;var n=!1;try{var r=[7],i=r[Fe]();i.next=function(){return{done:n=!0}},r[Fe]=function(){return i},t(r)}catch(t){}return n}(function(t){$e.all(t).catch(qe)})),Je,{all:function(t){var o=this,e=tn(o),s=e.resolve,c=e.reject,n=ke(function(){var r=[],i=0,a=1;fe(t,!1,function(t){var e=i++,n=!1;r.push(void 0),a++,o.resolve(t).then(function(t){n||(n=!0,r[e]=t,--a||s(r))},c)}),--a||s(r)});return n.e&&c(n.v),e.promise},race:function(t){var e=this,n=tn(e),r=n.reject,i=ke(function(){fe(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}});var un=u("unscopables"),fn=Array.prototype;null==fn[un]&&O(fn,un,{});var pn=function(t){fn[un][t]=!0},dn=function(t,e){return{value:e,done:!!t}},hn={};O(hn,u("iterator"),function(){return this});var vn=function(t){return Object(D(t))},yn=X("IE_PROTO"),gn=Object.prototype,mn=Object.getPrototypeOf||function(t){return t=vn(t),C(t,yn)?t[yn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?gn:null},bn=u("iterator"),xn=!([].keys&&"next"in[].keys()),wn="values",_n=function(){return this},Cn=function(t,e,n,r,i,a,o){var s,c,l;c=e,l=r,(s=n).prototype=dt(hn,{next:S(1,l)}),L(s,c+" Iterator");var u,f,p,d=function(t){if(!xn&&t in g)return g[t];switch(t){case"keys":case wn:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",v=i==wn,y=!1,g=t.prototype,m=g[bn]||g["@@iterator"]||i&&g[i],b=m||d(i),x=i?v?d("entries"):b:void 0,w="Array"==e&&g.entries||m;if(w&&(p=mn(w.call(new t)))!==Object.prototype&&p.next&&(L(p,h,!0),"function"!=typeof p[bn]&&O(p,bn,_n)),v&&m&&m.name!==wn&&(y=!0,b=function(){return m.call(this)}),(xn||y||!g[bn])&&O(g,bn,b),oe[e]=b,oe[h]=_n,i)if(u={values:v?b:d(wn),keys:a?b:d("keys"),entries:x},o)for(f in u)f in g||E(g,f,u[f]);else A(A.P+A.F*(xn||y),e,u);return u}(Array,"Array",function(t,e){this._t=R(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,dn(1)):dn(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");oe.Arguments=oe.Array,pn("keys"),pn("values"),pn("entries");for(var Sn=u("iterator"),On=u("toStringTag"),En=oe.Array,Tn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Pn=nt(Tn),In=0;In<Pn.length;In++){var Nn,An=Pn[In],jn=Tn[An],kn=v[An],Mn=kn&&kn.prototype;if(Mn&&(Mn[Sn]||O(Mn,Sn,En),Mn[On]||O(Mn,On,An),oe[An]=En,jn))for(Nn in Cn)Mn[Nn]||E(Mn,Nn,Cn[Nn],!0)}var Ln,Yn,Fn,Bn;Ln="keys",Yn=function(){return function(t){return nt(vn(t))}},Fn=(y.Object||{})[Ln]||Object[Ln],(Bn={})[Ln]=Yn(Fn),A(A.S+A.F*f(function(){Fn(1)}),"Object",Bn);var Dn=Date.prototype.getTime,Rn=Date.prototype.toISOString,Vn=function(t){return 9<t?t:"0"+t},Gn=f(function(){return"0385-07-25T07:06:39.999Z"!=Rn.call(new Date(-5e13-1))})||!f(function(){Rn.call(new Date(NaN))})?function(){if(!isFinite(Dn.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":9999<e?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+Vn(t.getUTCMonth()+1)+"-"+Vn(t.getUTCDate())+"T"+Vn(t.getUTCHours())+":"+Vn(t.getUTCMinutes())+":"+Vn(t.getUTCSeconds())+"."+(99<n?n:"0"+Vn(n))+"Z"}:Rn;A(A.P+A.F*(Date.prototype.toISOString!==Gn),"Date",{toISOString:Gn});var Un=function(t,e){return!!t&&f(function(){e?t.call(null,function(){},1):t.call(null)})},Hn=Q(!1),zn=[].indexOf,Jn=!!zn&&1/[1].indexOf(1,-0)<0;A(A.P+A.F*(Jn||!Un(zn)),"Array",{indexOf:function(t){return Jn?zn.apply(this,arguments)||0:Hn(this,t,arguments[1])}});var Kn,Qn,Wn,Xn=u("match"),$n=(Kn=!0,function(t,e){var n,r,i=String(D(t)),a=U(e),o=i.length;return a<0||o<=a?Kn?"":void 0:(n=i.charCodeAt(a))<55296||56319<n||a+1===o||(r=i.charCodeAt(a+1))<56320||57343<r?Kn?i.charAt(a):n:Kn?i.slice(a,a+2):r-56320+(n-55296<<10)+65536}),Zn=RegExp.prototype.exec,qn=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==ie(t))throw new TypeError("RegExp#exec called on incompatible receiver");return Zn.call(t,e)},tr=RegExp.prototype.exec,er=String.prototype.replace,nr=tr,rr="lastIndex",ir=(Qn=/a/,Wn=/b*/g,tr.call(Qn,"a"),tr.call(Wn,"a"),0!==Qn[rr]||0!==Wn[rr]),ar=void 0!==/()??/.exec("")[1];(ir||ar)&&(nr=function(t){var e,n,r,i,a=this;return ar&&(n=new RegExp("^"+a.source+"$(?!\\s)",function(){var t=w(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(a))),ir&&(e=a[rr]),r=tr.call(a,t),ir&&r&&(a[rr]=a.global?r.index+r[0].length:e),ar&&r&&1<r.length&&er.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var or=nr;A({target:"RegExp",proto:!0,forced:or!==/./.exec},{exec:or});var sr=u("species"),cr=!f(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),lr=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ur=Math.min,fr=[].push,pr="split",dr="length",hr="lastIndex",vr=4294967295,yr=!f(function(){});!function(n,t,e){var r=u(n),a=!f(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),i=a?!f(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[sr]=function(){return e}),e[r](""),!t}):void 0;if(!a||!i||"replace"===n&&!cr||"split"===n&&!lr){var o=/./[r],s=e(D,r,""[n],function(t,e,n,r,i){return e.exec===or?a&&!i?{done:!0,value:o.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),c=s[0],l=s[1];E(String.prototype,n,c),O(RegExp.prototype,r,2==t?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}}("split",2,function(i,a,m,b){var x;return x="c"=="abbc"[pr](/(b)*/)[1]||4!="test"[pr](/(?:)/,-1)[dr]||2!="ab"[pr](/(?:ab)*/)[dr]||4!="."[pr](/(.?)(.?)/)[dr]||1<"."[pr](/()()/)[dr]||""[pr](/.?/)[dr]?function(t,e){var n,r,i=String(this);if(void 0===t&&0===e)return[];if(!d(n=t)||(void 0!==(r=n[Xn])?!r:"RegExp"!=F(n)))return m.call(i,t,e);for(var a,o,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,f=void 0===e?vr:e>>>0,p=new RegExp(t.source,l+"g");(a=or.call(p,i))&&!(u<(o=p[hr])&&(c.push(i.slice(u,a.index)),1<a[dr]&&a.index<i[dr]&&fr.apply(c,a.slice(1)),s=a[0][dr],u=o,c[dr]>=f));)p[hr]===a.index&&p[hr]++;return u===i[dr]?!s&&p.test("")||c.push(""):c.push(i.slice(u)),c[dr]>f?c.slice(0,f):c}:"0"[pr](void 0,0)[dr]?function(t,e){return void 0===t&&0===e?[]:m.call(this,t,e)}:m,[function(t,e){var n=i(this),r=null==t?void 0:t[a];return void 0!==r?r.call(t,n,e):x.call(String(n),t,e)},function(t,e){var n=b(x,t,this,e,x!==m);if(n.done)return n.value;var r=w(t),i=String(this),a=de(r,RegExp),o=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(yr?"y":"g"),c=new a(yr?r:"^(?:"+r.source+")",s),l=void 0===e?vr:e>>>0;if(0===l)return[];if(0===i.length)return null===qn(c,i)?[i]:[];for(var u,f,p=0,d=0,h=[];d<i.length;){c.lastIndex=yr?d:0;var v,y=qn(c,yr?i:i.slice(d));if(null===y||(v=ur(z(c.lastIndex+(yr?0:d)),i.length))===p)u=i,d=(f=d)+(o?$n(u,f).length:1);else{if(h.push(i.slice(p,d)),h.length===l)return h;for(var g=1;g<=y.length-1;g++)if(h.push(y[g]),h.length===l)return h;d=p=v}}return h.push(i.slice(p)),h}]});var gr,mr,br,xr,wr,_r,Cr,Sr,Or,Er=u("species"),Tr=(br=(gr=1)==gr,xr=2==gr,wr=3==gr,_r=4==gr,Cr=6==gr,Sr=5==gr||Cr,Or=mr||function(t,e){return at(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!at(r.prototype)||(r=void 0),d(r)&&null===(r=r[Er])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},function(t,e,n){for(var r,i,a=vn(t),o=B(a),s=P(e,n,3),c=z(o.length),l=0,u=br?Or(t,c):xr?Or(t,0):void 0;l<c;l++)if((Sr||l in o)&&(i=s(r=o[l],l,a),gr))if(br)u[l]=i;else if(i)switch(gr){case 3:return!0;case 5:return r;case 6:return l;case 2:u.push(r)}else if(_r)return!1;return Cr?-1:wr||_r?_r:u});A(A.P+A.F*!Un([].map,!0),"Array",{map:function(t){return Tr(this,t,arguments[1])}});var Pr=function(t,e){if(w(t),!d(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ir={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=P(Function.call,wt.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return Pr(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:Pr}.set,Nr="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Ar="["+Nr+"]",jr=RegExp("^"+Ar+Ar+"*"),kr=RegExp(Ar+Ar+"*$"),Mr=function(t,e,n){var r={},i=f(function(){return!!Nr[t]()||"âÂ"!="âÂ"[t]()}),a=r[t]=i?e(Lr):Nr[t];n&&(r[n]=a),A(A.P+A.F*i,"String",r)},Lr=Mr.trim=function(t,e){return t=String(D(t)),1&e&&(t=t.replace(jr,"")),2&e&&(t=t.replace(kr,"")),t},Yr=Mr,Fr=vt.f,Br=wt.f,Dr=m.f,Rr=Yr.trim,Vr="Number",Gr=v[Vr],Ur=Gr,Hr=Gr.prototype,zr=F(dt(Hr))==Vr,Jr="trim"in String.prototype,Kr=function(t){var e=h(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,a=(e=Jr?e.trim():Rr(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var o,s=e.slice(2),c=0,l=s.length;c<l;c++)if((o=s.charCodeAt(c))<48||i<o)return NaN;return parseInt(s,r)}}return+e};if(!Gr(" 0o1")||!Gr("0b1")||Gr("+0x1")){Gr=function(t){var e,n,r,i,a=arguments.length<1?0:t,o=this;return o instanceof Gr&&(zr?f(function(){Hr.valueOf.call(o)}):F(o)!=Vr)?(e=new Ur(Kr(a)),n=Gr,(i=o.constructor)!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&d(r)&&Ir&&Ir(e,r),e):Kr(a)};for(var Qr,Wr=a?Fr(Ur):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Xr=0;Wr.length>Xr;Xr++)C(Ur,Qr=Wr[Xr])&&!C(Gr,Qr)&&Dr(Gr,Qr,Br(Ur,Qr));(Gr.prototype=Hr).constructor=Gr,E(v,Vr,Gr)}var $r={alt:i18next.t("alt",{ns:"airPassengers"}),margin:{top:50,left:90,right:30,bottom:50},filterData:function(t){return Zr(t)},x:{getLabel:function(){return i18next.t("x_label",{ns:"airPassengers"})},getValue:function(t,e){return 0===e?new Date(t.date+"-01"):new Date(t.date,0,1,0,0,0,1)},getText:function(t){return t.date},ticks:7},y:{label:i18next.t("y_label",{ns:"airPassengers"}),getLabel:function(){return i18next.t("y_label",{ns:"airPassengers"})},getValue:function(t,e){return"x"===t[e]||".."===t[e]?void 0:1*Number(t[e])/1e3},getTotal:function(t,e,n){var r,i,a=this;if(!t[a.y.totalProperty]){i=a.z.getKeys.call(a,n);for(var o=r=0;o<i.length;o++)r+=a.y.getValue.call(a,t,i[o],n);t[a.y.totalProperty]=r}return t[a.y.totalProperty]},getText:function(t,e){return"x"===t[e]||".."===t[e]?t[e]:1*Number(t[e])/1e3},ticks:5},z:{label:i18next.t("z_label",{ns:"airPassengers"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"airPassengers"})}},datatable:!0,dataTableTotal:!0,areaTableID:"areaTable",transition:!0,width:1050},Zr=function(t){for(var e=new Date("2010"),n=[],r=0;r<t.length;r++){e<=new Date(t[r].date)&&n.push(t[r])}return n},qr={alt:i18next.t("alt",{ns:"airPassengers"}),margin:{top:50,left:90,right:30,bottom:50},filterData:function(t){return ti(t)},x:{getLabel:function(){return i18next.t("x_label",{ns:"airPassengers"})},getValue:function(t,e){return new Date(t.date+"-01")},getText:function(t){return t.date},ticks:42},y:{label:i18next.t("y_label",{ns:"airPassengers"}),getLabel:function(){return i18next.t("y_label",{ns:"airPassengers"})},getValue:function(t,e){return"x"===t[e]||".."===t[e]?0:1*Number(t[e])/1e3},getTotal:function(t,e,n){var r,i,a=this;if(!t[a.y.totalProperty]){i=a.z.getKeys.call(a,n);for(var o=r=0;o<i.length;o++)r+=a.y.getValue.call(a,t,i[o],n);t[a.y.totalProperty]=r}return t[a.y.totalProperty]},getText:function(t,e){return"x"===t[e]||".."===t[e]?t[e]:1*Number(t[e])/1e3},ticks:5},z:{label:i18next.t("z_label",{ns:"airPassengers"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("date"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"airPassengers"})}},datatable:!0,dataTableTotal:!0,areaTableID:"areaTable",transition:!0,width:1050},ti=function(t){for(var e=new Date("2010"),n=[],r=0;r<t.length;r++){e<=new Date(t[r].date)&&n.push(t[r])}return n};var ei=[].slice,ni={},ri=Function.bind||function(e){var n=T(this),r=ei.call(arguments,1),i=function(){var t=r.concat(ei.call(arguments));return this instanceof i?function(t,e,n){if(!(e in ni)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";ni[e]=Function("F,a","return new F("+r.join(",")+")")}return ni[e](t,n)}(n,t.length,t):he(n,t,e)};return d(n.prototype)&&(i.prototype=n.prototype),i};function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}A(A.P,"Function",{bind:ri});var ai=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}var t,e,r;return t=n,(e=[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}])&&ii(t.prototype,e),r&&ii(t,r),n}();ai.n=0;var oi,si,ci,li,ui,fi,pi,di=new ai,hi={passengers:{},major_airports:{}},vi={Canada:"CANADA","Newfoundland and Labrador":"NL","St John's International":"YYT","Prince Edward Island":"PE","Nova Scotia (no data)":"NS","Halifax/Robert L Stanfield International":"YHZ","New Brunswick (no data)":"NB","Moncton/Greater Moncton International":"YQM",Quebec:"QC","MontrÃ©al/Pierre Elliott Trudeau International":"YUL","QuÃ©bec/Jean Lesage International":"YQB",Ontario:"ON","Ottawa/Macdonald-Cartier International":"YOW","Toronto/Lester B Pearson International":"YYZ",Manitoba:"MB","Winnipeg/James Armstrong Richardson International":"NL",Saskatchewan:"SK",Alberta:"AB","Calgary International":"YYC","Edmonton International":"YEG","British Columbia":"BC","Vancouver International":"YVR","Victoria International":"YYJ","Yukon (no data)":"YT","Northwest Territories":"NT",Nunavut:"NU"},yi={Canada:"CANADA","Newfoundland and Labrador":"NL","St John's International":"YYT","Prince Edward Island":"PE",Charlottetown:"YYG","Nova Scotia (no data)":"NS","Halifax/Robert L Stanfield International":"YHZ","New Brunswick (no data)":"NB","Moncton/Greater Moncton International":"YQM","Fredericton International":"YFC","Saint John":"YSJ",Quebec:"QC","MontrÃ©al/Pierre Elliott Trudeau International":"YUL","QuÃ©bec/Jean Lesage International":"YQB","MontrÃ©al Mirabel International":"YMX",Ontario:"ON","Ottawa/Macdonald-Cartier International":"YOW","Toronto/Lester B Pearson International":"YYZ","Thunder Bay International":"YQT","London International":"YXU",Manitoba:"MB","Winnipeg/James Armstrong Richardson International":"NL",Saskatchewan:"SK","Regina International":"YQR","Saskatoon John G. Diefenbaker International":"YXE",Alberta:"AB","Calgary International":"YYC","Edmonton International":"YEG","British Columbia":"BC","Vancouver International":"YVR","Victoria International":"YYJ","Kelowna International":"YLW","Prince George Airpor":"YXS","Yukon (no data)":"YT","Erik Nielsen Whitehorse International":"YXY","Northwest Territories":"NT",Yellowknife:"YZF",Nunavut:"NU",Iqaluit:"YFB"},gi=vi,mi="passengers",bi="2017",xi="01",wi=bi,_i="CANADA",Ci=$r,Si={},Oi=d3.format(",d"),Ei=1e3,Ti=d3.select(".dashboard .map").append("svg"),Pi=d3.select("#major"),Ii=d3.select("#movements"),Ni=d3.select("#months"),Ai=380-20-0,ji=150-20-10,ki=d3.select("#mapColourScale").select("svg").attr("class","airCB").attr("width",Ai).attr("height",ji).style("vertical-align","middle"),Mi=d3.select("#mapColourScaleNaN").select("svg").attr("class","airCB").attr("width",55).attr("height",ji).style("vertical-align","middle").attr("transform","translate(0, 0)"),Li=d3.select(".data").append("svg").attr("id","svg_areaChartAir"),Yi=d3.select("#areaLegend").select("svg").attr("class","airAreaCB").attr("width",650).attr("height",ji).style("vertical-align","middle");d3.stcExt.addIEShim(Ti,387.1,457.5),d3.stcExt.addIEShim(ki,ji,Ai),d3.stcExt.addIEShim(Yi,ji,650),d3.stcExt.addIEShim(Mi,ji,55);var Fi,Bi,Di=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),Ri=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),Vi=d3.select("body").append("div").attr("class","tooltip").style("pointer-events","none").style("opacity",0),Gi=Li.append("line").attr("class","hoverLine").style("display","none");function Ui(){hi[mi][_i]?Ji():d3.json("data/air/".concat(mi,"/").concat(_i,".json"),function(t,e){hi[mi][_i]=e.map(function(t){var e={};return e.date=t.date,e.domestic=t.domestic,e.transborder=t.transborder,e.international=t.international,e}),Ji()})}function Hi(){d3.select("#svg_areaChartAir .data").on("mousemove",function(){var t,e,n,r,i,a,o,s=d3.mouse(this)[0],c=(t=s,n=d3.bisector(function(t){return t.date}).left,r=fi.x.invert(t),i=hi[mi][_i],a=i[(e=n(i,"passenger"===mi?r.toISOString().substring(0,4):r.toISOString().substring(0,7)))-1],o=i[e],a&&o?r-new Date(a.date)>new Date(o.date)-r?o:a:a||o),l=Oi(c.domestic/Ei),u=Oi(c.transborder/Ei),f=Oi(c.international/Ei);Vi.html("<b>Passenger movements ("+i18next.t("units",{ns:"airPassengers"})+") in "+c.date+":</b><br><br><table><tr><td><b>"+i18next.t("domestic",{ns:"airPassengers"})+"</b>: "+l+"</td></tr><tr><td><b>"+i18next.t("transborder",{ns:"airPassengers"})+"</b>: "+u+"</td></tr><tr><td><b>"+i18next.t("international",{ns:"airPassengers"})+"</b>: "+f+"</td></tr></table>"),Vi.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px").style("pointer-events","none"),Gi.style("display",null),Gi.style("transform","translate("+fi.x(new Date(c.date))+"px)"),Gi.moveToFront()}).on("mouseover",function(){Vi.style("opacity",.9)}).on("mouseout",function(t,e){Gi.style("display","none"),Vi.style("opacity",0)})}$(".data_set_selector").on("click",function(t){"major"===t.target.id&&(Pi.attr("class","btn btn-primary major data_set_selector").attr("aria-pressed",!0),Ii.attr("class","btn btn-default movements data_set_selector").attr("aria-pressed",!1),Ni.style("visibility","visible"),wi=bi+"-"+xi,mi="major_airports",gi=yi,Ci=qr,Ki(),oi=ci,Ui(),Ji()),"movements"===t.target.id&&(Pi.attr("class","btn btn-default major data_set_selector").attr("aria-pressed",!1),Ii.attr("class","btn btn-primary movements data_set_selector").attr("aria-pressed",!0),Ni.style("visibility","hidden"),wi=bi,mi="passengers",gi=vi,Ci=$r,Ki(),oi=si,Ui(),Ji())}),Ti.on("mousemove",function(){if(d3.select(d3.event.target).attr("class")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if("svg-shimmed"!==t[0]){var e=i18next.t(t[0],{ns:"airGeography"});if("airport"!==e){d3.select(".dashboard .map").select("."+t[0]).classed("airMapHighlight",!0);var n=Oi(oi[wi][t[0]]/1e3);Di.style("opacity",.9),Di.html("<b>"+e+" ("+i18next.t("scalef",{ns:"airPassengers"})+")</b><br><br><table><tr><td><b>"+n+" "+i18next.t("units",{ns:"airPassengers"})+"</td></tr></table>").style("pointer-events","none"),Di.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}}}}),Ti.on("mouseout",function(){Di.style("opacity",0),_i?d3.select(".map").selectAll("path:not(."+_i+")").classed("airMapHighlight",!1):d3.select(".map").selectAll("path").classed("airMapHighlight",!1)}),Ti.on("click",function(){if(d3.select(".map").selectAll("path").classed("airMapHighlight",!1),d3.select(d3.event.target).attr("class")&&-1===d3.select(d3.event.target).attr("class").indexOf("svg-shimmed")){var t=(d3.select(d3.event.target).attr("class")||"").split(" ");if(_i=t[0],d3.select(".dashboard .map").select("."+t[0]).classed("airMapHighlight",!0),Ui(),d3.select("#groups")._groups[0][0].value=_i,"airport"!==t[0]){if("zoomed"===t[1]||0===t.length)return pi.pointRadius(function(t,e){return 1.3}),li.zoom();pi.pointRadius(function(t,e){return.9}),li.zoom(t[0])}}else if(pi.pointRadius(function(t,e){return 1.3}),_i="CANADA",Ji(),d3.select("groups")._groups[0][0].value=_i,Wi(),d3.select("."+_i+".zoomed"))return li.zoom();Wi()});function zi(){for(var t,e=["#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC"],n=[],r=Object.keys(oi[wi]),i=0;i<r.length;i++){var a=r[i];n.push(oi[wi][a])}t=d3.extent(n);var o=d3.scaleQuantile().domain([t[0],t[1]]).range(e);for(var s in oi[wi])oi[wi].hasOwnProperty(s)&&Ti.select("."+s).style("fill",o(oi[wi][s]));var c,l=i18next.t("mapScaleLabel",{ns:"airPassengers"})+" ("+i18next.t("scalef",{ns:"airPassengers"})+")";!function(t,n,e){var r=d3.format(",d"),i=t.attr("class","mapCB").selectAll("rect").data(n).enter().append("g");i.append("rect").attr("width",35).attr("height",35).attr("y",5).attr("x",function(t,e){return 175+35*e}).attr("fill",function(t,e){return n[e]});var a=(e[1]-e[0])/n.length,o=[];o[0]=e[0];for(var s=1;s<n.length;s++)o.push(Math.round(s*a+e[0]));i.append("text"),d3.select("#mapColourScale .mapCB").selectAll("text").text(function(t,e){var n=r(o[e]/1e3);return n+"+"}).attr("text-anchor","end").attr("transform",function(t,e){return"translate("+(180+35*e)+", 50) rotate(-45)"}).style("display",function(){return"inline"})}(ki,e,t),(c=Mi.attr("class","mapCB").selectAll("rect").data(["#888"]).enter().append("g").attr("class","legendNaN")).append("rect").attr("width",35).attr("height",35).attr("y",5).attr("x",10).attr("fill","#424242"),c.append("text"),d3.select("#mapColourScaleNaN .mapCB").selectAll("text").text("x").attr("transform",function(t,e){return"translate(24, 60) rotate(0)"}).style("display",function(){return"inline"}),c.on("mousemove",function(){Ri.style("opacity",.9),Ri.html("<table><tr><td>"+i18next.t("NaNhover1",{ns:"airUI"})+"</td></tr><tr><td>"+i18next.t("NaNhover2",{ns:"airUI"})+"</td></tr></table>").style("pointer-events","none"),Ri.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}),c.on("mouseout",function(){Ri.style("opacity",0)});var u=d3.select("#mapColourScale").append("div").attr("class","airmapCBlabel");""===d3.select(".airmapCBlabel").text()&&u.append("text").text(l),Fi=Ti.append("g")}function Ji(){Wi();var e=function(){fi=areaChart(Li,Ci,hi[mi][_i]),d3.select(".dashboard .map").select("."+_i).classed("airMapHighlight",!0),di.pNode&&di.appendTo(document.getElementById("copy-button-container")),function(t){var e=[],n=i18next.t(_i,{ns:"airGeography"}),r=[i18next.t("tableTitle",{ns:"airPassengerAirports",geo:n})],i=[""];for(var a in t[0])"date"!=a&&i.push(i18next.t(a,{ns:"airPassengers"}));for(var o in e.push(r,[],i),t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=[];for(var c in t[o])if(Object.prototype.hasOwnProperty.call(t[o],c)){var l=t[o][c];"date"==c||"total"==c||isNaN(l)||(l/=1e3),s.push(l)}e.push(s)}di.data=e}(hi[mi][_i]),Hi(),Xi()};hi[mi][_i]?e():new Promise(function(n,r){d3.json("data/air/".concat(mi,"/").concat(_i,".json"),function(t,e){t?r(t):n(e)})}).then(function(t){hi[mi][_i]=t.map(function(t){var e={};return e.date=t.date,e.domestic=t.domestic,e.transborder=t.transborder,e.international=t.international,e.total=t.total,e}),e()}).catch(function(t){console.log(t)})}function Ki(){var n=$("#groups");n.empty(),$.each(gi,function(t,e){n.append($("<option></option>").attr("value",e).text(t))})}var Qi=function(){if(!Si[ui]){var t="data/air/".concat(mi,"/").concat(ui,".json");return d3.json(t,function(t){if(t){var e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;for(var s in o)"x"!==o[s]&&".."!==o[s]||(o[s]=0)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}Si[ui]=t;var c=function(t){for(var e in t)if(t[e].date===wi)return t[e]}(Si[ui]);Di.style("opacity",.9),Di.html("<b>placeholder title</b><br><br><table><tr><td><b> enplaned: "+c.enplaned+" </td><td><b> deplaned: "+c.deplaned+"</td></tr></table>").style("pointer-events","none")}})}d3.select("#svg_aptChart").select(".areaChartTitle").text(i18next.t(ui,{ns:"airports"}))};function Wi(){var t=i18next.t(_i,{ns:"airGeography"});d3.select("#mapTitleAir").text(i18next.t("mapTitle",{ns:"airPassengers"})+", "+t+", "+wi),d3.select("#areaTitleAir").text(i18next.t("chartTitle",{ns:"airPassengers"})+", "+t),Ci.tableTitle=i18next.t("tableTitle",{ns:"airPassengers",geo:t})}function Xi(){var n,t,r=["domestic","transborder","international"];n=r,(t=Yi.selectAll("rect").data(n).enter().append("g")).append("rect").attr("width",35).attr("height",35).attr("y",25).attr("x",function(t,e){return 57+35*e*5.2}).attr("class",function(t,e){return n[e]}),t.append("text"),d3.select("#areaLegend").selectAll("text").attr("y",48).attr("x",function(t,e){return 57+35*e*5.2+40}).style("display",function(){return"inline"}),d3.select("#areaLegend").selectAll("text").text(function(t,e){return i18next.t(r[e],{ns:"airPassengers"})})}i18n.load(["src/i18n"],function(){$r.x.label=i18next.t("x_label",{ns:"airPassengers"}),$r.y.label=i18next.t("y_label",{ns:"airPassengers"}),qr.x.label=i18next.t("x_label",{ns:"airPassengers"}),qr.y.label=i18next.t("y_label",{ns:"airPassengers"}),d3.queue().defer(d3.json,"data/air/passengers/Annual_Totals.json").defer(d3.json,"data/air/major_airports/Annual_Totals.json").defer(d3.json,"geojson/vennAirport_with_dataFlag.geojson").defer(d3.json,"data/air/passengers/".concat(_i,".json")).await(function(t,e,n,r,i){if(t)throw t;si=oi=e,ci=n,hi[mi][_i]=i,wi=document.getElementById("yearSelector").value,xi=document.getElementById("monthSelector").value,Ki(),li=getCanadaMap(Ti).on("loaded",function(){Bi=r,zi(),pi=d3.geoPath().projection(li.settings.projection).pointRadius(1.3),Fi.selectAll("path").data(Bi.features).enter().append("path").attr("d",pi).attr("id",function(t,e){return"airport"+t.properties.id}).attr("class",function(t,e){return"airport "+mi+" "+t.properties.hasPlanedData}),Fi.selectAll("path").on("mouseover",function(t){ui=t.properties.id,"noYears"!==t.properties.hasPlanedData&&Qi()}),Ti.style("visibility","visible"),d3.select(".canada-map").moveToBack()});var a={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};di.build(a),Ji(),Xi(),Hi(),Gi.attr("x1",fi.settings.margin.left).attr("x2",fi.settings.margin.left).attr("y1",fi.settings.margin.top).attr("y2",fi.settings.innerHeight+fi.settings.margin.top),Wi()})}),$(document).on("change",function(t){"groups"===t.target.id&&(d3.select(".map").selectAll("path").classed("airMapHighlight",!1),_i=document.getElementById("groups").value,Ji()),"yearSelector"===t.target.id&&(bi=document.getElementById("yearSelector").value,wi="major_airports"===mi?bi+"-"+xi:bi,zi()),"monthSelector"===t.target.id&&(xi=document.getElementById("monthSelector").value,wi=bi+xi,zi())}),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}}();