!function(){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var v=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),y=e(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),c=(y.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),h=function(t){if(!c(t))throw TypeError(t+" is not an object!");return t},s=function(t){try{return!!t()}catch(t){return!0}},n=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=v.document,a=c(r)&&c(r.createElement),o=function(t){return a?r.createElement(t):{}},l=!n&&!s(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}),f=function(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},m=Object.defineProperty,g={f:n?Object.defineProperty:function(t,e,n){if(h(t),e=f(e,!0),h(n),l)try{return m(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},w=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},T=n?function(t,e,n){return g.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},b={}.hasOwnProperty,x=function(t,e){return b.call(t,e)},_=0,A=Math.random(),j=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++_+A).toString(36))},O=e(function(t){var a=j("src"),e="toString",n=Function[e],o=(""+n).split(e);y.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(x(n,"name")||T(n,"name",e)),t[e]!==n&&(i&&(x(n,a)||T(n,a,t[e]?""+t[e]:o.join(String(e)))),t===v?t[e]=n:r?t[e]?t[e]=n:T(t,e,n):(delete t[e],T(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[a]||n.call(this)})}),C=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},S=function(r,i,t){if(C(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},N="prototype",E=function(t,e,n){var r,i,a,o,c=t&E.F,s=t&E.G,u=t&E.S,l=t&E.P,f=t&E.B,d=s?v:u?v[e]||(v[e]={}):(v[e]||{})[N],p=s?y:y[e]||(y[e]={}),h=p[N]||(p[N]={});for(r in s&&(n=e),n)a=((i=!c&&d&&void 0!==d[r])?d:n)[r],o=f&&i?S(a,v):l&&"function"==typeof a?S(Function.call,a):a,d&&O(d,r,a,t&E.U),p[r]!=a&&T(p,r,o),l&&h[r]!=a&&(h[r]=a)};v.core=y,E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;var k=E,I={}.toString,P=function(t){return I.call(t).slice(8,-1)},F=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==P(t)?t.split(""):Object(t)},M=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},B=function(t){return F(M(t))},L=Math.ceil,D=Math.floor,R=function(t){return isNaN(t=+t)?0:(0<t?D:L)(t)},V=Math.min,G=function(t){return 0<t?V(R(t),9007199254740991):0},H=Math.max,z=Math.min,U=function(u){return function(t,e,n){var r,i,a,o=B(t),c=G(o.length),s=(i=c,(r=R(r=n))<0?H(r+i,0):z(r,i));if(u&&e!=e){for(;s<c;)if((a=o[s++])!=a)return!0}else for(;s<c;s++)if((u||s in o)&&o[s]===e)return u||s||0;return!u&&-1}},Y=e(function(t){var e="__core-js_shared__",n=v[e]||(v[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:y.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),X=Y("keys"),K=function(t){return X[t]||(X[t]=j(t))},Q=U(!1),W=K("IE_PROTO"),q=function(t,e){var n,r=B(t),i=0,a=[];for(n in r)n!=W&&x(r,n)&&a.push(n);for(;e.length>i;)x(r,n=e[i++])&&(~Q(a,n)||a.push(n));return a},J="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Z=Object.keys||function(t){return q(t,J)},tt={f:{}.propertyIsEnumerable},et=tt.f,nt=function(c){return function(t){for(var e,n=B(t),r=Z(n),i=r.length,a=0,o=[];a<i;)et.call(n,e=r[a++])&&o.push(c?[e,n[e]]:n[e]);return o}},rt=nt(!0);k(k.S,"Object",{entries:function(t){return rt(t)}});var it=Object.getOwnPropertyDescriptor,at={f:n?it:function(t,e){if(t=B(t),e=f(e,!0),l)try{return it(t,e)}catch(t){}if(x(t,e))return w(!tt.f.call(t,e),t[e])}},ot=function(t,e){if(h(t),!c(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},ct={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=S(Function.call,at.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return ot(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:ot}.set,st=J.concat("length","prototype"),ut={f:Object.getOwnPropertyNames||function(t){return q(t,st)}},lt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",ft="["+lt+"]",dt=RegExp("^"+ft+ft+"*"),pt=RegExp(ft+ft+"*$"),ht=function(t,e,n){var r={},i=s(function(){return!!lt[t]()||"​"!="​"[t]()}),a=r[t]=i?e(vt):lt[t];n&&(r[n]=a),k(k.P+k.F*i,"String",r)},vt=ht.trim=function(t,e){return t=String(M(t)),1&e&&(t=t.replace(dt,"")),2&e&&(t=t.replace(pt,"")),t},yt=ht,mt=n?Object.defineProperties:function(t,e){h(t);for(var n,r=Z(e),i=r.length,a=0;a<i;)g.f(t,n=r[a++],e[n]);return t},gt=v.document,bt=gt&&gt.documentElement,xt=K("IE_PROTO"),_t=function(){},wt="prototype",Tt=function(){var t,e=o("iframe"),n=J.length;for(e.style.display="none",bt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Tt=t.F;n--;)delete Tt[wt][J[n]];return Tt()},At=Object.create||function(t,e){var n;return null!==t?(_t[wt]=h(t),n=new _t,_t[wt]=null,n[xt]=t):n=Tt(),void 0===e?n:mt(n,e)},jt=ut.f,Ot=at.f,Ct=g.f,St=yt.trim,Nt="Number",Et=v[Nt],kt=Et,It=Et.prototype,Pt=P(At(It))==Nt,Ft="trim"in String.prototype,Mt=function(t){var e=f(t,!1);if("string"==typeof e&&2<e.length){var n,r,i,a=(e=Ft?e.trim():St(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var o,c=e.slice(2),s=0,u=c.length;s<u;s++)if((o=c.charCodeAt(s))<48||i<o)return NaN;return parseInt(c,r)}}return+e};if(!Et(" 0o1")||!Et("0b1")||Et("+0x1")){Et=function(t){var e,n,r,i,a=arguments.length<1?0:t,o=this;return o instanceof Et&&(Pt?s(function(){It.valueOf.call(o)}):P(o)!=Nt)?(e=new kt(Mt(a)),n=Et,(i=o.constructor)!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&c(r)&&ct&&ct(e,r),e):Mt(a)};for(var Bt,Lt=n?jt(kt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Dt=0;Lt.length>Dt;Dt++)x(kt,Bt=Lt[Dt])&&!x(Et,Bt)&&Ct(Et,Bt,Ot(kt,Bt));(Et.prototype=It).constructor=Et,O(v,Nt,Et)}var Rt=e(function(t){var e=Y("wks"),n=v.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:j)("Symbol."+t))}).store=e}),Vt=Rt("unscopables"),Gt=Array.prototype;null==Gt[Vt]&&T(Gt,Vt,{});var Ht=function(t){Gt[Vt][t]=!0},zt=function(t,e){return{value:e,done:!!t}},Ut={},Yt=g.f,$t=Rt("toStringTag"),Xt=function(t,e,n){t&&!x(t=n?t:t.prototype,$t)&&Yt(t,$t,{configurable:!0,value:e})},Kt={};T(Kt,Rt("iterator"),function(){return this});var Qt=function(t){return Object(M(t))},Wt=K("IE_PROTO"),qt=Object.prototype,Jt=Object.getPrototypeOf||function(t){return t=Qt(t),x(t,Wt)?t[Wt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?qt:null},Zt=Rt("iterator"),te=!([].keys&&"next"in[].keys()),ee="values",ne=function(){return this},re=function(t,e,n,r,i,a,o){var c,s,u;s=e,u=r,(c=n).prototype=At(Kt,{next:w(1,u)}),Xt(c,s+" Iterator");var l,f,d,p=function(t){if(!te&&t in m)return m[t];switch(t){case"keys":case ee:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",v=i==ee,y=!1,m=t.prototype,g=m[Zt]||m["@@iterator"]||i&&m[i],b=g||p(i),x=i?v?p("entries"):b:void 0,_="Array"==e&&m.entries||g;if(_&&(d=Jt(_.call(new t)))!==Object.prototype&&d.next&&(Xt(d,h,!0),"function"!=typeof d[Zt]&&T(d,Zt,ne)),v&&g&&g.name!==ee&&(y=!0,b=function(){return g.call(this)}),(te||y||!m[Zt])&&T(m,Zt,b),Ut[e]=b,Ut[h]=ne,i)if(l={values:v?b:p(ee),keys:a?b:p("keys"),entries:x},o)for(f in l)f in m||O(m,f,l[f]);else k(k.P+k.F*(te||y),e,l);return l},ie=re(Array,"Array",function(t,e){this._t=B(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,zt(1)):zt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ut.Arguments=Ut.Array,Ht("keys"),Ht("values"),Ht("entries");for(var ae=Rt("iterator"),oe=Rt("toStringTag"),ce=Ut.Array,se={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ue=Z(se),le=0;le<ue.length;le++){var fe,de=ue[le],pe=se[de],he=v[de],ve=he&&he.prototype;if(ve&&(ve[ae]||T(ve,ae,ce),ve[oe]||T(ve,oe,de),Ut[de]=ce,pe))for(fe in ie)ve[fe]||O(ve,fe,ie[fe],!0)}var ye,me,ge,be;ye="keys",me=function(){return function(t){return Z(Qt(t))}},ge=(y.Object||{})[ye]||Object[ye],(be={})[ye]=me(ge),k(k.S+k.F*s(function(){ge(1)}),"Object",be);var xe,_e,we,Te,Ae,je,Oe,Ce,Se,Ne=Array.isArray||function(t){return"Array"==P(t)},Ee=Rt("species"),ke=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})},Ie=(we=(xe=1)==xe,Te=2==xe,Ae=3==xe,je=4==xe,Oe=6==xe,Ce=5==xe||Oe,Se=_e||function(t,e){return Ne(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Ne(r.prototype)||(r=void 0),c(r)&&null===(r=r[Ee])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},function(t,e,n){for(var r,i,a=Qt(t),o=F(a),c=S(e,n,3),s=G(o.length),u=0,l=we?Se(t,s):Te?Se(t,0):void 0;u<s;u++)if((Ce||u in o)&&(i=c(r=o[u],u,a),xe))if(we)l[u]=i;else if(i)switch(xe){case 3:return!0;case 5:return r;case 6:return u;case 2:l.push(r)}else if(je)return!1;return Oe?-1:Ae||je?je:l});k(k.P+k.F*!ke([].map,!0),"Array",{map:function(t){return Ie(this,t,arguments[1])}});var Pe=g.f,Fe=Function.prototype,Me=/^\s*function ([^ (]*)/;"name"in Fe||n&&Pe(Fe,"name",{configurable:!0,get:function(){try{return(""+this).match(Me)[1]}catch(t){return""}}});var Be,Le,De,Re=Rt("toStringTag"),Ve="Arguments"==P(function(){return arguments}()),Ge=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Re))?n:Ve?P(e):"Object"==(r=P(e))&&"function"==typeof e.callee?"Arguments":r},He=function(e,t,n,r){try{return r?t(h(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&h(i.call(e)),t}},ze=Rt("iterator"),Ue=Array.prototype,Ye=function(t){return void 0!==t&&(Ut.Array===t||Ue[ze]===t)},$e=Rt("iterator"),Xe=y.getIteratorMethod=function(t){if(null!=t)return t[$e]||t["@@iterator"]||Ut[Ge(t)]},Ke=e(function(t){var d={},p={},e=t.exports=function(t,e,n,r,i){var a,o,c,s,u=i?function(){return t}:Xe(t),l=S(n,r,e?2:1),f=0;if("function"!=typeof u)throw TypeError(t+" is not iterable!");if(Ye(u)){for(a=G(t.length);f<a;f++)if((s=e?l(h(o=t[f])[0],o[1]):l(t[f]))===d||s===p)return s}else for(c=u.call(t);!(o=c.next()).done;)if((s=He(c,l,o.value,e))===d||s===p)return s};e.BREAK=d,e.RETURN=p}),Qe=Rt("species"),We=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},qe=v.process,Je=v.setImmediate,Ze=v.clearImmediate,tn=v.MessageChannel,en=v.Dispatch,nn=0,rn={},an="onreadystatechange",on=function(){var t=+this;if(rn.hasOwnProperty(t)){var e=rn[t];delete rn[t],e()}},cn=function(t){on.call(t.data)};Je&&Ze||(Je=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return rn[++nn]=function(){We("function"==typeof t?t:Function(t),e)},Be(nn),nn},Ze=function(t){delete rn[t]},"process"==P(qe)?Be=function(t){qe.nextTick(S(on,t,1))}:en&&en.now?Be=function(t){en.now(S(on,t,1))}:tn?(De=(Le=new tn).port2,Le.port1.onmessage=cn,Be=S(De.postMessage,De,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts?(Be=function(t){v.postMessage(t+"","*")},v.addEventListener("message",cn,!1)):Be=an in o("script")?function(t){bt.appendChild(o("script"))[an]=function(){bt.removeChild(this),on.call(t)}}:function(t){setTimeout(S(on,t,1),0)});var sn={set:Je,clear:Ze},un=sn.set,ln=v.MutationObserver||v.WebKitMutationObserver,fn=v.process,dn=v.Promise,pn="process"==P(fn);function hn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=C(n),this.reject=C(r)}var vn={f:function(t){return new hn(t)}},yn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},mn=v.navigator,gn=mn&&mn.userAgent||"",bn=Rt("species"),xn=Rt("iterator"),_n=!1;try{[7][xn]().return=function(){_n=!0}}catch(t){}var wn,Tn,An,jn,On,Cn=function(t,e){if(!e&&!_n)return!1;var n=!1;try{var r=[7],i=r[xn]();i.next=function(){return{done:n=!0}},r[xn]=function(){return i},t(r)}catch(t){}return n},Sn=sn.set,Nn=function(){var n,r,i,t=function(){var t,e;for(pn&&(t=fn.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?i():r=void 0,t}}r=void 0,t&&t.enter()};if(pn)i=function(){fn.nextTick(t)};else if(!ln||v.navigator&&v.navigator.standalone)if(dn&&dn.resolve){var e=dn.resolve(void 0);i=function(){e.then(t)}}else i=function(){un.call(v,t)};else{var a=!0,o=document.createTextNode("");new ln(t).observe(o,{characterData:!0}),i=function(){o.data=a=!a}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,i()),r=e}}(),En="Promise",kn=v.TypeError,In=v.process,Pn=In&&In.versions,Fn=Pn&&Pn.v8||"",Mn=v[En],Bn="process"==Ge(In),Ln=function(){},Dn=Tn=vn.f,Rn=!!function(){try{var t=Mn.resolve(1),e=(t.constructor={})[Rt("species")]=function(t){t(Ln,Ln)};return(Bn||"function"==typeof PromiseRejectionEvent)&&t.then(Ln)instanceof e&&0!==Fn.indexOf("6.6")&&-1===gn.indexOf("Chrome/66")}catch(t){}}(),Vn=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},Gn=function(l,n){if(!l._n){l._n=!0;var r=l._c;Nn(function(){for(var s=l._v,u=1==l._s,t=0,e=function(t){var e,n,r,i=u?t.ok:t.fail,a=t.resolve,o=t.reject,c=t.domain;try{i?(u||(2==l._h&&Un(l),l._h=1),!0===i?e=s:(c&&c.enter(),e=i(s),c&&(c.exit(),r=!0)),e===t.promise?o(kn("Promise-chain cycle")):(n=Vn(e))?n.call(e,a,o):a(e)):o(s)}catch(t){c&&!r&&c.exit(),o(t)}};r.length>t;)e(r[t++]);l._c=[],l._n=!1,n&&!l._h&&Hn(l)})}},Hn=function(a){Sn.call(v,function(){var t,e,n,r=a._v,i=zn(a);if(i&&(t=yn(function(){Bn?In.emit("unhandledRejection",r,a):(e=v.onunhandledrejection)?e({promise:a,reason:r}):(n=v.console)&&n.error&&n.error("Unhandled promise rejection",r)}),a._h=Bn||zn(a)?2:1),a._a=void 0,i&&t.e)throw t.v})},zn=function(t){return 1!==t._h&&0===(t._a||t._c).length},Un=function(e){Sn.call(v,function(){var t;Bn?In.emit("rejectionHandled",e):(t=v.onrejectionhandled)&&t({promise:e,reason:e._v})})},Yn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Gn(e,!0))},$n=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw kn("Promise can't be resolved itself");(n=Vn(t))?Nn(function(){var e={_w:r,_d:!1};try{n.call(t,S($n,e,1),S(Yn,e,1))}catch(t){Yn.call(e,t)}}):(r._v=t,r._s=1,Gn(r,!1))}catch(t){Yn.call({_w:r,_d:!1},t)}}};Rn||(Mn=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,Mn,En,"_h"),C(t),wn.call(this);try{t(S($n,this,1),S(Yn,this,1))}catch(t){Yn.call(this,t)}},(wn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)O(t,r,e[r],n);return t}(Mn.prototype,{then:function(t,e){var n,r,i,a=Dn((n=Mn,void 0===(i=h(this).constructor)||null==(r=h(i)[Qe])?n:C(r)));return a.ok="function"!=typeof t||t,a.fail="function"==typeof e&&e,a.domain=Bn?In.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&Gn(this,!1),a.promise},catch:function(t){return this.then(void 0,t)}}),An=function(){var t=new wn;this.promise=t,this.resolve=S($n,t,1),this.reject=S(Yn,t,1)},vn.f=Dn=function(t){return t===Mn||t===jn?new An(t):Tn(t)}),k(k.G+k.W+k.F*!Rn,{Promise:Mn}),Xt(Mn,En),On=v[En],n&&On&&!On[bn]&&g.f(On,bn,{configurable:!0,get:function(){return this}}),jn=y[En],k(k.S+k.F*!Rn,En,{reject:function(t){var e=Dn(this);return(0,e.reject)(t),e.promise}}),k(k.S+k.F*!Rn,En,{resolve:function(t){return function(t,e){if(h(t),c(e)&&e.constructor===t)return e;var n=vn.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),k(k.S+k.F*!(Rn&&Cn(function(t){Mn.all(t).catch(Ln)})),En,{all:function(t){var o=this,e=Dn(o),c=e.resolve,s=e.reject,n=yn(function(){var r=[],i=0,a=1;Ke(t,!1,function(t){var e=i++,n=!1;r.push(void 0),a++,o.resolve(t).then(function(t){n||(n=!0,r[e]=t,--a||c(r))},s)}),--a||c(r)});return n.e&&s(n.v),e.promise},race:function(t){var e=this,n=Dn(e),r=n.reject,i=yn(function(){Ke(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}});var Xn=U(!1),Kn=[].indexOf,Qn=!!Kn&&1/[1].indexOf(1,-0)<0;k(k.P+k.F*(Qn||!ke(Kn)),"Array",{indexOf:function(t){return Qn?Kn.apply(this,arguments)||0:Xn(this,t,arguments[1])}});var Wn={aspectRatio:16/13,margin:{top:50,left:50,bottom:50},x:{label:i18next.t("x_label",{ns:"railBar"}),getId:function(t){return t.year},getValue:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.x.getId.apply(this,e)},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.x.getId.apply(this,e)},getTickText:function(t){return i18next.t(t,{ns:"railBar"})}},y:{label:i18next.t("y_label",{ns:"railBar"}),getValue:function(t){return t.value},getText:function(t){return t.value},getTickText:function(t){return this.formatNum(t)},ticks:10,tickSizeOuter:0},z:{label:i18next.t("z_label",{ns:"railTable"}),getId:function(t){return t.category},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("category"),1),e},formatData:function(t){return t[0].values},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getDataPoints:function(t){return t.values},getText:function(t){return i18next.t(t.key,{ns:"rail"})}},_selfFormatter:i18n.getNumberFormatter(0),formatNum:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._selfFormatter.format(e)},width:800,datatable:!1,tableTitle:""},qn=[].slice,Jn={},Zn=Function.bind||function(e){var n=C(this),r=qn.call(arguments,1),i=function(){var t=r.concat(qn.call(arguments));return this instanceof i?function(t,e,n){if(!(e in Jn)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";Jn[e]=Function("F,a","return new F("+r.join(",")+")")}return Jn[e](t,n)}(n,t.length,t):We(n,t,e)};return c(n.prototype)&&(i.prototype=n.prototype),i};function tr(t,e){var n,r,i,a,o,c=e,s=d3.select("#railTable"),u=function(t){var e=[];for(var n in t){var r={};for(var i in r.year=n,t[n])r[i]=t[n][i];e.push(r)}return e}(t),l=s.select(".chart-data-table"),f=["All","BC","AB","SK","MB","ON","QC","AT","USA-MX"];c.dataTableTotal&&f.push("total"),l.empty()||l.remove();var d;for((l=s.append("div").attr("class","chart-data-table")).append("div").attr("id",function(){return d3.select("#chrt-dt-tbl").empty()?"table":"table1"}).text(c.tableTitle),l.append("div").attr("id","copy-button-container"),(n=l.append("table").attr("class","table")).append("caption").attr("class","wb-inv").text(c.tableTitle),r=n.append("thead").attr("id","tblHeader").append("tr").attr("id","tblHeaderTR"),i=n.append("tbody").attr("id","tblBody"),r.append("td").attr("id","thead_h0").text("Year"!==(d=c.x.label)?d:""),o=0;o<f.length;o++)r.append("th").attr("id","thead_h"+(o+1)).style("text-align","right").text(c.z.getText.bind(c)({key:f[o]}));for((a=i.selectAll("tr").data(u).enter().append("tr").attr("id",function(t,e){return"row"+e})).append("th").attr("id",function(t,e){return"row"+e+"_h0"}).text((c.x.getText||c.x.getValue).bind(c)),o=0;o<f.length;o++)a.append("td").attr("headers",function(t,e){return"row"+e+"_h0 thead_h"+(o+1)}).text(function(t){return c.formatNum(t[f[o]])}).style("text-align","right");($||wb)&&$(".chart-data-table summary").trigger("wb-init.wb-details")}k(k.P,"Function",{bind:Zn});var er=[].sort,nr=[1,2,3];k(k.P+k.F*(s(function(){nr.sort(void 0)})||!s(function(){nr.sort(null)})||!ke(er)),"Array",{sort:function(t){return void 0===t?er.call(Qt(this)):er.call(Qt(this),C(t))}});var rr=nt(!1);k(k.S,"Object",{values:function(t){return rr(t)}});var ir,ar={aspectRatio:19/6,margin:{top:30,right:0,bottom:20,left:120},alt:i18next.t("alt",{ns:"commodities"}),filterData:function(t){var i,a={},o=[];t.map(function(t){var e=Object.keys(t)[0];i||(i=Object.keys(t[e]));var n=i[i.length-1];a[e]||(a[e]=[]),o.push({key:e,lastYearValue:t[e][n].All});for(var r=0;r<i.length;r++)a[e].push({year:Object.keys(t[e])[r],value:Object.values(t[e])[r].All})}),o.sort(function(t,e){return t.lastYearValue<e.lastYearValue});var n,r=o.map(function(t){return t.key}),c=0,s=[];return Object.keys(a).map(function(t){var e=r[c];s.push(u({},t,e)),c++}),Object.keys(a).map(function(e){return s.map(function(t){if(Object.keys(t)[0]===e)return n=Object.values(t)[0]}),{id:n,dataPoints:a[n]}})},x:{getValue:function(t){return t.year},getText:function(t){return t.year}},r:{inverselyProportional:!1,getValue:function(t){return t.value}},z:{getId:function(t){return t.id},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.id,{ns:"commodities"})},getTableText:function(t){return i18next.t(t.key,{ns:"commodities"})},getDataPoints:function(t){return t.dataPoints}},_selfFormatter:i18n.getNumberFormatter(0),formatNum:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._selfFormatter.format(e)},width:800},or=(ir=!0,function(t,e){var n,r,i=String(M(t)),a=R(e),o=i.length;return a<0||o<=a?ir?"":void 0:(n=i.charCodeAt(a))<55296||56319<n||a+1===o||(r=i.charCodeAt(a+1))<56320||57343<r?ir?i.charAt(a):n:ir?i.slice(a,a+2):r-56320+(n-55296<<10)+65536});re(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=or(e,n),this._i+=t.length,{value:t,done:!1})});var cr=function(t,e,n){e in t?g.f(t,e,w(0,n)):t[e]=n};function sr(t,n,e,r,i){var a=(e[1]-e[0])/r,o=[];o[0]=e[0];for(var c=1;c<r;c++)o.push(Math.round(c*a+e[0]));var s=function(t,e){return n[e]},u=function(t,e){if(t<r){var n=i.formatNum(o[e]);return 1===r?n:n+"+"}if(t===r+1)return"x"},l=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);t.append("g").attr("class","colourbarTitle").attr("id","cbTitle").append("text").attr("transform",function(t,e){return"translate(225, 15)"}).style("display",function(){return"inline"});var f=t.attr("class","mapCB").selectAll(".legend").data(Array.from(Array(n.length).keys())),d=f.enter().append("g").attr("class","legend").attr("id",function(t,e){return"cb".concat(e)});d.append("rect").attr("width",35).attr("height",35).attr("y",20).attr("x",function(t,e){return 135+35*e}).attr("fill",s).attr("class",function(t,e){return e===r+1?"classNaN":1===r?"zeroValue":void 0}),d.selectAll(".legend rect").on("mouseover",function(t,e){if("classNaN"===d3.select(this).attr("class")){var n=i18next.t("NaNhover1",{ns:"airUI"}),r=i18next.t("NaNhover2",{ns:"airUI",escapeInterpolation:!1});l.style("opacity",.9).html("<br>"+n+"<br>"+r+"<br><br>").style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}}).on("mouseout",function(){l.style("opacity",0)}),d.append("text").text(u).attr("text-anchor","end").attr("transform",function(t,e){return e<r?"translate(".concat(140+35*e,", ").concat(65,") rotate(-45)"):e===r+1?"translate(".concat(156+35*e,", ").concat(72,") "):void 0}).style("display",function(){return"inline"}),f.select("rect").attr("fill",s),f.select("text").text(u),1===r?d3.select("#cb0").attr("transform","translate(73,0)"):d3.select("#cb0").attr("transform","translate(0,0)"),f.exit().remove()}k(k.S+k.F*!Cn(function(t){}),"Array",{from:function(t){var e,n,r,i,a=Qt(t),o="function"==typeof this?this:Array,c=arguments.length,s=1<c?arguments[1]:void 0,u=void 0!==s,l=0,f=Xe(a);if(u&&(s=S(s,2<c?arguments[2]:void 0,2)),null==f||o==Array&&Ye(f))for(n=new o(e=G(a.length));l<e;l++)cr(n,l,u?s(a[l],l):a[l]);else for(i=f.call(a),n=new o;!(r=i.next()).done;l++)cr(n,l,u?He(i,s,[r.value,l],!0):r.value);return n.length=l,n}});var ur=function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}var t,e,r;return t=n,(e=[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}])&&i(t.prototype,e),r&&i(t,r),n}();ur.n=0;var lr,fr,dr,pr,hr=new ur,vr=[],yr={},mr="origin",gr=.71,br="Origin",xr="Dest",_r={},wr="2017",Tr=d3.select(".dashboard .map").append("svg"),Ar=d3.select("body").append("div").attr("class","tooltip").attr("id","railTooltip").style("opacity",0),jr=570-20-0,Or=150-20-10,Cr=d3.select("#mapColourScale").select("svg").attr("class","mapCB").attr("width",jr).attr("height",Or).style("vertical-align","middle");d3.stcExt.addIEShim(Tr,387.1,457.5),d3.select("body").append("div").attr("class","tooltip").style("opacity",0);var Sr=d3.select(".data.raildata").append("svg").attr("id","svgBar"),Nr=d3.select("#commgrid").append("svg").attr("id","svg_commgrid"),Er=function(){return new Promise(function(n,r){d3.json("data/rail/"+lr+"_"+dr+".json",function(t,e){t?r(t):n(e)})})};function kr(t){var e;"radio"===t.target.name&&(mr=t.target.value,Ir()),"commodity"===t.target.id&&(Pr(document.getElementById("commodity").value),Ir()),"originGeo"===t.target.id&&(Fr(document.getElementById("originGeo").value),Ir()),"destGeo"===t.target.id&&(Mr(document.getElementById("destGeo").value),Ir()),"yearSelector"===t.target.id&&(e=document.getElementById("yearSelector").value,wr=e,Ir())}function Ir(){_r[pr]?(Dr(),Lr(),tr(_r[pr],Wn),hr.pNode&&hr.appendTo(document.getElementById("copy-button-container")),Hr(_r[pr])):Er().then(function(t){_r[pr]=t,Dr(),Lr(),tr(_r[pr],Wn),hr.pNode&&hr.appendTo(document.getElementById("copy-button-container")),Hr(_r[pr])})}function Pr(t){dr=t,pr="".concat(lr,"_").concat(dr)}function Fr(t){pr="".concat(lr=t,"_").concat(dr),Br(t,br)}function Mr(t){Br(fr=t,xr)}function Br(t,e){d3.selectAll(".dashboard .map .rail".concat(e,"MapHighlight")).classed("rail".concat(e,"MapHighlight"),!1).classed("railMapHighlight",!1),d3.selectAll(".dashboard .map #".concat(t,"_map")).classed("rail".concat(e,"MapHighlight"),!0).classed("railMapHighlight",!0),d3.selectAll(".dashboard .map .railMapHighlight").moveToFront()}function Lr(){var t={},e=[];for(var n in _r[pr][wr])"All"!==n&&(t[n]=_r[pr][wr][n]);e.push(t);var r=["#AFE2FF","#72C2FF","#bc9dff","#894FFF","#5D0FBC"],i=function(t,e,n){var r,i=t[0],a=[],o=n;(a=Object.values(i)).sort(function(t,e){return t-e}),0===(r=d3.extent(a))[1]&&(o=1);var c=d3.scaleQuantize().domain([r[0],r[1]]).range(e.slice(0,o)),s=function(t){i.hasOwnProperty(t)&&d3.select(".dashboard .map").selectAll("."+t).style("fill",function(){return c(i[t])})};for(var u in i)s(u);return r}(e,r,r.length);0===i[1]?sr(Cr,[r[0]],i,1,Wn):sr(Cr,r,i,r.length,Wn);var a=i18next.t("units",{ns:"rail"});d3.select("#cbTitle").select("text").text(a).attr("transform",function(t,e){return"translate(203, 15)"})}function Dr(){barChart(Sr,t({},Gr,{selectedOrig:lr,selectedDest:fr})),d3.select("#svgBar").select(".x.axis").selectAll(".tick text").attr("dy","".concat(gr,"em")),Vr()}function Rr(){var t=i18next.t("bubbleTitle",{ns:"rail"});d3.select("#commTableTitle").text(t),d3.select("#commTableTitle").append("sup").attr("id","fn1-rf").append("a").classed("fn-lnk",!0).attr("href","#fn1").text("1").style("font-size","14px").append("span").classed("wb-inv",!0).text("Footnote"),function(t,e,n){var r,i,a,o,c,s,u=n,l=d3.select("#bubbleTableHtml"),f=t,d=l.select(".chart-data-table"),p=["coal","mixed","wheat","ores","potash","lumber","canola","oils","chems","pulp"];for(d.empty()||d.remove(),(d=l.append("div").attr("class","chart-data-table")).append("div").attr("id",function(){return d3.select("#chrt-dt-tbl").empty()?"table":"table2"}).text(e),d.append("div").attr("id","copy-button-container-bubble"),(r=d.append("table").attr("class","table")).append("caption").attr("class","wb-inv").text(e),i=r.append("thead").attr("id","tblHeader").append("tr").attr("id","tblHeaderTR"),a=r.append("tbody").attr("id","tblBody"),i.append("td").attr("id","thead_h0").text("Year"!==(s=u.x.label)?s:""),c=0;c<p.length;c++)i.append("th").attr("id","thead_h"+(c+1)).style("text-align","right").text(u.z.getTableText.bind(u)({key:p[c]}));for((o=a.selectAll("tr").data(f).enter().append("tr").attr("id",function(t,e){return"row"+e})).append("th").attr("id",function(t,e){return"row"+e+"_h0"}).text((u.x.getText||u.x.getValue).bind(u)),c=0;c<p.length;c++)o.append("td").attr("headers",function(t,e){return"row"+e+"_h0 thead_h"+(c+1)}).text(function(t){return u.formatNum(t[p[c]])}).style("text-align","right");($||wb)&&$(".chart-data-table summary").trigger("wb-init.wb-details")}(Ur(vr),t,ar),bubbleTable(Nr,ar,vr)}Tr.on("mousemove",function(){if(d3.select(d3.event.target).attr("id")){var t,e=d3.event.target.id;t=isNaN(_r[pr][wr][e.substring(0,e.length-4)])?i18next.t("hoverNA",{ns:"rail"}):Wn.formatNum(_r[pr][wr][e.substring(0,e.length-4)])+" "+i18next.t("units",{ns:"rail"}),Ar.style("opacity",.9),Ar.html("<b>"+i18next.t("hoverText",{ns:"rail",origin:i18next.t(lr,{ns:"rail"}),dest:i18next.t(e.substring(0,e.length-4),{ns:"rail"})})+"</b><br><br><table><tr><td><b>"+t+"</td></tr></table>"),Ar.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY+10+"px")}}),Tr.on("mouseout",function(){Ar.style("opacity",0)}),Tr.on("mousedown",function(){"YT_map"!==event.target.id&&"NU_map"!==event.target.id&&"NT_map"!==event.target.id&&""!==event.target.id&&("origin"===mr&&(document.getElementById("originGeo").value=d3.event.target.id.substring(0,event.target.id.length-4),Fr(d3.event.target.id.substring(0,event.target.id.length-4)),Ir()),"destination"===mr&&(document.getElementById("destGeo").value=d3.event.target.id.substring(0,event.target.id.length-4),Mr(d3.event.target.id.substring(0,event.target.id.length-4)),Ir()))});function Vr(){var t=i18next.t(dr,{ns:"rail"});i18next.t(lr,{ns:"geography"}),i18next.t(fr,{ns:"geography"});d3.select("#railTitleBarChart").text(i18next.t("barChartTitle",{ns:"rail",commodity:t,geo:i18next.t("map"+lr,{ns:"rail"}),dest:i18next.t("map"+fr,{ns:"rail"})})),d3.select("#mapTitleRail").text(i18next.t("mapTitle",{ns:"rail",commodity:t,geo:i18next.t("map"+lr,{ns:"rail"}),year:wr})),Wn.tableTitle=i18next.t("tableTitle",{ns:"rail"})}var Gr=t({},Wn,{filterData:function(){var e=this,n=_r[pr];return[{category:"".concat(this.selectedOrig),values:Object.keys(n).map(function(t){return{year:t,value:n[t][e.selectedDest]}})}]}});function Hr(t){var e=[],n=[],r=i18next.t(dr,{ns:"rail"}),i=i18next.t(lr,{ns:"geography"}),a=["".concat(r," from ").concat(i)];for(var o in t){var c={};for(var s in t[c.year=o])c[s]=t[o][s];n.push(c)}var u,l=zr(n,a),f=[i18next.t("bubbleTitle",{ns:"rail"})];u||(u=zr(Ur(vr),f)),e.push.apply(e,p(l)),e.push([]),e.push.apply(e,p(u)),hr.data=e}function zr(t,e){var n=[],r=[""];for(var i in t[0])"year"!=i&&"isLast"!==i&&r.push(i18next.t(i,{ns:"rail"}));for(var a in n.push(e,[],r),t)if(Object.prototype.hasOwnProperty.call(t,a)){var o=[];for(var c in t[a])if("isLast"!==c&&Object.prototype.hasOwnProperty.call(t[a],c)){var s=t[a][c];"year"===c?o.unshift(s):o.push(s)}n.push(o)}return n}function Ur(t){var e=[],n={};for(var r in t)for(var i in t[r])for(var a in t[r][i])n.hasOwnProperty(a)||(n[a]={}),n[a][i]=t[r][i][a].All;for(var o in n){var c=n[o];c.year=o,e.push(c)}return e}i18n.load(["src/i18n"],function(){Wn.x.label=i18next.t("x_label",{ns:"railBar"}),Wn.y.label=i18next.t("y_label",{ns:"railBar"}),Wn.z.label=i18next.t("z_label",{ns:"railTable"}),d3.queue().defer(d3.json,"data/rail/All_coal.json").defer(d3.json,"data/rail/All_mixed.json").defer(d3.json,"data/rail/All_wheat.json").defer(d3.json,"data/rail/All_ores.json").defer(d3.json,"data/rail/All_potash.json").defer(d3.json,"data/rail/All_lumber.json").defer(d3.json,"data/rail/All_canola.json").defer(d3.json,"data/rail/All_oils.json").defer(d3.json,"data/rail/All_chems.json").defer(d3.json,"data/rail/All_pulp.json").defer(d3.json,"data/road/CANADA.json").await(function(t,e,n,r,i,a,o,c,s,u,l){vr.push({coal:e}),vr.push({mixed:n}),vr.push({wheat:r}),vr.push({ores:i}),vr.push({potash:a}),vr.push({lumber:o}),vr.push({canola:c}),vr.push({oils:s}),vr.push({chems:u}),vr.push({pulp:l}),Fr("AT"),Mr("QC"),Pr("chems"),function(t){for(var e=Object.entries(t),n=0;n<e.length;n++){var r=d(e[n],1)[0];(!yr.min||new Date(r)<new Date(yr.min))&&(yr.min=r),(!yr.max||new Date(r)>new Date(yr.max))&&(yr.max=r)}for(var i=$("#yearSelector"),a=Number(yr.min.substring(0,4));a<=Number(yr.max.substring(0,4));a++)i.append($("<option></option>").attr("value",a).html(a));d3.select("#yearSelector")._groups[0][0].value=wr}(e),getCanadaMap(Tr).on("loaded",function(){var t=document.getElementById("AB_map").getBBox(),e=Tr.append("g").attr("id","usa-mex-group");e.append("rect").attr("width",35).attr("height",11).attr("x",t.x).attr("y",t.height+t.y+18).attr("class","USA-MX").attr("id","USA-MX_map"),e.append("image").attr("width",35).attr("height",15).attr("x",t.x).attr("y",t.height+t.y+5).attr("xlink:href","lib/usamexico.png").attr("id","USA-MX_map"),d3.select("#mapColourScale").classed("moveMap",!0),d3.select(".map").classed("moveMap",!0),Br("AT",br),Br("QC",xr),Lr()});var f={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};hr.build(f),d3.select("#mapTitleRail").text(i18next.t("mapTitle",{ns:"rail",commodity:i18next.t(dr,{ns:"rail"}),geo:i18next.t(lr,{ns:"rail"}),year:wr})),d3.select("#symbolLink").html("<a href=".concat(i18next.t("linkURL",{ns:"symbolLink"})," target='_blank'>").concat(i18next.t("linkText",{ns:"symbolLink"}),"</a>")),Rr(),d3.json("data/rail/"+lr+"_"+dr+".json",function(t,e){pr="".concat(lr,"_").concat(dr),_r[pr]=e,Ir()}),Vr()})}),$(document).on("change",kr),$(document).on("change",kr),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})}}();