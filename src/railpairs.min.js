!function(){"use strict";function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t(t,e){return t(e={exports:{}},e.exports),e.exports}var g=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),v=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),i=(v.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),a=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t},n=function(t){try{return!!t()}catch(t){return!0}},e=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=g.document,o=i(r)&&i(r.createElement),u=function(t){return o?r.createElement(t):{}},l=!e&&!n(function(){return 7!=Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a}),s=Object.defineProperty,f={f:e?Object.defineProperty:function(t,e,n){if(a(t),e=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),a(n),l)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x=e?function(t,e,n){return f.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},p={}.hasOwnProperty,d=function(t,e){return p.call(t,e)},y=0,h=Math.random(),b=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++y+h).toString(36))},j=t(function(t){var o=b("src"),e="toString",n=Function[e],a=(""+n).split(e);v.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(d(n,"name")||x(n,"name",e)),t[e]!==n&&(i&&(d(n,o)||x(n,o,t[e]?""+t[e]:a.join(String(e)))),t===g?t[e]=n:r?t[e]?t[e]=n:x(t,e,n):(delete t[e],x(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),m=function(r,i,t){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},O="prototype",_=function(t,e,n){var r,i,o,a,u=t&_.F,c=t&_.G,l=t&_.S,s=t&_.P,f=t&_.B,p=c?g:l?g[e]||(g[e]={}):(g[e]||{})[O],d=c?v:v[e]||(v[e]={}),y=d[O]||(d[O]={});for(r in c&&(n=e),n)o=((i=!u&&p&&void 0!==p[r])?p:n)[r],a=f&&i?m(o,g):s&&"function"==typeof o?m(Function.call,o):o,p&&j(p,r,o,t&_.U),d[r]!=o&&x(d,r,a),s&&y[r]!=o&&(y[r]=o)};g.core=v,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128;var w,A,L,T,P,k,C,M,E,F=_,I={}.toString,R=function(t){return I.call(t).slice(8,-1)},V=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==R(t)?t.split(""):Object(t)},B=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},D=function(t){return Object(B(t))},G=Math.ceil,N=Math.floor,z=function(t){return isNaN(t=+t)?0:(0<t?N:G)(t)},H=Math.min,K=function(t){return 0<t?H(z(t),9007199254740991):0},U=Array.isArray||function(t){return"Array"==R(t)},W=t(function(t){var e="__core-js_shared__",n=g[e]||(g[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),q=t(function(t){var e=W("wks"),n=g.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:b)("Symbol."+t))}).store=e}),Q=q("species"),J=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})},X=(L=1==(w=2),T=2==w,P=3==w,k=4==w,C=6==w,M=5==w||C,E=A||function(t,e){return U(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!U(r.prototype)||(r=void 0),i(r)&&null===(r=r[Q])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},function(t,e,n){for(var r,i,o=D(t),a=V(o),u=m(e,n,3),c=K(a.length),l=0,s=L?E(t,c):T?E(t,0):void 0;l<c;l++)if((M||l in a)&&(i=u(r=a[l],l,o),w))if(L)s[l]=i;else if(i)switch(w){case 3:return!0;case 5:return r;case 6:return l;case 2:s.push(r)}else if(k)return!1;return C?-1:P||k?k:s});F(F.P+F.F*!J([].filter,!0),"Array",{filter:function(t){return X(this,t,arguments[1])}});var Y=function(t){return V(B(t))},Z=Math.max,tt=Math.min,et=function(l){return function(t,e,n){var r,i,o,a=Y(t),u=K(a.length),c=(i=u,(r=z(r=n))<0?Z(r+i,0):tt(r,i));if(l&&e!=e){for(;c<u;)if((o=a[c++])!=o)return!0}else for(;c<u;c++)if((l||c in a)&&a[c]===e)return l||c||0;return!l&&-1}},nt=et(!1),rt=[].indexOf,it=!!rt&&1/[1].indexOf(1,-0)<0;F(F.P+F.F*(it||!J(rt)),"Array",{indexOf:function(t){return it?rt.apply(this,arguments)||0:nt(this,t,arguments[1])}});var ot=q("unscopables"),at=Array.prototype;null==at[ot]&&x(at,ot,{});var ut=function(t){at[ot][t]=!0},ct=function(t,e){return{value:e,done:!!t}},lt={},st=W("keys"),ft=function(t){return st[t]||(st[t]=b(t))},pt=et(!1),dt=ft("IE_PROTO"),yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),gt=Object.keys||function(t){return function(t,e){var n,r=Y(t),i=0,o=[];for(n in r)n!=dt&&d(r,n)&&o.push(n);for(;e.length>i;)d(r,n=e[i++])&&(~pt(o,n)||o.push(n));return o}(t,yt)},vt=e?Object.defineProperties:function(t,e){a(t);for(var n,r=gt(e),i=r.length,o=0;o<i;)f.f(t,n=r[o++],e[n]);return t},ht=g.document,bt=ht&&ht.documentElement,mt=ft("IE_PROTO"),Ot=function(){},_t="prototype",St=function(){var t,e=u("iframe"),n=yt.length;for(e.style.display="none",bt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),St=t.F;n--;)delete St[_t][yt[n]];return St()},xt=Object.create||function(t,e){var n;return null!==t?(Ot[_t]=a(t),n=new Ot,Ot[_t]=null,n[mt]=t):n=St(),void 0===e?n:vt(n,e)},jt=f.f,wt=q("toStringTag"),At=function(t,e,n){t&&!d(t=n?t:t.prototype,wt)&&jt(t,wt,{configurable:!0,value:e})},Lt={};x(Lt,q("iterator"),function(){return this});var Tt=ft("IE_PROTO"),Pt=Object.prototype,kt=Object.getPrototypeOf||function(t){return t=D(t),d(t,Tt)?t[Tt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Pt:null},Ct=q("iterator"),Mt=!([].keys&&"next"in[].keys()),Et="values",Ft=function(){return this},It=function(t,e,n,r,i,o,a){var u,c,l;c=e,l=r,(u=n).prototype=xt(Lt,{next:S(1,l)}),At(u,c+" Iterator");var s,f,p,d=function(t){if(!Mt&&t in h)return h[t];switch(t){case"keys":case Et:return function(){return new n(this,t)}}return function(){return new n(this,t)}},y=e+" Iterator",g=i==Et,v=!1,h=t.prototype,b=h[Ct]||h["@@iterator"]||i&&h[i],m=b||d(i),O=i?g?d("entries"):m:void 0,_="Array"==e&&h.entries||b;if(_&&(p=kt(_.call(new t)))!==Object.prototype&&p.next&&(At(p,y,!0),"function"!=typeof p[Ct]&&x(p,Ct,Ft)),g&&b&&b.name!==Et&&(v=!0,m=function(){return b.call(this)}),(Mt||v||!h[Ct])&&x(h,Ct,m),lt[e]=m,lt[y]=Ft,i)if(s={values:g?m:d(Et),keys:o?m:d("keys"),entries:O},a)for(f in s)f in h||j(h,f,s[f]);else F(F.P+F.F*(Mt||v),e,s);return s}(Array,"Array",function(t,e){this._t=Y(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,ct(1)):ct(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");lt.Arguments=lt.Array,ut("keys"),ut("values"),ut("entries");for(var Rt=q("iterator"),Vt=q("toStringTag"),Bt=lt.Array,Dt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Gt=gt(Dt),Nt=0;Nt<Gt.length;Nt++){var zt,Ht=Gt[Nt],Kt=Dt[Ht],Ut=g[Ht],Wt=Ut&&Ut.prototype;if(Wt&&(Wt[Rt]||x(Wt,Rt,Bt),Wt[Vt]||x(Wt,Vt,Ht),lt[Ht]=Bt,Kt))for(zt in It)Wt[zt]||j(Wt,zt,It[zt],!0)}var qt,Qt,$t,Jt;qt="keys",Qt=function(){return function(t){return gt(D(t))}},$t=(v.Object||{})[qt]||Object[qt],(Jt={})[qt]=Qt($t),F(F.S+F.F*n(function(){$t(1)}),"Object",Jt);var Xt={aspectRatio:3.75,alt:i18next.t("alt",{ns:"railArea"}),margin:{top:50,left:80,bottom:70},filterData:function(t){return t},x:{label:i18next.t("x_label",{ns:"railArea"}),getValue:function(t){return new Date(t.year+"-01")},getText:function(t){return t.year},ticks:10},y:{label:i18next.t("y_label",{ns:"railArea"}),getValue:function(t,e){return"string"==typeof t[e]||t[e]instanceof String?0:t[e]},getText:function(t,e){return"string"==typeof t[e]||(t[e],String),t[e]},ticks:2},z:{label:i18next.t("z_label",{ns:"railArea"}),getId:function(t){return t.key},getKeys:function(t){var e=Object.keys(t[0]);return e.splice(e.indexOf("year"),1),-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getClass:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.z.getId.apply(this,e)},getText:function(t){return i18next.t(t.key,{ns:"railArea"})}},datatable:!1,transition:!1,width:900};function Yt(n,t){var e=0,r=63,i=600-r-0,o=30-e-0,a=d3.select(t).select("svg").attr("width",i).attr("height",o).style("vertical-align","middle").attr("transform","translate("+r+","+e+")").selectAll("rect").data(n).enter().append("g");a.append("rect").attr("width",20).attr("height",20).attr("y",5).attr("x",function(t,e){return 0+200*e}).attr("class",function(t,e){return n[e]+"to"}),a.append("text"),d3.select(t).selectAll("text").text(function(t,e){return console.log(n),console.log("leg d: ",t),0===e?n[0]+" to "+n[1]:n[1]+" to "+n[0]}).attr("y",18).attr("x",function(t,e){return[25,225][e]}).style("display",function(){return"inline"})}var Zt={},te="ATR",ee="meat",ne=["ATR","ON","QC","MB","SK","AB","BC"].filter(function(t){return t!==te}),re=d3.select("#pair1").append("svg").attr("id","svg_pair1"),ie=d3.select("#pair2").append("svg").attr("id","svg_pair2"),oe=d3.select("#pair3").append("svg").attr("id","svg_pair3"),ae=d3.select("#pair4").append("svg").attr("id","svg_pair4"),ue=d3.select("#pair5").append("svg").attr("id","svg_pair5"),ce=d3.select("#pair6").append("svg").attr("id","svg_pair6"),le=d3.select("#pair7").append("svg").attr("id","svg_pair7"),se=d3.select("#pair8").append("svg").attr("id","svg_pair8");i18n.load(["src/i18n"],function(){Xt.x.label=i18next.t("x_label",{ns:"railArea"}),Xt.y.label=i18next.t("y_label",{ns:"railArea"}),d3.json("data/rail/"+ee+"_"+te+".json",function(t,e){for(var u=(Zt[te]=e).length,n=function(o){var a=ne[o];d3.json("data/rail/"+ee+"_"+a+".json",function(t,e){Zt[a]=e;for(var n=[],r=0;r<u;r++){var i;n.push((c(i={year:Zt[a][r].year},te+"to"+a,Zt[te][r][a]),c(i,a+"to"+te,Zt[a][r][te]),i))}0==o?(areaChart(re,Xt,n),Yt([te,a],"#legend1")):1==o?(areaChart(ie,Xt,n),Yt([te,a],"#legend2")):2==o?(areaChart(oe,Xt,n),Yt([te,a],"#legend3")):3==o?(areaChart(ae,Xt,n),Yt([te,a],"#legend4")):4==o?(areaChart(ue,Xt,n),Yt([te,a],"#legend5")):5==o?(areaChart(ce,Xt,n),Yt([te,a],"#legend6")):6==o?(areaChart(le,Xt,n),Yt([te,a],"#legend7")):7==o&&(areaChart(se,Xt,n),Yt([te,a],"#legend8"))})},r=0;r<ne.length;r++)n(r)})}),$(document).on("change",function(t){"commodity"===t.target.id&&(ee=document.getElementById("commodity").value),"region"===t.target.id&&(te=document.getElementById("region").value),Zt[te]?areaChart(re,Xt,Zt[te]):d3.json("data/rail/rail_"+ee+"_orig"+te+"_all_dest.json",function(t,e){Zt[te]=e})})}();