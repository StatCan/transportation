!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var v=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),y=(v.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),o=t(function(t){var e="__core-js_shared__",n=y[e]||(y[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),e=0,n=Math.random(),u=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))},s=t(function(t){var e=o("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:u)("Symbol."+t))}).store=e}),p=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},f=function(t){try{return!!t()}catch(t){return!0}},r=!f(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),i=y.document,a=p(i)&&p(i.createElement),l=function(t){return a?i.createElement(t):{}},c=!r&&!f(function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}),d=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},h=Object.defineProperty,m={f:r?Object.defineProperty:function(t,e,n){if(E(t),e=d(e,!0),E(n),c)try{return h(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},_=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},C=r?function(t,e,n){return m.f(t,e,_(1,n))}:function(t,e,n){return t[e]=n,t},g=s("unscopables"),b=Array.prototype;null==b[g]&&C(b,g,{});var x=function(t){b[g][t]=!0},S=function(t,e){return{value:e,done:!!t}},O={},w={}.toString,T=function(t){return w.call(t).slice(8,-1)},A=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==T(t)?t.split(""):Object(t)},k=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},F=function(t){return A(k(t))},N={}.hasOwnProperty,j=function(t,e){return N.call(t,e)},I=t(function(t){var i=u("src"),e="toString",n=Function[e],a=(""+n).split(e);v.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(j(n,"name")||C(n,"name",e)),t[e]!==n&&(o&&(j(n,i)||C(n,i,t[e]?""+t[e]:a.join(String(e)))),t===y?t[e]=n:r?t[e]?t[e]=n:C(t,e,n):(delete t[e],C(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||n.call(this)})}),P=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},L=function(r,o,t){if(P(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},M="prototype",U=function(t,e,n){var r,o,i,a,u=t&U.F,l=t&U.G,c=t&U.S,s=t&U.P,f=t&U.B,d=l?y:c?y[e]||(y[e]={}):(y[e]||{})[M],p=l?v:v[e]||(v[e]={}),h=p[M]||(p[M]={});for(r in l&&(n=e),n)i=((o=!u&&d&&void 0!==d[r])?d:n)[r],a=f&&o?L(i,y):s&&"function"==typeof i?L(Function.call,i):i,d&&I(d,r,i,t&U.U),p[r]!=i&&C(p,r,a),s&&h[r]!=i&&(h[r]=i)};y.core=v,U.F=1,U.G=2,U.S=4,U.P=8,U.B=16,U.W=32,U.U=64,U.R=128;var R=U,B=Math.ceil,D=Math.floor,V=function(t){return isNaN(t=+t)?0:(0<t?D:B)(t)},G=Math.min,z=function(t){return 0<t?G(V(t),9007199254740991):0},H=Math.max,W=Math.min,Y=function(c){return function(t,e,n){var r,o,i,a=F(t),u=z(a.length),l=(o=u,(r=V(r=n))<0?H(r+o,0):W(r,o));if(c&&e!=e){for(;l<u;)if((i=a[l++])!=i)return!0}else for(;l<u;l++)if((c||l in a)&&a[l]===e)return c||l||0;return!c&&-1}},X=o("keys"),q=function(t){return X[t]||(X[t]=u(t))},K=Y(!1),J=q("IE_PROTO"),Q=function(t,e){var n,r=F(t),o=0,i=[];for(n in r)n!=J&&j(r,n)&&i.push(n);for(;e.length>o;)j(r,n=e[o++])&&(~K(i,n)||i.push(n));return i},Z="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),tt=Object.keys||function(t){return Q(t,Z)},et=r?Object.defineProperties:function(t,e){E(t);for(var n,r=tt(e),o=r.length,i=0;i<o;)m.f(t,n=r[i++],e[n]);return t},nt=y.document,rt=nt&&nt.documentElement,ot=q("IE_PROTO"),it=function(){},at="prototype",ut=function(){var t,e=l("iframe"),n=Z.length;for(e.style.display="none",rt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ut=t.F;n--;)delete ut[at][Z[n]];return ut()},lt=Object.create||function(t,e){var n;return null!==t?(it[at]=E(t),n=new it,it[at]=null,n[ot]=t):n=ut(),void 0===e?n:et(n,e)},ct=m.f,st=s("toStringTag"),ft=function(t,e,n){t&&!j(t=n?t:t.prototype,st)&&ct(t,st,{configurable:!0,value:e})},dt={};C(dt,s("iterator"),function(){return this});var pt=function(t){return Object(k(t))},ht=q("IE_PROTO"),vt=Object.prototype,yt=Object.getPrototypeOf||function(t){return t=pt(t),j(t,ht)?t[ht]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?vt:null},mt=s("iterator"),gt=!([].keys&&"next"in[].keys()),bt="values",xt=function(){return this},St=function(t,e,n,r,o,i,a){var u,l,c;l=e,c=r,(u=n).prototype=lt(dt,{next:_(1,c)}),ft(u,l+" Iterator");var s,f,d,p=function(t){if(!gt&&t in m)return m[t];switch(t){case"keys":case bt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",v=o==bt,y=!1,m=t.prototype,g=m[mt]||m["@@iterator"]||o&&m[o],b=g||p(o),x=o?v?p("entries"):b:void 0,S="Array"==e&&m.entries||g;if(S&&(d=yt(S.call(new t)))!==Object.prototype&&d.next&&(ft(d,h,!0),"function"!=typeof d[mt]&&C(d,mt,xt)),v&&g&&g.name!==bt&&(y=!0,b=function(){return g.call(this)}),(gt||y||!m[mt])&&C(m,mt,b),O[e]=b,O[h]=xt,o)if(s={values:v?b:p(bt),keys:i?b:p("keys"),entries:x},a)for(f in s)f in m||I(m,f,s[f]);else R(R.P+R.F*(gt||y),e,s);return s}(Array,"Array",function(t,e){this._t=F(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,S(1)):S(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");O.Arguments=O.Array,x("keys"),x("values"),x("entries");for(var _t=s("iterator"),Ct=s("toStringTag"),Et=O.Array,Ot={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wt=tt(Ot),Tt=0;Tt<wt.length;Tt++){var At,kt=wt[Tt],Ft=Ot[kt],Nt=y[kt],jt=Nt&&Nt.prototype;if(jt&&(jt[_t]||C(jt,_t,Et),jt[Ct]||C(jt,Ct,kt),O[kt]=Et,Ft))for(At in St)jt[At]||I(jt,At,St[At],!0)}var It=Array.isArray||function(t){return"Array"==T(t)},Pt=s("species"),Lt=function(t,e){return It(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!It(r.prototype)||(r=void 0),p(r)&&null===(r=r[Pt])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},Mt=function(f,t){var d=1==f,p=2==f,h=3==f,v=4==f,y=6==f,m=5==f||y,g=t||Lt;return function(t,e,n){for(var r,o,i=pt(t),a=A(i),u=L(e,n,3),l=z(a.length),c=0,s=d?g(t,l):p?g(t,0):void 0;c<l;c++)if((m||c in a)&&(o=u(r=a[c],c,i),f))if(d)s[c]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return c;case 2:s.push(r)}else if(v)return!1;return y?-1:h||v?v:s}},Ut=function(t,e){return!!t&&f(function(){e?t.call(null,function(){},1):t.call(null)})},Rt=Mt(0),Bt=Ut([].forEach,!0);R(R.P+R.F*!Bt,"Array",{forEach:function(t){return Rt(this,t,arguments[1])}});var Dt=Mt(1);R(R.P+R.F*!Ut([].map,!0),"Array",{map:function(t){return Dt(this,t,arguments[1])}});R(R.P+R.F*!Ut([].reduce,!0),"Array",{reduce:function(t){return function(t,e,n,r,o){P(e);var i=pt(t),a=A(i),u=z(i.length),l=o?u-1:0,c=o?-1:1;if(n<2)for(;;){if(l in a){r=a[l],l+=c;break}if(l+=c,o?l<0:u<=l)throw TypeError("Reduce of empty array with no initial value")}for(;o?0<=l:l<u;l+=c)l in a&&(r=e(r,a[l],l,i));return r}(this,t,arguments.length,arguments[1],!1)}});var Vt,Gt,zt,Ht=s("match"),$t=s("species"),Wt=(Vt=!0,function(t,e){var n,r,o=String(k(t)),i=V(e),a=o.length;return i<0||a<=i?Vt?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?Vt?o.charAt(i):n:Vt?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}),Yt=s("toStringTag"),Xt="Arguments"==T(function(){return arguments}()),qt=RegExp.prototype.exec,Kt=function(t,e){var n,r,o,i,a=t.exec;if("function"==typeof a){var u=a.call(t,e);if("object"!=typeof u)throw new TypeError("RegExp exec method returned something other than an Object or null");return u}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(o=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),Yt))?o:Xt?T(r):"Object"==(i=T(r))&&"function"==typeof r.callee?"Arguments":i))throw new TypeError("RegExp#exec called on incompatible receiver");return qt.call(t,e)},Jt=RegExp.prototype.exec,Qt=String.prototype.replace,Zt=Jt,te="lastIndex",ee=(Gt=/a/,zt=/b*/g,Jt.call(Gt,"a"),Jt.call(zt,"a"),0!==Gt[te]||0!==zt[te]),ne=void 0!==/()??/.exec("")[1];(ee||ne)&&(Zt=function(t){var e,n,r,o,i=this;return ne&&(n=new RegExp("^"+i.source+"$(?!\\s)",function(){var t=E(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(i))),ee&&(e=i[te]),r=Jt.call(i,t),ee&&r&&(i[te]=i.global?r.index+r[0].length:e),ne&&r&&1<r.length&&Qt.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var re=Zt;R({target:"RegExp",proto:!0,forced:re!==/./.exec},{exec:re});var oe=s("species"),ie=!f(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ae=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ue=Math.min,le=[].push,ce="split",se="length",fe="lastIndex",de=4294967295,pe=!f(function(){});!function(n,t,e){var r=s(n),i=!f(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),o=i?!f(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[oe]=function(){return e}),e[r](""),!t}):void 0;if(!i||!o||"replace"===n&&!ie||"split"===n&&!ae){var a=/./[r],u=e(k,r,""[n],function(t,e,n,r,o){return e.exec===re?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),l=u[0],c=u[1];I(String.prototype,n,l),C(RegExp.prototype,r,2==t?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)})}}("split",2,function(o,i,S,_){var C;return C="c"=="abbc"[ce](/(b)*/)[1]||4!="test"[ce](/(?:)/,-1)[se]||2!="ab"[ce](/(?:ab)*/)[se]||4!="."[ce](/(.?)(.?)/)[se]||1<"."[ce](/()()/)[se]||""[ce](/.?/)[se]?function(t,e){var n,r,o=String(this);if(void 0===t&&0===e)return[];if(!p(n=t)||(void 0!==(r=n[Ht])?!r:"RegExp"!=T(n)))return S.call(o,t,e);for(var i,a,u,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=void 0===e?de:e>>>0,d=new RegExp(t.source,c+"g");(i=re.call(d,o))&&!(s<(a=d[fe])&&(l.push(o.slice(s,i.index)),1<i[se]&&i.index<o[se]&&le.apply(l,i.slice(1)),u=i[0][se],s=a,l[se]>=f));)d[fe]===i.index&&d[fe]++;return s===o[se]?!u&&d.test("")||l.push(""):l.push(o.slice(s)),l[se]>f?l.slice(0,f):l}:"0"[ce](void 0,0)[se]?function(t,e){return void 0===t&&0===e?[]:S.call(this,t,e)}:S,[function(t,e){var n=o(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):C.call(String(n),t,e)},function(t,e){var n=_(C,t,this,e,C!==S);if(n.done)return n.value;var r,o,i,a=E(t),u=String(this),l=(r=RegExp,void 0===(i=E(a).constructor)||null==(o=E(i)[$t])?r:P(o)),c=a.unicode,s=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pe?"y":"g"),f=new l(pe?a:"^(?:"+a.source+")",s),d=void 0===e?de:e>>>0;if(0===d)return[];if(0===u.length)return null===Kt(f,u)?[u]:[];for(var p,h,v=0,y=0,m=[];y<u.length;){f.lastIndex=pe?y:0;var g,b=Kt(f,pe?u:u.slice(y));if(null===b||(g=ue(z(f.lastIndex+(pe?0:y)),u.length))===v)p=u,y=(h=y)+(c?Wt(p,h).length:1);else{if(m.push(u.slice(v,y)),m.length===d)return m;for(var x=1;x<=b.length-1;x++)if(m.push(b[x]),m.length===d)return m;y=v=g}}return m.push(u.slice(v)),m}]});var he=[].sort,ve=[1,2,3];R(R.P+R.F*(f(function(){ve.sort(void 0)})||!f(function(){ve.sort(null)})||!Ut(he)),"Array",{sort:function(t){return void 0===t?he.call(pt(this)):he.call(pt(this),P(t))}});var ye,me,ge=/"/g;(me={})[ye="link"]=function(e){return function(t){return e(this,"a","href",t)}}(function(t,e,n,r){var o=String(k(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(r).replace(ge,"&quot;")+'"'),i+">"+o+"</"+e+">"}),R(R.P+R.F*f(function(){var t=""[ye]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",me);var be=m.f,xe=Function.prototype,Se=/^\s*function ([^ (]*)/;"name"in xe||r&&be(xe,"name",{configurable:!0,get:function(){try{return(""+this).match(Se)[1]}catch(t){return""}}});var _e=Y(!0);function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oe(t,e,n){return e&&Ee(t.prototype,e),n&&Ee(t,n),t}function we(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}R(R.P,"Array",{includes:function(t){return _e(this,t,1<arguments.length?arguments[1]:void 0)}}),x("includes");var Ae=Mt(2);R(R.P+R.F*!Ut([].filter,!0),"Array",{filter:function(t){return Ae(this,t,arguments[1])}});var ke={aspectRatio:1.6,width:900,margin:{top:30,right:10,bottom:30,left:10}};var Fe=Y(!1),Ne=[].indexOf,je=!!Ne&&1/[1].indexOf(1,-0)<0;R(R.P+R.F*(je||!Ut(Ne)),"Array",{indexOf:function(t){return je?Ne.apply(this,arguments)||0:Fe(this,t,arguments[1])}});var Ie={tableTitle:i18next.t("alt",{ns:"modes"}),y:{getValue:function(t,e){return t[e]}},z:{getId:function(t){return t.name},getKeys:function(t){var e=["name","value"];return-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getKeyText:function(t){return i18next.t(t,{ns:"modes_sankey"})},getText:function(t){return i18next.t(t.name,{ns:"modes"})}}},Pe=[].slice,Le={},Me=Function.bind||function(e){var n=P(this),r=Pe.call(arguments,1),o=function(){var t=r.concat(Pe.call(arguments));return this instanceof o?function(t,e,n){if(!(e in Le)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";Le[e]=Function("F,a","return new F("+r.join(",")+")")}return Le[e](t,n)}(n,t.length,t):function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}(n,t,e)};return p(n.prototype)&&(o.prototype=n.prototype),o};R(R.P,"Function",{bind:Me});var Ue=function(){function n(t,e){Ce(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}return Oe(n,[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}]),n}();Ue.n=0;var Re,Be={f:{}.propertyIsEnumerable},De=Be.f,Ve=(Re=!0,function(t){for(var e,n=F(t),r=tt(n),o=r.length,i=0,a=[];i<o;)De.call(n,e=r[i++])&&a.push(Re?[e,n[e]]:n[e]);return a});R(R.S,"Object",{entries:function(t){return Ve(t)}});var Ge=Mt(5),ze="find",He=!0;ze in[]&&Array(1)[ze](function(){He=!1}),R(R.P+R.F*He,"Array",{find:function(t){return Ge(this,t,1<arguments.length?arguments[1]:void 0)}}),x(ze);var $e=function(){function t(){Ce(this,t),this.tree=this.buildTree(),this.data=null}return Oe(t,[{key:"setData",value:function(n){this.data=n,this.iterTree(this.tree,function(e){var t=n.find(function(t){return t.target==e.target});e.value=null!=t?t.value:0}),this.tree.value=0,this.tree.children.forEach(function(t){this.tree.value+=t.value}.bind(this))}},{key:"iterTree",value:function(t,e){var n=this;e(t),0<t.children.length&&t.children.forEach(function(t){return n.iterTree(t,e)})}},{key:"toArray",value:function(){var e=[];return this.iterTree(this.tree,function(t){e.push(function(t){for(var e={},n=Object.entries(t),r=0;r<n.length;r++){var o=Te(n[r],1),i=o[0];e[i]=t[i]}return e}(t))}),e}},{key:"toLines",value:function(t,e){var n=[],r=[t],o=e,i=this.toArray();return n.push(r,[],o),i.forEach(function(t){n.push([i18next.t(t.name,{ns:"modes"}),t.value])}),n}},{key:"buildTree",value:function(){return{node:0,target:0,level:0,value:null,name:"intl",children:[{node:1,target:1,level:1,value:null,name:"USres",children:[{node:5,target:5,level:2,value:null,name:"USres_air",children:[]},{node:6,target:6,level:2,value:null,name:"USres_marine",children:[]},{node:7,target:7,level:2,value:null,name:"USres_land",children:[{node:17,target:17,level:3,value:null,name:"USres_car",children:[]},{node:18,target:18,level:3,value:null,name:"USres_bus",children:[]},{node:19,target:19,level:3,value:null,name:"USres_train",children:[]},{node:20,target:20,level:3,value:null,name:"USres_other",children:[]}]}]},{node:2,target:2,level:1,value:null,name:"nonUSres",children:[{node:8,target:8,level:2,value:null,name:"nonUSres_air",children:[]},{node:9,target:9,level:2,value:null,name:"nonUSres_marine",children:[]},{node:10,target:10,level:2,value:null,name:"nonUSres_land",children:[]}]},{node:3,target:3,level:1,value:null,name:"cdnFromUS",children:[{node:11,target:11,level:2,value:null,name:"cdnFromUS_air",children:[]},{node:12,target:12,level:2,value:null,name:"cdnFromUS_marine",children:[]},{node:13,target:13,level:2,value:null,name:"cdnFromUS_land",children:[{node:21,target:21,level:3,value:null,name:"cdnFromUS_car",children:[]},{node:22,target:22,level:3,value:null,name:"cdnFromUS_bus",children:[]},{node:23,target:23,level:3,value:null,name:"cdnFromUS_train",children:[]},{node:24,target:24,level:3,value:null,name:"cdnFromUS_other",children:[]}]}]},{node:4,target:4,level:1,value:null,name:"cdnFromOther",children:[{node:14,target:14,level:2,value:null,name:"cdnFromOther_air",children:[]},{node:15,target:15,level:2,value:null,name:"cdnFromOther_marine",children:[]},{node:16,target:16,level:2,value:null,name:"cdnFromOther_land",children:[]}]}]}}}]),t}(),We=Object.getOwnPropertyDescriptor,Ye={f:r?We:function(t,e){if(t=F(t),e=d(e,!0),c)try{return We(t,e)}catch(t){}if(j(t,e))return _(!Be.f.call(t,e),t[e])}},Xe=function(t,e){if(E(t),!p(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},qe={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=L(Function.call,Ye.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return Xe(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:Xe}.set,Ke=Z.concat("length","prototype"),Je={f:Object.getOwnPropertyNames||function(t){return Q(t,Ke)}},Qe="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",Ze="["+Qe+"]",tn=RegExp("^"+Ze+Ze+"*"),en=RegExp(Ze+Ze+"*$"),nn=function(t,e,n){var r={},o=f(function(){return!!Qe[t]()||"âÂ"!="âÂ"[t]()}),i=r[t]=o?e(rn):Qe[t];n&&(r[n]=i),R(R.P+R.F*o,"String",r)},rn=nn.trim=function(t,e){return t=String(k(t)),1&e&&(t=t.replace(tn,"")),2&e&&(t=t.replace(en,"")),t},on=nn,an=Je.f,un=Ye.f,ln=m.f,cn=on.trim,sn="Number",fn=y[sn],dn=fn,pn=fn.prototype,hn=T(lt(pn))==sn,vn="trim"in String.prototype,yn=function(t){var e=d(t,!1);if("string"==typeof e&&2<e.length){var n,r,o,i=(e=vn?e.trim():cn(e,3)).charCodeAt(0);if(43===i||45===i){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+e}for(var a,u=e.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||o<a)return NaN;return parseInt(u,r)}}return+e};if(!fn(" 0o1")||!fn("0b1")||fn("+0x1")){fn=function(t){var e,n,r,o,i=arguments.length<1?0:t,a=this;return a instanceof fn&&(hn?f(function(){pn.valueOf.call(a)}):T(a)!=sn)?(e=new dn(yn(i)),n=fn,(o=a.constructor)!==n&&"function"==typeof o&&(r=o.prototype)!==n.prototype&&p(r)&&qe&&qe(e,r),e):yn(i)};for(var mn,gn=r?an(dn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),bn=0;gn.length>bn;bn++)j(dn,mn=gn[bn])&&!j(fn,mn)&&ln(fn,mn,un(dn,mn));(fn.prototype=pn).constructor=fn,I(y,sn,fn)}var xn,Sn=new Ue,_n=new $e,Cn="Canada",En="01",On="2018",wn={},Tn=_n.toArray(),An=function(n,r,o){wn[n+"-"+r]?o():d3.json("data/modes/"+n+"-"+r+".json",function(t,e){t&&console.log("file does not exist"),wn[n+"-"+r]=e,o()})},kn=d3.select("#sankeyGraph").append("svg").attr("id","svg_sankeyChart"),Fn=d3.select(".tabledata");function Nn(){var t=i18next.t(En,{ns:"months"}),e=i18next.t(Cn,{ns:"modesTable"});0===wn[On+"-"+En][Cn].map(function(t){return t.value}).reduce(function(t,e){return t+e})?(d3.selectAll("svg > *").remove(),d3.select("#zeroFlag").text("".concat(i18next.t("noData",{ns:"modes_sankey"})," ").concat(e,",\n          ").concat(t," ").concat(On))):(d3.selectAll("svg > *").remove(),function(t,e,i){var n=ke,r=n.width,o=Math.ceil(r/n.aspectRatio),a=n.innerHeight=o-n.margin.top-n.margin.bottom,u=n.innerWidth=r-n.margin.left-n.margin.right,l=t.select("g.margin-offset"),c=l.select(".data"),s=[];function f(){for(var n,t=!1,r=["USres_land","cdnFromUS_land"],e=function(e){i.nodes.map(function(t){t.name===r[e]&&0<t.sourceLinks.length&&(n=!0)}),t=t||n},o=0;o<r.length;o++)e(o);return t}i={links:i.links.map(function(t){return we({},t)}).filter(function(t){return 0<t.value&&(s.push(t.source,t.target),!0)}),nodes:i.nodes.map(function(t){return we({},t)}).filter(function(t){return s.includes(t.node)})},n.innerHeight=o-n.margin.top-n.margin.bottom;var d=d3.format(",.0f"),p=function(t){return d(t)},h=d3.sankey().size([u,a]),v=h.link();t.attr("viewBox","0 0 "+r+" "+o).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",n.altText),l.empty()&&(l=t.append("g").attr("class","margin-offset").attr("transform","translate("+n.margin.left+","+n.margin.top+")")),d3.stcExt.addIEShim(t,o,r),function(){h.nodes(i.nodes).links(i.links).layout(32);var n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);c.empty()&&(c=l.append("g").attr("class","data")),c.append("g").selectAll(".link").data(h.links()).enter().append("path").attr("class","link").attr("d",v).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).on("mousemove",function(t){var e=t.source.name;n.transition().style("opacity",.9),n.html("<b>"+i18next.t(e,{ns:"modes"})+"</b><br><br><table><tr><td>"+i18next.t(t.target.name,{ns:"modes"})+": </td><td style='padding: 5px 10px 5px 5px;'><b>"+p(t.value)+" "+i18next.t("units",{ns:"modes_sankey"})+"</td></tr></table>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(t){n.transition().style("opacity",0)});var t=c.append("g").selectAll(".node").data(h.nodes()).enter().append("g").attr("class",function(t){return"node "+t.name}).attr("transform",function(t){return"translate(".concat(t.x||0,", ").concat(t.y||0,")")});function e(t){d3.select(".".concat(t))&&d3.select(".".concat(t)).select("text").text(i18next.t("Other",{ns:"modes"})).append("tspan").text("1").style("font-size","9px").attr("dx",".01em").attr("dy","-.3em")}t.on("mousemove",function(t){n.transition().style("opacity",.9),n.html("<b>"+i18next.t(t.name,{ns:"modes"})+"</b><br><br><table><tr><td>Total:</td><td style='padding: 5px 10px 5px 5px;'><b>"+p(t.value)+" "+i18next.t("units",{ns:"modes_sankey"})+"</td></tr></table>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(t){n.transition().style("opacity",0)}),t.append("rect").attr("height",function(t){return t.dy}).attr("width",h.nodeWidth()).style("stroke",function(t){return d3.rgb(t.color).darker(2)}).text(function(t){return i18next.t(t.name,{ns:"modes"})+"\n"+p(t.value)}),t.append("text").attr("x",function(t){var e=f();return 2===t.level&&!0===e?40:-6}).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor",function(t){var e=f();return 2===t.level&&!0===e?"start":"end"}).attr("transform",null).text(function(t){return i18next.t(t.name,{ns:"modes"})}).filter(function(t){return t.x<u/2}).attr("x",6+h.nodeWidth()).attr("text-anchor","start").call(function(t,l){t.each(function(){for(var t,e=d3.select(this),n=e.text().split(/\s+/).reverse(),r=[],o=0,i=e.attr("y"),a=parseFloat(e.attr("dy"))-.55,u=e.text(null).append("tspan").attr("class","nowrap").attr("x",40).attr("y",i).attr("dy",a+"em");t=n.pop();)r.push(t),u.text(r.join(" ")),u.node().getComputedTextLength()>l&&(r.pop(),u.text(r.join(" ")),r=[t],u=e.append("tspan").attr("class","wordwrap").attr("x",40).attr("y",i).attr("dy",function(){return 1.1*++o+a+"em"}).text(t))})},200),e("USres_other"),e("cdnFromUS_other")}()}(kn,0,{nodes:Tn,links:wn[On+"-"+En][Cn]}));var n=wn[On+"-"+En][Cn];_n.setData(n);var r,o,i,a,u,l,c,s=_n.toArray();s.forEach(function(t){}),drawTable(Fn,Ie,s),r=i18next.t(Cn,{ns:"modesTable"}),o=i18next.t(En,{ns:"months"}),i=i18next.t("tableTitle",{ns:"modesTable"})+" "+r+", "+o+" "+On+", "+i18next.t("byType",{ns:"modesTable"}),d3.select("#only-dt-tbl").text(i),Sn.appendTo(document.getElementById("copy-button-container")),a=i18next.t(Cn,{ns:"modesTable"}),u=i18next.t(En,{ns:"months"}),l=i18next.t("tableTitle",{ns:"modesTable"})+a+", "+u+" "+On+", "+i18next.t("byType",{ns:"modesTable"}),c=[i18next.t("name",{ns:"modes_sankey"}),i18next.t("value",{ns:"modes_sankey"})],Sn.data=_n.toLines(l,c)}function jn(){!function(t,e,n,r){var o=$(t);o.empty();for(var i=Number(n.min.substring(0,4));i<=Number(n.max.substring(0,4));i++)o.append($("<option></option>").attr("value",i).html(i));d3.select(t)._groups[0][0].value=r;var a=Number(n.max.substring(5,7)),u=Number(n.max.substring(0,4));if(Number(r)===u)$("".concat(e," > option")).each(function(){Number(this.value)>a&&(this.disabled=!0)});else{d3.selectAll("".concat(e," > option")).property("disabled",!1);var l=Number(d3.select(e)._groups[0][0].value);a<l&&$("".concat(t," > option")).each(function(){Number(this.value)===u&&(this.disabled=!0)})}}("#".concat("year"),"#".concat("month"),xn,On)}i18n.load(["src/i18n"],function(){d3.queue().defer(d3.json,"data/modes/dateRange.json").await(function(t,e){xn=e,jn()});var t={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};Sn.build(t),An(On,En,Nn)}),$(document).on("change",function(t){d3.selectAll(".tooltip").style("opacity",0),"groups"!==t.target.id&&"month"!==t.target.id&&"year"!==t.target.id||(Cn=document.getElementById("groups").value,En=document.getElementById("month").value,On=document.getElementById("year").value,""!==d3.select("#zeroFlag").text()&&d3.select("#zeroFlag").text(""),An(On,En,function(){jn(),Nn()}))})}();