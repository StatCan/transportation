!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var v=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),y=(v.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),i=t(function(t){var e="__core-js_shared__",n=y[e]||(y[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:v.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),e=0,n=Math.random(),u=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))},c=t(function(t){var e=i("wks"),n=y.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:u)("Symbol."+t))}).store=e}),p=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t){if(!p(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},r=!d(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),o=y.document,a=p(o)&&p(o.createElement),l=function(t){return a?o.createElement(t):{}},s=!r&&!d(function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a}),f=Object.defineProperty,h={f:r?Object.defineProperty:function(t,e,n){if(w(t),e=function(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),w(n),s)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},C=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=r?function(t,e,n){return h.f(t,e,C(1,n))}:function(t,e,n){return t[e]=n,t},m=c("unscopables"),g=Array.prototype;null==g[m]&&k(g,m,{});var b=function(t){g[m][t]=!0},x=function(t,e){return{value:e,done:!!t}},O={},S={}.toString,E=function(t){return S.call(t).slice(8,-1)},_=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==E(t)?t.split(""):Object(t)},T=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},A=function(t){return _(T(t))},j={}.hasOwnProperty,F=function(t,e){return j.call(t,e)},P=t(function(t){var o=u("src"),e="toString",n=Function[e],a=(""+n).split(e);v.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,r){var i="function"==typeof n;i&&(F(n,"name")||k(n,"name",e)),t[e]!==n&&(i&&(F(n,o)||k(n,o,t[e]?""+t[e]:a.join(String(e)))),t===y?t[e]=n:r?t[e]?t[e]=n:k(t,e,n):(delete t[e],k(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),L=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},M=function(r,i,t){if(L(r),void 0===i)return r;switch(t){case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}},I="prototype",N=function(t,e,n){var r,i,o,a,u=t&N.F,l=t&N.G,s=t&N.S,c=t&N.P,d=t&N.B,f=l?y:s?y[e]||(y[e]={}):(y[e]||{})[I],p=l?v:v[e]||(v[e]={}),h=p[I]||(p[I]={});for(r in l&&(n=e),n)o=((i=!u&&f&&void 0!==f[r])?f:n)[r],a=d&&i?M(o,y):c&&"function"==typeof o?M(Function.call,o):o,f&&P(f,r,o,t&N.U),p[r]!=o&&k(p,r,a),c&&h[r]!=o&&(h[r]=o)};y.core=v,N.F=1,N.G=2,N.S=4,N.P=8,N.B=16,N.W=32,N.U=64,N.R=128;var R=N,U=Math.ceil,B=Math.floor,D=function(t){return isNaN(t=+t)?0:(0<t?B:U)(t)},G=Math.min,V=function(t){return 0<t?G(D(t),9007199254740991):0},H=Math.max,z=Math.min,W=function(s){return function(t,e,n){var r,i,o,a=A(t),u=V(a.length),l=(i=u,(r=D(r=n))<0?H(r+i,0):z(r,i));if(s&&e!=e){for(;l<u;)if((o=a[l++])!=o)return!0}else for(;l<u;l++)if((s||l in a)&&a[l]===e)return s||l||0;return!s&&-1}},Y=i("keys"),q=function(t){return Y[t]||(Y[t]=u(t))},K=W(!1),X=q("IE_PROTO"),J="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(t){return function(t,e){var n,r=A(t),i=0,o=[];for(n in r)n!=X&&F(r,n)&&o.push(n);for(;e.length>i;)F(r,n=e[i++])&&(~K(o,n)||o.push(n));return o}(t,J)},Z=r?Object.defineProperties:function(t,e){w(t);for(var n,r=Q(e),i=r.length,o=0;o<i;)h.f(t,n=r[o++],e[n]);return t},tt=y.document,et=tt&&tt.documentElement,nt=q("IE_PROTO"),rt=function(){},it="prototype",ot=function(){var t,e=l("iframe"),n=J.length;for(e.style.display="none",et.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),ot=t.F;n--;)delete ot[it][J[n]];return ot()},at=Object.create||function(t,e){var n;return null!==t?(rt[it]=w(t),n=new rt,rt[it]=null,n[nt]=t):n=ot(),void 0===e?n:Z(n,e)},ut=h.f,lt=c("toStringTag"),st=function(t,e,n){t&&!F(t=n?t:t.prototype,lt)&&ut(t,lt,{configurable:!0,value:e})},ct={};k(ct,c("iterator"),function(){return this});var dt=function(t){return Object(T(t))},ft=q("IE_PROTO"),pt=Object.prototype,ht=Object.getPrototypeOf||function(t){return t=dt(t),F(t,ft)?t[ft]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pt:null},vt=c("iterator"),yt=!([].keys&&"next"in[].keys()),mt="values",gt=function(){return this},bt=function(t,e,n,r,i,o,a){var u,l,s;l=e,s=r,(u=n).prototype=at(ct,{next:C(1,s)}),st(u,l+" Iterator");var c,d,f,p=function(t){if(!yt&&t in m)return m[t];switch(t){case"keys":case mt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",v=i==mt,y=!1,m=t.prototype,g=m[vt]||m["@@iterator"]||i&&m[i],b=g||p(i),x=i?v?p("entries"):b:void 0,S="Array"==e&&m.entries||g;if(S&&(f=ht(S.call(new t)))!==Object.prototype&&f.next&&(st(f,h,!0),"function"!=typeof f[vt]&&k(f,vt,gt)),v&&g&&g.name!==mt&&(y=!0,b=function(){return g.call(this)}),(yt||y||!m[vt])&&k(m,vt,b),O[e]=b,O[h]=gt,i)if(c={values:v?b:p(mt),keys:o?b:p("keys"),entries:x},a)for(d in c)d in m||P(m,d,c[d]);else R(R.P+R.F*(yt||y),e,c);return c}(Array,"Array",function(t,e){this._t=A(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,x(1)):x(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");O.Arguments=O.Array,b("keys"),b("values"),b("entries");for(var xt=c("iterator"),St=c("toStringTag"),Ct=O.Array,kt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wt=Q(kt),Ot=0;Ot<wt.length;Ot++){var Et,_t=wt[Ot],Tt=kt[_t],At=y[_t],jt=At&&At.prototype;if(jt&&(jt[xt]||k(jt,xt,Ct),jt[St]||k(jt,St,_t),O[_t]=Ct,Tt))for(Et in bt)jt[Et]||P(jt,Et,bt[Et],!0)}var Ft=Array.isArray||function(t){return"Array"==E(t)},Pt=c("species"),Lt=function(t,e){return Ft(n=t)&&("function"!=typeof(r=n.constructor)||r!==Array&&!Ft(r.prototype)||(r=void 0),p(r)&&null===(r=r[Pt])&&(r=void 0)),new(void 0===r?Array:r)(e);var n,r},Mt=function(d,t){var f=1==d,p=2==d,h=3==d,v=4==d,y=6==d,m=5==d||y,g=t||Lt;return function(t,e,n){for(var r,i,o=dt(t),a=_(o),u=M(e,n,3),l=V(a.length),s=0,c=f?g(t,l):p?g(t,0):void 0;s<l;s++)if((m||s in a)&&(i=u(r=a[s],s,o),d))if(f)c[s]=i;else if(i)switch(d){case 3:return!0;case 5:return r;case 6:return s;case 2:c.push(r)}else if(v)return!1;return y?-1:h||v?v:c}},It=function(t,e){return!!t&&d(function(){e?t.call(null,function(){},1):t.call(null)})},Nt=Mt(0),Rt=It([].forEach,!0);R(R.P+R.F*!Rt,"Array",{forEach:function(t){return Nt(this,t,arguments[1])}});var Ut=Mt(1);R(R.P+R.F*!It([].map,!0),"Array",{map:function(t){return Ut(this,t,arguments[1])}});R(R.P+R.F*!It([].reduce,!0),"Array",{reduce:function(t){return function(t,e,n,r,i){L(e);var o=dt(t),a=_(o),u=V(o.length),l=i?u-1:0,s=i?-1:1;if(n<2)for(;;){if(l in a){r=a[l],l+=s;break}if(l+=s,i?l<0:u<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<u;l+=s)l in a&&(r=e(r,a[l],l,o));return r}(this,t,arguments.length,arguments[1],!1)}});var Bt,Dt,Gt,Vt=c("match"),Ht=c("species"),zt=(Bt=!0,function(t,e){var n,r,i=String(T(t)),o=D(e),a=i.length;return o<0||a<=o?Bt?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?Bt?i.charAt(o):n:Bt?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}),Wt=c("toStringTag"),Yt="Arguments"==E(function(){return arguments}()),$t=RegExp.prototype.exec,qt=function(t,e){var n,r,i,o,a=t.exec;if("function"==typeof a){var u=a.call(t,e);if("object"!=typeof u)throw new TypeError("RegExp exec method returned something other than an Object or null");return u}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),Wt))?i:Yt?E(r):"Object"==(o=E(r))&&"function"==typeof r.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return $t.call(t,e)},Kt=RegExp.prototype.exec,Xt=String.prototype.replace,Jt=Kt,Qt="lastIndex",Zt=(Dt=/a/,Gt=/b*/g,Kt.call(Dt,"a"),Kt.call(Gt,"a"),0!==Dt[Qt]||0!==Gt[Qt]),te=void 0!==/()??/.exec("")[1];(Zt||te)&&(Jt=function(t){var e,n,r,i,o=this;return te&&(n=new RegExp("^"+o.source+"$(?!\\s)",function(){var t=w(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(o))),Zt&&(e=o[Qt]),r=Kt.call(o,t),Zt&&r&&(o[Qt]=o.global?r.index+r[0].length:e),te&&r&&1<r.length&&Xt.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var ee=Jt;R({target:"RegExp",proto:!0,forced:ee!==/./.exec},{exec:ee});var ne=c("species"),re=!d(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ie=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),oe=Math.min,ae=[].push,ue="split",le="length",se="lastIndex",ce=4294967295,de=!d(function(){});!function(n,t,e){var r=c(n),o=!d(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),i=o?!d(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[ne]=function(){return e}),e[r](""),!t}):void 0;if(!o||!i||"replace"===n&&!re||"split"===n&&!ie){var a=/./[r],u=e(T,r,""[n],function(t,e,n,r,i){return e.exec===ee?o&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),l=u[0],s=u[1];P(String.prototype,n,l),k(RegExp.prototype,r,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}}("split",2,function(i,o,S,C){var k;return k="c"=="abbc"[ue](/(b)*/)[1]||4!="test"[ue](/(?:)/,-1)[le]||2!="ab"[ue](/(?:ab)*/)[le]||4!="."[ue](/(.?)(.?)/)[le]||1<"."[ue](/()()/)[le]||""[ue](/.?/)[le]?function(t,e){var n,r,i=String(this);if(void 0===t&&0===e)return[];if(!p(n=t)||(void 0!==(r=n[Vt])?!r:"RegExp"!=E(n)))return S.call(i,t,e);for(var o,a,u,l=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=void 0===e?ce:e>>>0,f=new RegExp(t.source,s+"g");(o=ee.call(f,i))&&!(c<(a=f[se])&&(l.push(i.slice(c,o.index)),1<o[le]&&o.index<i[le]&&ae.apply(l,o.slice(1)),u=o[0][le],c=a,l[le]>=d));)f[se]===o.index&&f[se]++;return c===i[le]?!u&&f.test("")||l.push(""):l.push(i.slice(c)),l[le]>d?l.slice(0,d):l}:"0"[ue](void 0,0)[le]?function(t,e){return void 0===t&&0===e?[]:S.call(this,t,e)}:S,[function(t,e){var n=i(this),r=null==t?void 0:t[o];return void 0!==r?r.call(t,n,e):k.call(String(n),t,e)},function(t,e){var n=C(k,t,this,e,k!==S);if(n.done)return n.value;var r,i,o,a=w(t),u=String(this),l=(r=RegExp,void 0===(o=w(a).constructor)||null==(i=w(o)[Ht])?r:L(i)),s=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(de?"y":"g"),d=new l(de?a:"^(?:"+a.source+")",c),f=void 0===e?ce:e>>>0;if(0===f)return[];if(0===u.length)return null===qt(d,u)?[u]:[];for(var p,h,v=0,y=0,m=[];y<u.length;){d.lastIndex=de?y:0;var g,b=qt(d,de?u:u.slice(y));if(null===b||(g=oe(V(d.lastIndex+(de?0:y)),u.length))===v)p=u,y=(h=y)+(s?zt(p,h).length:1);else{if(m.push(u.slice(v,y)),m.length===f)return m;for(var x=1;x<=b.length-1;x++)if(m.push(b[x]),m.length===f)return m;y=v=g}}return m.push(u.slice(v)),m}]});var fe=h.f,pe=Function.prototype,he=/^\s*function ([^ (]*)/;"name"in pe||r&&fe(pe,"name",{configurable:!0,get:function(){try{return(""+this).match(he)[1]}catch(t){return""}}});var ve=[].sort,ye=[1,2,3];R(R.P+R.F*(d(function(){ye.sort(void 0)})||!d(function(){ye.sort(null)})||!It(ve)),"Array",{sort:function(t){return void 0===t?ve.call(dt(this)):ve.call(dt(this),L(t))}});var me,ge,be=/"/g;(ge={})[me="link"]=function(e){return function(t){return e(this,"a","href",t)}}(function(t,e,n,r){var i=String(T(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(be,"&quot;")+'"'),o+">"+i+"</"+e+">"}),R(R.P+R.F*d(function(){var t=""[me]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",ge);var xe=W(!0);function Se(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ke(t,e,n){return e&&Ce(t.prototype,e),n&&Ce(t,n),t}function we(i){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,r;e=i,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return i}function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}R(R.P,"Array",{includes:function(t){return xe(this,t,1<arguments.length?arguments[1]:void 0)}}),b("includes");var Ee=Mt(2);R(R.P+R.F*!It([].filter,!0),"Array",{filter:function(t){return Ee(this,t,arguments[1])}});var _e={aspectRatio:1.6,width:900,margin:{top:10,right:10,bottom:30,left:10}};var Te=W(!1),Ae=[].indexOf,je=!!Ae&&1/[1].indexOf(1,-0)<0;R(R.P+R.F*(je||!It(Ae)),"Array",{indexOf:function(t){return je?Ae.apply(this,arguments)||0:Te(this,t,arguments[1])}});var Fe={tableTitle:i18next.t("alt",{ns:"modes"}),y:{getValue:function(t,e){return t[e]}},z:{getId:function(t){return t.name},getKeys:function(t){var e=["name","value"];return-1!==e.indexOf(this.y.totalProperty)&&e.splice(e.indexOf(this.y.totalProperty),1),e},getKeyText:function(t){return i18next.t(t,{ns:"modes_sankey"})},getText:function(t){return i18next.t(t.name,{ns:"modes"})}}},Pe=[].slice,Le={},Me=Function.bind||function(e){var n=L(this),r=Pe.call(arguments,1),i=function(){var t=r.concat(Pe.call(arguments));return this instanceof i?function(t,e,n){if(!(e in Le)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";Le[e]=Function("F,a","return new F("+r.join(",")+")")}return Le[e](t,n)}(n,t.length,t):function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}(n,t,e)};return p(n.prototype)&&(i.prototype=n.prototype),i};R(R.P,"Function",{bind:Me});var Ie=function(){function n(t,e){Se(this,n),this.pNode=t||document.createElement("div"),this.options=e||{},this.nodes={},this.data=null,this.instanceNumber=++n.n,this.class=this.options.class||""}return ke(n,[{key:"build",value:function(t){t&&(this.options=t),t.pNode&&(this.pNode=t.pNode),t.class&&(this.class=t.class),this.root=document.createElement("div"),this.root.setAttribute("class","copy-button button-"+this.instanceNumber+" "+this.class),this.pNode.appendChild(this.root),this.nodes.btnCopy=document.createElement("button"),this.nodes.btnCopy.setAttribute("type","button"),this.nodes.btnCopy.setAttribute("class","btn btn-primary copy button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.setAttribute("title",this.options.title||""),this.root.appendChild(this.nodes.btnCopy);var e=document.createElement("span");e.setAttribute("class","fa fa-clipboard clipboard button-"+this.instanceNumber+" "+this.class),this.nodes.btnCopy.appendChild(e);var n=document.createElement("span");n.setAttribute("class","wb-inv button-"+this.instanceNumber+" "+this.class),n.innerHTML=this.options.accessibility||"",this.nodes.btnCopy.appendChild(n),this.nodes.msgCopyConfirm=document.createElement("div"),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class),this.nodes.msgCopyConfirm.setAttribute("aria-live","polite"),this.nodes.msgCopyConfirm.innerHTML=this.options.msgCopyConfirm||"",this.root.appendChild(this.nodes.msgCopyConfirm),this.nodes.btnCopy.addEventListener("click",this.onBtnClick.bind(this))}},{key:"onBtnClick",value:function(t){this.copyData(this.data)}},{key:"copyData",value:function(t){var e=t||[];this.clipboard(this.toCSV("\t",e),this.root),this.fade(this.nodes.msgCopyConfirm,!0),setTimeout(function(t){this.fade(this.nodes.msgCopyConfirm,!1)}.bind(this),1500)}},{key:"toCSV",value:function(e,t){return t.map(function(t){return t.join(e)}).join("\r\n")}},{key:"clipboard",value:function(t,e){if(this.isIE())window.clipboardData.setData("Text",t);else{var n=document.createElement("textarea");n.textContent=t,e.appendChild(n),n.select(),document.execCommand("copy"),e.removeChild(n)}}},{key:"fade",value:function(t,e){var n=["copy-confirm button-"+this.instanceNumber+" "+this.class],r=e?"fadeIn":"fadeOut";n.push(r),t.setAttribute("class",n.join(" "))}},{key:"appendTo",value:function(t){this.pNode=t,this.pNode.appendChild(this.root),this.nodes.msgCopyConfirm.setAttribute("class","copy-confirm button-"+this.instanceNumber+" "+this.class)}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var r=t.indexOf("Edge/");return 0<r&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)}}]),n}();Ie.n=0;var Ne,Re={f:{}.propertyIsEnumerable}.f,Ue=(Ne=!0,function(t){for(var e,n=A(t),r=Q(n),i=r.length,o=0,a=[];o<i;)Re.call(n,e=r[o++])&&a.push(Ne?[e,n[e]]:n[e]);return a});R(R.S,"Object",{entries:function(t){return Ue(t)}});var Be=Mt(5),De="find",Ge=!0;De in[]&&Array(1)[De](function(){Ge=!1}),R(R.P+R.F*Ge,"Array",{find:function(t){return Be(this,t,1<arguments.length?arguments[1]:void 0)}}),b(De);var Ve=function(){function t(){Se(this,t),this.tree=this.buildTree(),this.data=null}return ke(t,[{key:"setData",value:function(n){this.data=n,this.iterTree(this.tree,function(e){var t=n.find(function(t){return t.target==e.target});e.value=null!=t?t.value:0}),this.tree.value=0,this.tree.children.forEach(function(t){this.tree.value+=t.value}.bind(this))}},{key:"iterTree",value:function(t,e){var n=this;e(t),0<t.children.length&&t.children.forEach(function(t){return n.iterTree(t,e)})}},{key:"toArray",value:function(){var e=[];return this.iterTree(this.tree,function(t){e.push(function(t){for(var e={},n=Object.entries(t),r=0;r<n.length;r++){var i=Oe(n[r],1),o=i[0];e[o]=t[o]}return e}(t))}),e}},{key:"toLines",value:function(t,e){var n=[],r=[t],i=e,o=this.toArray();return n.push(r,[],i),o.forEach(function(t){n.push([i18next.t(t.name,{ns:"modes"}),t.value])}),n}},{key:"buildTree",value:function(){return{node:0,target:0,level:0,value:null,name:"intl",children:[{node:1,target:1,level:1,value:null,name:"USres",children:[{node:5,target:5,level:2,value:null,name:"USres_air",children:[]},{node:6,target:6,level:2,value:null,name:"USres_marine",children:[]},{node:7,target:7,level:2,value:null,name:"USres_land",children:[{node:17,target:17,level:3,value:null,name:"USres_car",children:[]},{node:18,target:18,level:3,value:null,name:"USres_bus",children:[]},{node:19,target:19,level:3,value:null,name:"USres_train",children:[]},{node:20,target:20,level:3,value:null,name:"USres_other",children:[]}]}]},{node:2,target:2,level:1,value:null,name:"nonUSres",children:[{node:8,target:8,level:2,value:null,name:"nonUSres_air",children:[]},{node:9,target:9,level:2,value:null,name:"nonUSres_marine",children:[]},{node:10,target:10,level:2,value:null,name:"nonUSres_land",children:[]}]},{node:3,target:3,level:1,value:null,name:"cdnFromUS",children:[{node:11,target:11,level:2,value:null,name:"cdnFromUS_air",children:[]},{node:12,target:12,level:2,value:null,name:"cdnFromUS_marine",children:[]},{node:13,target:13,level:2,value:null,name:"cdnFromUS_land",children:[{node:21,target:21,level:3,value:null,name:"cdnFromUS_car",children:[]},{node:22,target:22,level:3,value:null,name:"cdnFromUS_bus",children:[]},{node:23,target:23,level:3,value:null,name:"cdnFromUS_train",children:[]},{node:24,target:24,level:3,value:null,name:"cdnFromUS_other",children:[]}]}]},{node:4,target:4,level:1,value:null,name:"cdnFromOther",children:[{node:14,target:14,level:2,value:null,name:"cdnFromOther_air",children:[]},{node:15,target:15,level:2,value:null,name:"cdnFromOther_marine",children:[]},{node:16,target:16,level:2,value:null,name:"cdnFromOther_land",children:[]}]}]}}}]),t}(),He=new Ie,ze=new Ve,We="Canada",Ye="01",$e="2018",qe={},Ke=ze.toArray(),Xe=function(n,r,i){qe[n+"-"+r]?i():d3.json("data/modes/"+n+"-"+r+".json",function(t,e){qe[n+"-"+r]=e,i()})},Je=d3.select("#sankeyGraph").append("svg").attr("id","svg_sankeyChart"),Qe=d3.select(".tabledata");function Ze(){var t=i18next.t(Ye,{ns:"modesMonth"}),e=i18next.t(We,{ns:"modesGeography"});0===qe[$e+"-"+Ye][We].map(function(t){return t.value}).reduce(function(t,e){return t+e})?(d3.selectAll("svg > *").remove(),d3.select("#zeroFlag").text("".concat(i18next.t("noData",{ns:"modes_sankey"})," ").concat(e,",\n          ").concat(t," ").concat($e))):(d3.selectAll("svg > *").remove(),function(t,e,r){var n=_e,i=n.width,o=Math.ceil(i/n.aspectRatio),a=n.innerHeight=o-n.margin.top-n.margin.bottom,u=n.innerWidth=i-n.margin.left-n.margin.right,l=t.select("g.margin-offset"),s=l.select(".data"),c=[];r={links:r.links.map(function(t){return we({},t)}).filter(function(t){return 0<t.value&&(c.push(t.source,t.target),!0)}),nodes:r.nodes.map(function(t){return we({},t)}).filter(function(t){return c.includes(t.node)})},n.innerHeight=o-n.margin.top-n.margin.bottom;var d=d3.format(",.0f"),f=function(t){return d(t)},p=d3.sankey().size([u,a]),h=p.link();t.attr("viewBox","0 0 "+i+" "+o).attr("preserveAspectRatio","xMidYMid meet").attr("role","img").attr("aria-label",n.altText),l.empty()&&(l=t.append("g").attr("class","margin-offset").attr("transform","translate("+n.margin.left+","+n.margin.top+")")),d3.stcExt.addIEShim(t,o,i),function(){p.nodes(r.nodes).links(r.links).layout(32);var n=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);s.empty()&&(s=l.append("g").attr("class","data"));var e=s.append("g").selectAll(".link").data(p.links()).enter().append("path").attr("class","link").attr("d",h).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).on("mousemove",function(t){var e=t.source.name;n.transition().style("opacity",.9),n.html("<b>"+i18next.t(e,{ns:"modes"})+"</b><br><br><table><tr><td>"+i18next.t(t.target.name,{ns:"modes"})+": </td><td style='padding: 5px 10px 5px 5px;'><b>"+f(t.value)+" "+i18next.t("units",{ns:"modes_sankey"})+"</td></tr></table>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(t){n.transition().style("opacity",0)});if(0!==r.links.length){var t=s.append("g").selectAll(".node").data(p.nodes()).enter().append("g").attr("class",function(t){return"node "+t.name}).attr("transform",function(t){return"translate(".concat(t.x||0,", ").concat(t.y||0,")")}).call(d3.drag().subject(function(t){return t}).on("start",function(){this.parentNode.appendChild(this)}).on("drag",function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(a-t.dy,d3.event.y)))+")"),p.relayout(),e.attr("d",h)}));t.on("mousemove",function(t){n.transition().style("opacity",.9),n.html("<b>"+i18next.t(t.name,{ns:"modes"})+"</b><br><br><table><tr><td>Total:</td><td style='padding: 5px 10px 5px 5px;'><b>"+f(t.value)+" "+i18next.t("units",{ns:"modes_sankey"})+"</td></tr></table>").style("left",d3.event.pageX+"px").style("top",d3.event.pageY-90+"px")}).on("mouseout",function(t){n.transition().style("opacity",0)}),t.append("rect").attr("height",function(t){return t.dy}).attr("width",p.nodeWidth()).style("stroke",function(t){return d3.rgb(t.color).darker(2)}).text(function(t){return i18next.t(t.name,{ns:"modes"})+"\n"+f(t.value)}),t.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){if(0!=t.value)return i18next.t(t.name,{ns:"modes"})}).filter(function(t){return t.x<u/2}).attr("x",6+p.nodeWidth()).attr("text-anchor","start").call(function(t,l){t.each(function(){for(var t,e=d3.select(this),n=e.text().split(/\s+/).reverse(),r=[],i=0,o=e.attr("y"),a=parseFloat(e.attr("dy"))-.55,u=e.text(null).append("tspan").attr("class","nowrap").attr("x",40).attr("y",o).attr("dy",a+"em");t=n.pop();)r.push(t),u.text(r.join(" ")),u.node().getComputedTextLength()>l&&(r.pop(),u.text(r.join(" ")),r=[t],u=e.append("tspan").attr("class","wordwrap").attr("x",40).attr("y",o).attr("dy",function(){return 1.1*++i+a+"em"}).text(t))})},200)}}()}(Je,0,{nodes:Ke,links:qe[$e+"-"+Ye][We]}));var n=qe[$e+"-"+Ye][We];ze.setData(n);var r,i,o,a,u,l,s,c=ze.toArray();c.forEach(function(t){}),drawTable(Qe,Fe,c),r=i18next.t(We,{ns:"modesGeography"}),i=i18next.t(Ye,{ns:"modesMonth"}),o=i18next.t("tableTitle",{ns:"modes_sankey"})+" "+r+", "+i+" "+$e+", "+i18next.t("byType",{ns:"modes_sankey"}),d3.select("#only-dt-tbl").text(o),He.appendTo(document.getElementById("copy-button-container")),a=i18next.t(We,{ns:"modesGeography"}),u=i18next.t(Ye,{ns:"modesMonth"}),l=i18next.t("tableTitle",{ns:"modes_sankey"})+" "+a+", "+u+" "+$e+", "+i18next.t("byType",{ns:"modes_sankey"}),s=[i18next.t("name",{ns:"modes_sankey"}),i18next.t("value",{ns:"modes_sankey"})],He.data=ze.toLines(l,s)}i18n.load(["src/i18n"],function(){var t={pNode:document.getElementById("copy-button-container"),title:i18next.t("CopyButton_Title",{ns:"CopyButton"}),msgCopyConfirm:i18next.t("CopyButton_Confirm",{ns:"CopyButton"}),accessibility:i18next.t("CopyButton_Title",{ns:"CopyButton"})};He.build(t),Xe($e,Ye,Ze)}),$(document).on("change",function(t){d3.selectAll(".tooltip").style("opacity",0),"groups"!==t.target.id&&"month"!==t.target.id&&"year"!==t.target.id||(We=document.getElementById("groups").value,Ye=document.getElementById("month").value,$e=document.getElementById("year").value,""!==d3.select("#zeroFlag").text()&&d3.select("#zeroFlag").text(""),Xe($e,Ye,function(){Ze()}))})}();